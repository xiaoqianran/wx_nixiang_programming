var e=require("../@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e(require("../@babel/runtime/regenerator")),t=require("../@babel/runtime/helpers/asyncToGenerator"),a=require("../@babel/runtime/helpers/classCallCheck"),n=require("../@babel/runtime/helpers/createClass"),u=require("../models/RequestAPI"),i=e(require("../utils/RequestError")),s=(require("../libs/runtime"),function(){function e(r){if(a(this,e),!r)throw Error("view 不能为空");this.view=r,this.requestAPI=u.requestAPI}var s,o;return n(e,[{key:"handleMyLocation",value:(o=t(r.default.mark((function e(t){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"我的位置"!==t.name){e.next=7;break}return e.next=4,this.getLocation();case 4:a=e.sent,t.latitude=a.latitude,t.longitude=a.longitude;case 7:e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(0),console.log("location error",e.t0),"getLocation:fail auth deny"!==e.t0.errMsg){e.next=16;break}throw new i.default("用户未授权位置服务",-1003);case 16:throw new i.default("GPS信号弱，请稍后再试",-1002);case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return o.apply(this,arguments)})},{key:"getLocation",value:(s=t(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestAPI.getLocation();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})}]),e}());exports.default=s;