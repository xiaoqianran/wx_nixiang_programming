var e,t,n=require("../../../@babel/runtime/helpers/typeof");module.exports=(e={},t=function(t,i){if(!e[t])return require(i);if(!e[t].status){var o=e[t].m;o._exports=o._tempexports;var r=Object.getOwnPropertyDescriptor(o,"exports");r&&r.configurable&&Object.defineProperty(o,"exports",{set:function(e){"object"===n(e)&&e!==o._exports&&(o._exports.__proto__=e.__proto__,Object.keys(e).forEach((function(t){o._exports[t]=e[t]}))),o._tempexports=e},get:function(){return o._tempexports}}),e[t].status=1,e[t].func(e[t].req,o,o.exports)}return e[t].m.exports},function(t,n,i){e[t]={status:0,func:n,req:i,m:{exports:{},_tempexports:{}}}}(1637058944944,(function(e,t,i){!function(e,o){"object"==n(i)&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):(e="undefined"!=typeof globalThis?globalThis:e||self).Aegis=o()}(this,(function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};function t(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,o++)i[o]=r[s];return i}function r(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if(null!=(i=arguments[n]))for(var i=Object(i),o=Object.keys(Object(i)),r=0,s=o.length;r<s;r++){var a=o[r],u=Object.getOwnPropertyDescriptor(i,a);null!=u&&u.enumerable&&(t[a]=i[a])}return t}});var s=(u.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},u.prototype.on=function(e,t,n){if(void 0===n&&(n=0),this){var i=this.eventsList[e];return i||(this.eventsList[e]=[],i=this.eventsList[e]),-1!==this.indexOf(i,t)||i.push({name:e,type:n||0,callback:t}),this}},u.prototype.one=function(e,t){this.on(e,t,1)},u.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(!n)return null;if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(e){}return null}},u.prototype.clear=function(){this.eventsList={}},u),a=function(e){return(e=Array.isArray(e)?e:[e]).map((function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return r(n)+"["+t+"]="+(void 0===e[n]?"":r(e[n]))})).join("&")})).join("&")+(e.length?"&count="+e.length:"")};function u(){var e=this;this.emit=function(t,n){if(e){var i;if(null!=(o=e.eventsList[t])&&o.length)for(var o=o.slice(),r=0;r<o.length;r++){i=o[r];try{var s=i.callback.apply(e,[n]);if(1===i.type&&e.remove(t,i.callback),!1===s)break}catch(t){throw t}}return e}},this.eventsList={}}function l(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e}function c(e){return"string"==typeof e&&e.startsWith("//")?"undefined"!=typeof location&&"https:"===location.protocol:/^https/.test(e)}function f(e,t,n){var i;try{if("function"==typeof(null==t?void 0:t.retCodeHandler)){var o=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx)||{};return{code:void 0===(r=o.code)?"unknown":r,isErr:o.isErr}}"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null===(i=null==t?void 0:t.ret)||void 0===i?void 0:i.join)&&(y=[].concat(t.ret.map((function(e){return e.toLowerCase()}))));var r,s=Object.getOwnPropertyNames(e).filter((function(e){return-1!==y.indexOf(e.toLowerCase())}));return s.length?{code:""+(r=Number(e[s[0]])),isErr:0!==r}:{code:"unknown",isErr:!1}}catch(e){return{code:"unknown",isErr:!1}}}function p(e,t){void 0===t&&(t=3);var i,o,r,s="";return Array.isArray(e)?(s+="[",i=e.length,e.forEach((function(e,o){var r,a;s+="object"==n(e)&&1<t?p(e,t-1):(a="",a+="undefined"==(e=n(r=e))||"symbol"==e||"function"==e?"null":"string"==e||"object"==e?'"'+r+'"':r),s+=o===i-1?"":","})),s+="]"):e instanceof Object?(s="{",o=Object.keys(e),r=o.length,o.forEach((function(i,a){var u,l,c;"object"==n(e[i])&&1<t?s+='"'+i+'":'+p(e[i],t-1):s+=(l=e[u=i],c="","string"==(i=n(l))||"object"==i?c+='"'+u+'":"'+l+'"':"function"==typeof l?c+='"'+u+'":"function '+l.name+'"':"symbol"==n(l)?c+='"'+u+'":"symbol"':"number"!=typeof l&&"boolean"!=i||(c+='"'+u+'": '+l),c),s+=a===r-1||a<r-1&&void 0===e[o[a+1]]?"":","})),s+="}"):s+=e,s}(B=M=M||{})[B.number=-1]="number",B.string="";var d,h,g,m,y=["ret","retcode","code","errcode"],v=function(e){if("string"==typeof e)return e;try{return(JSON.stringify(e,(t=[],i=[],function(e,o){if(o instanceof Error)return"Error.message: "+o.message+" \n  Error.stack: "+o.stack;if("object"==n(o)&&null!==o){var r=t.indexOf(o);if(-1!==r)return"[Circular "+i[r]+"]";t.push(o),i.push(e||"root")}return o}),4)||"undefined").replace(/"/gim,"")}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}var t,i};function b(e,t){var n,i=[],o=e.config;return e.lifeCycle.on("destroy",(function(){i.length=0})),function(e,r){if(i.push(e),t&&i.length>=t)return i=U(i),r(i.splice(0,i.length)),void(n&&clearTimeout(n));n&&clearTimeout(n),n=setTimeout((function(){n=null,0<(i=U(i)).length&&r(i.splice(0,i.length))}),o.delay)}}function w(e,t){return Array.isArray(e)?t(e.map((function(e){return i(i({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(v).join(" ")})}))):t(i(i({},e),{msg:"string"==typeof e.msg?e.msg:v(e.msg)}))}function O(e,t){return function(n,i){var o=Array.isArray(n),r=o?n:[n];e.lifeCycle.emit("beforeRequest",n);var s=e.config.beforeRequest;(r="function"==typeof s?r.map((function(e){try{var n=s({logs:e,logType:t});return(null==n?void 0:n.logType)===t&&null!=n&&n.logs?n.logs:!1!==n&&e}catch(n){return e}})).filter((function(e){return!1!==e})):r).length&&i(o?r:r[0])}}function R(e){return function(t,i){e.lifeCycle.emit("modifyRequest",t);var o=e.config.modifyRequest;if("function"==typeof o)try{var r=o(t);"object"==n(r)&&"url"in r&&(t=r)}catch(t){console.error(t)}i(t)}}function P(e){return function(t,n){e.lifeCycle.emit("afterRequest",t);var i=e.config.afterRequest;"function"==typeof i&&!1===i(t)||n(t)}}function E(e){if(!e||!e.reduce||!e.length)throw new TypeError("createPipeline need at least one function param");return 1===e.length?function(t,n){e[0](t,n||q)}:e.reduce((function(e,t){return function(n,i){return void 0===i&&(i=q),e(n,(function(e){return null==t?void 0:t(e,i)}))}}))}function x(e,t){Object.getOwnPropertyNames(e).forEach((function(n){"function"==typeof e[n]&&"constructor"!==n&&(t?t[n]=function(){}:e[n]=function(){})}))}function S(){try{var e=getCurrentPages();return(e[e.length-1]||{}).route||""}catch(e){return""}}function T(e){return function(e,t){if("string"==typeof e){if(e===t)return 1;for(var n=e.split("."),i=t.split("."),o=Math.max(n.length,i.length),r=0;r<o;r++){var s=~~n[r],a=~~i[r];if(s<a)return;if(a<s)return 1}}}(H.getSystemInfoSync().SDKVersion,"1.1.1")&&H.canIUse?H.canIUse(e):!!H[e]}function L(e){for(var t,n={unknown:/unknown|none/i,wifi:/wifi/i,net2g:/2g/i,net3g:/3g/i,net4g:/4g/i,net5g:/5g/i,net6g:/6g/i},i=g.unknown,o=0;o<Object.keys(n).length;o++){var r=Object.keys(n)[o];if(null!==(t=n[r])&&void 0!==t&&t.test(e)){i=g[r];break}}return i}function C(e){return k?k.addCallback(e):k=new X(e),k}(G=d=d||{}).INFO_ALL="-1",G.API_RESPONSE="1",G.INFO="2",G.ERROR="4",G.PROMISE_ERROR="8",G.AJAX_ERROR="16",G.SCRIPT_ERROR="32",G.IMAGE_ERROR="64",G.CSS_ERROR="128",G.CONSOLE_ERROR="256",G.MEDIA_ERROR="512",G.RET_ERROR="1024",G.REPORT="2048",G.PV="4096",G.EVENT="8192",(W=h=h||{})[W.android=1]="android",W[W.ios=2]="ios",W[W.windows=3]="windows",W[W.macos=4]="macos",W[W.linux=5]="linux",W[W.devtools=6]="devtools",W[W.other=100]="other",($=g=g||{})[$.unknown=100]="unknown",$[$.wifi=1]="wifi",$[$.net2g=2]="net2g",$[$.net3g=3]="net3g",$[$.net4g=4]="net4g",$[$.net5g=5]="net5g",$[$.net6g=6]="net6g",(ee=m=m||{}).LOG="log",ee.SPEED="speed",ee.PERFORMANCE="performance",ee.OFFLINE="offline",ee.WHITE_LIST="whiteList",ee.VITALS="vitals",ee.PV="pv",ee.CUSTOM_PV="customPV",ee.EVENT="event",ee.CUSTOM="custom",ee.SDK_ERROR="sdkError";var k,N,_,j,U=function(e){return e.filter((function(t,n){return"static"!==t.type||!e.find((function(e,i){return n!==i&&t.url===e.url&&200===t.status}))}))},A=function(e){e.level===d.INFO_ALL&&(e.level=d.INFO)},I=function(e){return function(t){return e.sendPipeline([function(t,n){return n({url:e.config.url||"",data:a(t),method:"post",contentType:"application/x-www-form-urlencoded",type:m.LOG,log:t,success:function(){var i=e.config.onReport;"function"==typeof i&&t.forEach((function(e){i(e)})),"function"==typeof n&&n([])},fail:function(t){"403 forbidden"===t&&e.destroy()}})}],m.LOG)(t)}},q=function(){},F=(Object.defineProperty(ae.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.34.69"},enumerable:!1,configurable:!0}),Object.defineProperty(ae.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),d},enumerable:!1,configurable:!0}),ae.prototype.init=function(e){this.setConfig(e);for(var t=0;t<ae.installedPlugins.length;t++)try{ae.installedPlugins[t].patch(this)}catch(e){this.sendSDKError(e)}this.lifeCycle.emit("onInited")},ae.prototype.setConfig=function(e){Object.assign(this.config,e);var t=(a=this.config).id,n=a.uin,i=a.version,o=a.ext1,r=a.ext2,s=a.ext3,a=(e=a.aid,this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==e);return this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=i||"1.34.69",this.bean.aid=e||"",o&&(this.bean.ext1=encodeURIComponent(o)),r&&(this.bean.ext2=encodeURIComponent(r)),s&&(this.bean.ext3=encodeURIComponent(s)),a&&this.lifeCycle.emit("onConfigChange",this.config),this.config},ae.use=function(e){-1===ae.installedPlugins.indexOf(e)&&e.aegisPlugin&&ae.installedPlugins.push(e)},ae.unuse=function(e){-1!==(e=ae.installedPlugins.indexOf(e))&&ae.installedPlugins.splice(e,1)},ae.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:d.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(n,i({},e[0]),{level:d.INFO}),this.normalLogPipeline(n)},ae.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:d.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(n,i({},e[0]),{level:d.INFO_ALL}),this.normalLogPipeline(n)},ae.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:d.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(n,i({},e[0])),this.normalLogPipeline(n)},ae.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:d.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(n,i({},e[0]),{level:d.ERROR}),this.normalLogPipeline(n)},ae.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},ae.prototype.reportPv=function(e){var t,n=this;e&&(console.warn("reportPv is deprecated, please use reportEvent"),t=""+Object.getOwnPropertyNames(this.bean).filter((function(e){return"id"!==e})).map((function(e){return e+"="+n.bean[e]})).join("&"),this.sendPipeline([function(i,o){o({url:n.config.url+"/"+e+"?"+t,addBean:!1,type:m.CUSTOM_PV,fail:function(e){"403 forbidden"===e&&n.destroy()}})}],m.CUSTOM_PV)(null))},ae.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},ae.prototype.reportTime=function(e,t){if("object"==n(e))return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},ae.prototype.reportT=function(e){var t=e.name,n=e.duration,i=void 0===(o=e.ext1)?"":o,o=void 0===(r=e.ext2)?"":r,r=void 0===(r=e.ext3)?"":r;if(e=e.from,"string"==typeof t&&"number"==typeof n&&"string"==typeof i&&"string"==typeof o&&"string"==typeof r){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,i,o,r,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},ae.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},ae.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},ae.prototype.submitCustomTime=function(e,t,n,i,o,r){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:i||this.config.ext2,ext3:o||this.config.ext3,from:r||void 0})},ae.prototype.extendBean=function(e,t){this.bean[e]=t},ae.prototype.sendPipeline=function(e,t){var n,i=this;return E(o([function(e,t){if("number"!=typeof n.config.random&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||t(e);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,t(e);n.isHidden=!0}},O(n=this,t)],e,[R(this),function(e,t){i.request(e,(function(){for(var n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t({isErr:!1,result:i,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null===(n=null==e?void 0:e.success)||void 0===n||n.call.apply(n,o([e],i))}),(function(){for(var n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];t({isErr:!0,result:i,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null===(n=null==e?void 0:e.fail)||void 0===n||n.call.apply(n,o([e],i))}))},P(this)]))},ae.prototype.send=function(e,t,n){var i=this;return E([R(this),function(e,o){i.request(e,(function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];o({isErr:!1,result:n,logType:e.type,logs:e.log}),null==t||t.apply(void 0,n)}),(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];o({isErr:!0,result:t,logType:e.type,logs:e.log}),null==n||n.apply(void 0,t)}))},P(this)])(e)},ae.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},ae.prototype.sendSDKError=function(e){var t=this;this.sendPipeline([function(e,n){n({url:t.config.url+"?id=1085&msg[0]="+encodeURIComponent(v(e))+"&level[0]=2&from="+t.config.id+"&count=1&version="+t.config.id+"(1.34.69)",addBean:!1,method:"get",type:m.SDK_ERROR,log:e})}],m.SDK_ERROR)(e)},ae.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,i=ae.instances.indexOf(this);-1!==i&&ae.instances.splice(i,1);for(var o=ae.installedPlugins.length-1;0<=o;o--)try{ae.installedPlugins[o].unpatch(this)}catch(e){this.sendSDKError(e)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach((function(e){n[e].writable&&(t[e]=null)})),Object.setPrototypeOf(this,null);else{for(var r=this;r.constructor!==Object&&x(r,this),r=Object.getPrototypeOf(r););0===ae.instances.length&&(x(e=Object.getPrototypeOf(this).constructor),x(ae))}},ae.version="1.34.69",ae.instances=[],ae.logType=d,ae.installedPlugins=[],ae),M=(se.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},se.prototype.unpatch=function(e){-1!==(e=this.instances.indexOf(e))&&this.instances.splice(e,1)},se.prototype.countInstance=function(){return this.instances.length},se.prototype.uninstall=function(){var e;null===(e=null===(e=this.option)||void 0===e?void 0:e.destroy)||void 0===e||e.apply(this)},se.prototype.walk=function(e){var t=this;this.instances.forEach((function(n){var i=t.canUse(n);i&&e(n,i)}))},se.prototype.canUse=function(e){return!(!(e=this.getConfig(e))||"object"!=n(e))||!!e},se.prototype.getConfig=function(e){return null===(e=e.config)||void 0===e?void 0:e[this.name]},se.prototype.exist=function(e){return-1===this.instances.indexOf(e)},se.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null===(t=null===(t=this.option)||void 0===t?void 0:t.init)||void 0===t||t.call(this.option,this.getConfig(e)))},se.prototype.triggerOnNewAegis=function(e){var t;null===(t=null===(t=this.option)||void 0===t?void 0:t.onNewAegis)||void 0===t||t.call(this.option,e,this.getConfig(e))},se),H=wx||qq,D=new M({name:"offlineLog",onNewAegis:function(e){if(H.getFileSystemManager)try{var t=e.config,n=t.id,i=void 0===n?"":n,o=t.uin,r=void 0===o?0:o,s=t.offlineUrl,a=void 0===s?"":s,u=t.offlineLogLimit,l=new V({limit:u});e.lifeCycle.on("beforeWrite",(function(t){l.save2Offline(t=void 0===t?[]:t,e.config)})),l.ready((function(t){var n=(e.bean||{}).aid,o=void 0===n?"":n;!t&&i&&(r||o)&&e.send({url:a+"/offlineAuto",type:m.OFFLINE,log:m.OFFLINE},(function(n){var s=(null==n?void 0:n.data).secretKey;s&&(t||l.getLogs({id:i,uin:r},(function(t,n){t?console.error(t):e.send({url:a+"/offlineLog",data:{logs:n,secretKey:s,id:i,uin:r,aid:o},method:"post",type:m.OFFLINE,log:n},(function(){l.clearLogs()}))})))}))}))}catch(e){console.error(e)}else console.warn("[aegis-mp-sdk]unsupport getFileSystemManager offline log not work!")}}),V=(re.prototype.getLogs=function(e,t){var n=this.fileSystem,i=this.filePath;n.readFile({filePath:i,encoding:"utf8",fail:function(e){console.error(e)},success:function(e){e=(void 0===(e=e.data)?"":e).toString().split("\n").filter((function(e){return e})).map((function(e){return JSON.parse(e)})),t(null,e)}})},re.prototype.checkLimit=function(e,t){void 0===t&&(t=function(){});var n=this.fileSystem,i=this.filePath,o=this.limitSize;n.readFile({filePath:i,encoding:"utf8",success:function(r){if((r=(r=void 0===(r=r.data)?"":r).toString()+e).length>o){for(var s=r.split("\n"),a="",u=s.length-1;0<=u&&!(s[u]&&(a=s[u]+"\n"+a).length>o);u--);n.writeFile({filePath:i,data:a,success:t})}else n.appendFile({data:e,filePath:i,encoding:"utf8",success:t,fail:function(e){console.error(e)}})}})},re),B=new M({name:"device",onNewAegis:function(e){return t=this,o=function(){return n=this,i=function(t){return this.setSystemInfo(e),this.refreshNetwork(e),this.setNetworkChange(e),[2]},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function t(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!((s=0<(s=a.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(n,a)}catch(t){e=[6,t],r=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}var n,i,o,r,s,a,u},new(i=(i=n=void 0)||Promise)((function(e,r){function s(e){try{u(o.next(e))}catch(e){r(e)}}function a(e){try{u(o.throw(e))}catch(e){r(e)}}function u(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i((function(e){e(n)}))).then(s,a)}u((o=o.apply(t,n||[])).next())}));var t,n,i,o},setSystemInfo:function(e){var t=this;try{T("getSystemInfo")&&H.getSystemInfo({success:function(n){var i=n.platform;n=n.model,e.extendBean("platform",t.getPlatFormType(i)),e.extendBean("model",n)}})}catch(e){}},getPlatFormType:function(e){for(var t,n={android:/android/i,ios:/ios/i,windows:/windows/i,macos:/mac/i,devtools:/devtools/i},i=h.other,o=0;o<Object.keys(n).length;o++){var r=Object.keys(n)[o];if(null!==(t=n[r])&&void 0!==t&&t.test(e)){i=h[r];break}}return i},setNetworkChange:function(e){T("onNetworkStatusChange")&&H.onNetworkStatusChange((function(t){t=L(t.networkType),e.extendBean("netType",t)}))},setNetworkType:function(e){T("getNetworkType")&&H.getNetworkType({success:function(t){t=L(t.networkType),e.extendBean("netType",t)}})},refreshNetwork:function(e){var t=this;this.timer&&clearTimeout(this.timer),this.setNetworkType(e),this.timer=setTimeout((function(){t.refreshNetwork(e)}),1e4)}}),J=H.request,G=(t(oe,j=F),Object.defineProperty(oe.prototype,"getBean",{get:function(){var e=this;return this.bean?Object.getOwnPropertyNames(this.bean).map((function(t){return t+"="+e.bean[t]})).join("&")+"&from="+encodeURIComponent(S()):"from="+encodeURIComponent(S())},enumerable:!1,configurable:!0}),oe.prototype.initOfflineLog=function(){oe.use(D)},oe.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=void 0===e?{}:e,t=void 0===t?{}:t)},oe.prototype.reportPv=function(e){var t,n=this;e&&(t=Object.getOwnPropertyNames(this.bean).filter((function(e){return"id"!==e})).map((function(e){return e+"="+n.bean[e]})).join("&")+"&from="+encodeURIComponent(S()),this.send({url:this.config.url+"/"+e+"?"+t,addBean:!1,type:m.CUSTOM_PV,log:m.CUSTOM_PV},(function(){}),(function(){})))},oe.sessionID="session-"+Date.now(),oe.asyncPluginIndex=0,oe),W=new M({name:"aid",onNewAegis:function(e){this.initAid((function(t){e.bean.aid=t,e.config.aid=t}))},initAid:function(e){H.getStorage({key:"AEGIS_ID",success:function(t){e(t.data)},fail:function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));H.setStorage({key:"AEGIS_ID",data:t,success:function(){e(t)}})}})}}),$=(ie.prototype.addCallback=function(e){e&&this.callbacks.push(e)},ie.prototype.prefixHandler=function(e){e.aegisRequestStartTime=Date.now()},ie.prototype.successHandler=function(e,t){var n;this.callbacks.forEach((function(n){var i;try{null===(i=n.success)||void 0===i||i.call(n,e,t)}catch(n){}})),null===(n=t.success)||void 0===n||n.call(t,e,t)},ie.prototype.failHandler=function(e,t){var n;this.callbacks.forEach((function(n){var i;try{null===(i=n.fail)||void 0===i||i.call(n,e,t)}catch(n){}})),null===(n=t.fail)||void 0===n||n.call(t,e,t)},ie.prototype.completeHandler=function(e,t){var n;this.callbacks.forEach((function(n){var i;try{null===(i=n.complete)||void 0===i||i.call(n,e,t)}catch(n){}})),null===(n=t.complete)||void 0===n||n.call(t,e,t)},ie.prototype.override=function(){try{this.defineApiProperty()}catch(e){console.warn("cannot override `"+this.apiName+"`, error is: "+e)}finally{this.isOverride=!0}},ie),K=wx||qq,Q=K.request,X=(t(ne,_=$),ne.prototype.defineApiProperty=function(){var e=this;Object.defineProperty(K,"request",{get:function(){return e.hackHandler.bind(e)}})},ne.prototype.hackHandler=function(e){var t=this;return this.prefixHandler(e),new Promise((function(n,o){Q(i(i({},e),{success:function(i){t.successHandler(i,e),n(i)},fail:function(n){t.failHandler(n,e),o(n)},complete:function(n){t.completeHandler(n,e)}}))}))},ne),z=wx||qq,Y=null===(ee=z.cloud)||void 0===ee?void 0:ee.callFunction,Z=(t(te,N=$),te.prototype.defineApiProperty=function(){var e=this;z.cloud&&z.cloud.callFunction&&Object.defineProperty(z.cloud,"callFunction",{get:function(){return e.hackHandler.bind(e)}})},te.prototype.hackHandler=function(e){var t=this;return this.prefixHandler(e),new Promise((function(n,o){Y(i(i({},e),{success:function(i){t.successHandler(i,e),n(i)},fail:function(n){t.failHandler(n,e),o(n)},complete:function(n){t.completeHandler(n,e)}}))}))},te),ee=(F=new M({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.hackRequest(e.config),this.overrideCallFunction(e.config))},hackRequest:function(e){var t=this;C({success:function(n,i){var o={method:i.method||"get",url:l(i.url),duration:Date.now()-i.aegisRequestStartTime,status:n.statusCode||0,isHttps:c(i.url),type:"fetch"},r=null===(r=e.api)||void 0===r?void 0:r.apiDetail;r="req url: "+o.url+" \n                        \nreq method: "+o.method+" \n                        \nreq param: "+(r?v(i.data):"")+" \n                        \nres duration: "+o.duration+" \n                        \nres status: "+(n.statusCode||0)+" \n                        \nres data: "+(r?p(n.data):""),t.publishNormalLog({msg:r,level:d.API_RESPONSE}),t.publishSpeedLog(o),n=(i=f(n.data,e.api,{url:i.url,ctx:n})||{}).code,i=i.isErr,o.ret=n,i&&t.publishNormalLog({msg:r,level:d.RET_ERROR})},fail:function(e,n){n={method:n.method||"get",url:l(n.url),duration:Date.now()-n.aegisRequestStartTime,status:0,isHttps:c(n.url),type:"fetch"},t.publishSpeedLog(n)}})},overrideCallFunction:function(e){var t=this;new Z({success:function(n,i){var o,r,s={method:"call",url:"wx.cloud.callFunction."+i.name,duration:Date.now()-i.aegisRequestStartTime,status:200,type:"fetch",errMsg:n.errMsg,isHttps:!0},a=null===(u=e.api)||void 0===u?void 0:u.apiDetail,u="req url: "+s.url+"\n                        \nreq type: "+s.type+"\n                        \nres duration: "+s.duration+"\n                        \nres errMsg: "+s.errMsg+"\n                        \nres data: "+(a?p(n.result):"")+"\n                        ";t.publishNormalLog({msg:u,level:d.API_RESPONSE}),t.publishSpeedLog(s),r="function"==typeof(null===(a=e.api)||void 0===a?void 0:a.retCodeCloudFunctionHandler)?(o=(i=e.api.retCodeCloudFunctionHandler(n.result,i.name,i,n)||{}).code,void 0!==(i=i.isErr)&&i):(o=(r=f(n.result,e.api,{url:s.url,ctx:n})||{}).code,r.isErr),s.ret=o,r&&t.publishNormalLog({msg:u,level:d.RET_ERROR})},fail:function(e,n){e={method:"call",url:"wx.cloud.callFunction."+n.name,duration:Date.now()-n.aegisRequestStartTime,status:0,type:"fetch",errMsg:e.errMsg,isHttps:!0},t.publishSpeedLog(e)}})},publishSpeedLog:function(e){this.$walk((function(t){t.speedLogPipeline(e)}))},publishNormalLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))}}),new M({name:"onError",onNewAegis:function(e){e=e.config,this.listenError(),this.hackRequest(e)},listenError:function(){var e=this;H.onError((function(t){t&&e.publishErrorLog({msg:t,level:d.ERROR})})),T("onUnhandledRejection")&&H.onUnhandledRejection((function(t){(t=t.reason)&&e.publishErrorLog({msg:t,level:d.PROMISE_ERROR})}))},publishErrorLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))},hackRequest:function(e){var t=this;C({complete:function(n,i){var o,r=n.errMsg,s=n.statusCode,a=n.data;n=null===(n=e.api)||void 0===n?void 0:n.apiDetail,e.hostUrl&&-1<(null===(o=i.url)||void 0===o?void 0:o.indexOf(e.hostUrl))||(o="",-1<r.indexOf("timeout")?o="timeout":-1<r.indexOf("fail")||!s||s<0?o="failed":400<=s&&(o="error"),o&&t.publishErrorLog({msg:"AJAX_ERROR: request "+o+"\n                  \nres status: "+(s||0)+"\n                  \nres duration: "+(Date.now()-i.aegisRequestStartTime)+"\n                  \nres data: "+(n?v(a):"")+"\n                  \nreq url: "+i.url+"\n                  \nreq method: "+(i.method||"get")+"\n                  \nreq param: "+(n?v(i.data):"")+"\n                  \nerrMsg: "+r.slice(0,1e3),level:d.AJAX_ERROR}))}})}}));function te(){return null!==N&&N.apply(this,arguments)||this}function ne(){return null!==_&&_.apply(this,arguments)||this}function ie(e){this.callbacks=[],this.isOverride=!1,this.isOverride||this.override(),this.callbacks.push(e)}function oe(e){var t,o,r,s=j.call(this,e)||this;s.originRequest=J,s.speedLogPipeline=E([(o=s.config,r={},function(e,t){var i,s;o.speedSample?(s="object"==n(o.repeat)?o.repeat:{repeat:o.repeat},i=+s.speed||+s.repeat||5,Array.isArray(e)?(s=e.filter((function(e){var t=!r[e.url]||r[e.url]<i;return r[e.url]=1+~~r[e.url],t}))).length&&t(s):(!r[e.url]||r[e.url]<i)&&(r[e.url]=1+~~r[e.url],t(e))):t(e)}),b(s),function(e,n){T("getNetworkType")?H.getNetworkType({success:function(i){i=L(i.networkType),t.extendBean("netType",i),n(e)}}):n(e)},function(e,t){s.lifeCycle.emit("beforeReportSpeed",e);var n=s.config.beforeReportSpeed;if((e="function"==typeof n?e.filter((function(e){return!1!==n(e)})):e).length)return t(e)},O(t=s,m.SPEED),function(e){var t,n,o,r;s.send({url:""+s.config.speedUrl,method:"post",data:(t=e,n=s.bean,o={fetch:[],static:[]},r={},Array.isArray(t)?t.forEach((function(e){var t;null===(t=o[e.type])||void 0===t||t.push(e)})):null===(e=o[t.type])||void 0===e||e.push(t),r.payload=JSON.stringify(i({duration:o},n)),r)})}]),s.requestQueue=[],s.requesting=!1,s.request=function(e,t,i){if(e.url&&s.bean.id)if(/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/.test(String(s.bean.aid))){if(!(s.requesting||T("getNetworkType")&&void 0===s.bean.netType)){s.requesting=!0;var o,r=e.url;s.config.whiteListUrl===r&&(o=t,t=function(e){null==o||o(JSON.stringify(e.data))}),!1!==e.addBean&&(r=r+(-1===r.indexOf("?")?"?":"&")+s.getBean);var a=e.method||"get",u=function(){s.requesting=!1;var e=s.requestQueue.shift();e&&s.request(e.options,e.success,e.fail)},l=e,c=s.config.onBeforeRequest;if(!(l=c?c(e,s):l)||!l.url){var f="";return l||(f="Sending request blocked",console.log(f)),l.url||(f="Please handle the parameters reasonably, options.url is necessary",console.warn(f)),null==i||i(f),u(),!1}return f=s.config.enableHttp2||!1,"get"===a?(r=function(e,t){if("string"!=typeof e)return"";if("object"==n(t)&&t){var i=Object.getOwnPropertyNames(t).map((function(e){var n=t[e];return e+"="+("string"==typeof n?encodeURIComponent(n):encodeURIComponent(JSON.stringify(n)))})).join("&").replace(/eval/gi,"evaI");return e+(-1===e.indexOf("?")?"?":"&")+i}return e}(r,l.data),s.originRequest({url:r,enableHttp2:f,success:t,fail:i,complete:u})):("string"==typeof l.data&&(l.data=l.data.replace(/eval/gi,"evaI")),s.originRequest({url:r,enableHttp2:f,header:l.contentType?{"content-type":l.contentType}:void 0,method:"POST",data:l.data,success:t,fail:i,complete:u})),!0}s.requestQueue.push({options:e,success:t,fail:i})}else s.requestQueue.push({options:e,success:t,fail:i})};try{e.offlineLog&&s.initOfflineLog(),s.init(e),s.extendBean("sessionId",oe.sessionID),s.extendBean("referer",(T("getLaunchOptionsSync")?H.getLaunchOptionsSync():{scene:""}).scene||"")}catch(e){console.warn(e),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),s.sendSDKError(e)}return s}function re(e){var t,n,i=this,o=(e=void 0===(e=(o=void 0===e?{}:e).path)?"/.aegis.offline.log":e,void 0===(o=o.limit)?2e4:o);this.offlineBuffer=[],this.insertLog=(t=null,n=[],function(e){n=n.concat(e),t=t||setTimeout((function(){t=null;var e,o=i.fileSystem,r=i.filePath,s=n.map((function(e){return JSON.stringify(e)})).join("\n")+"\n";s&&(e=function(e){e?i.checkLimit(s,(function(){n=[]})):o.writeFile({data:s,filePath:r,encoding:"utf8",fail:function(e){console.error(e)},success:function(){n=[]}})},o.access({path:r,success:function(){e(!0)},fail:function(){e()}}))}),2e3)}),this.ready=function(e){i.fileSystem?setTimeout((function(){e(null)}),0):(e(new Error("getFileSystemManager file")),i.offlineLog=!1)},this.clearLogs=function(){var e=i.fileSystem,t=i.filePath;e.writeFile({filePath:t,data:"",fail:function(){e.unlinkSync(t)}})},this.save2Offline=function(e,t){e=(e=Array.isArray(e)?e:[e]).map((function(e){return"string"==typeof e&&(e={msg:e}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e[0]),i=1;i<e.length;i++){var o=e[i];if(null!==o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n}({id:t.id,uin:t.uin,time:+Date.now(),version:t.version,from:S()},e)})),i.fileSystem?i.insertLog(e):(i.fileSystem||i.offlineBuffer.length||i.ready((function(e){e?console.error(e):i.offlineBuffer.length&&(i.addLogs(i.offlineBuffer),i.offlineBuffer=[])})),i.offlineBuffer=i.offlineBuffer.concat(e))},this.addLogs=function(e){i.fileSystem&&i.insertLog(e)},this.filePath=H.env.USER_DATA_PATH+e,this.fileSystem=H.getFileSystemManager(),this.limitSize=o}function se(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function ae(e){var t,n,i,o,r,a,u,l,c,f,p,h,g=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,hostUrl:"https://aegis.qq.com",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:""},this.isWhiteList=!1,this.lifeCycle=new s,this.bean={},this.normalLogPipeline=E([b(this,5),w,(p=this.config,h={},function(e,t){var n="number"==typeof p.repeat?p.repeat:5;if(0===n)return t(e);t(e.filter((function(e){return e.level!==d.ERROR&&e.level!==d.PROMISE_ERROR&&e.level!==d.AJAX_ERROR&&e.level!==d.SCRIPT_ERROR&&e.level!==d.IMAGE_ERROR&&e.level!==d.CSS_ERROR&&e.level!==d.MEDIA_ERROR||(h[e.msg]=h[e.msg]||0,h[e.msg]+=1,!(h[e.msg]>n))})))}),(c=this.lifeCycle.emit,f=this.config,function(e,t){var n=f.logCreated;return"function"!=typeof n?(c("beforeWrite",e),t(e)):(e=e.filter((function(e){return!1!==n(e)})),c("beforeWrite",e),t(e))}),(t=this,setTimeout((function(){var e=t.config.pvUrl,n=void 0===e?"":e;n&&t.sendPipeline([function(e,i){i({url:n,type:m.PV,fail:function(e){"403 forbidden"===e&&t.destroy()}})}],m.PV)(null)}),100),function(e,t){t(e)}),(u=a=r=!1,l=[],(i=this).lifeCycle.on("onConfigChange",(function(){o&&clearTimeout(o),o=setTimeout((function(){var e,t;!u&&i.config&&(u=!0,e=i.config.whiteListUrl,(t=void 0===e?"":e)&&i.sendPipeline([function(e,n){n({url:t,type:m.WHITE_LIST,success:function(e){a=!0;try{var t=e.data||JSON.parse(e),n=t.retcode,o=t.result,s=void 0===o?{}:o;if(0===n){if(r=s.is_in_white_list,i.isWhiteList=r,s.shutdown)return void i.destroy();0<=s.rate&&s.rate<=1&&(i.config.random=s.rate,i.isGetSample=!1)}i.isWhiteList&&l.length?I(i)(l.splice(0),(function(){})):!i.isWhiteList&&l.length&&(l.length=0);var u=i.config.onWhitelist;"function"==typeof u&&u(r)}catch(e){}},fail:function(e){"403 forbidden"===e&&i.destroy(),a=!0}})}],m.WHITE_LIST)(null),u=!1)}),i.config.uin?50:500)})),i.lifeCycle.on("destroy",(function(){l.length=0})),function(e,t){r?t(e.concat(l.splice(0)).map((function(e){return A(e),e}))):(e=e.filter((function(e){return e.level!==d.INFO&&e.level!==d.API_RESPONSE?(A(e),!0):(a||(l.push(e),200<=l.length&&(l.length=200)),!1)}))).length&&t(e)}),function(e,t){var n=JSON.parse(JSON.stringify(e));g.lifeCycle.emit("beforeReport",n);var i=g.config.beforeReport;(e="function"==typeof i?e.filter((function(e){return!1!==i(e)})):e).length&&t(e)},I(this)]),this.eventPipeline=E([b(this,5),function(e){g.sendPipeline([function(e,t){var n=e.map((function(e){return{name:e.name,ext1:e.ext1||g.config.ext1||"",ext2:e.ext2||g.config.ext2||"",ext3:e.ext3||g.config.ext3||""}}));t({url:g.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:m.EVENT,log:e,fail:function(e){"403 forbidden"===e&&g.destroy()}})}],m.EVENT)(e)}]),this.timeMap={},this.customTimePipeline=E([b(this,5),function(e){return g.sendPipeline([function(e,t){t({url:g.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:m.CUSTOM,log:e,fail:function(e){"403 forbidden"===e&&g.destroy()}})}],m.CUSTOM)(e)}]),this.config=(n=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),n.url=n.url||e+"/collect",n.offlineUrl=n.offlineUrl||e+"/offline",n.whiteListUrl=n.whiteListUrl||e+"/collect/whitelist",n.pvUrl=n.pvUrl||e+"/collect/pv",n.eventUrl=n.eventUrl||e+"/collect/events",n.speedUrl=n.speedUrl||e+"/speed",n.customTimeUrl=n.customTimeUrl||e+"/speed/custom",n.performanceUrl=n.performanceUrl||e+"/speed/performance",n.webVitalsUrl=n.webVitalsUrl||e+"/speed/webvitals",n),ae.instances.push(this)}return $=new M({name:"reportAssetSpeed",isStart:!1,onNewAegis:function(e){this.isStart||(this.isStart=!0,this.start(e))},start:function(){var e=this;H.getPerformance&&H.getPerformance().createObserver((function(t){t.getEntries().forEach((function(t){!t.duration||t.duration<=0||"script"===t.entryType&&e.publishAssetLog(t)}))})).observe({entryTypes:["script"]})},generateLog:function(e){return{url:l(e.path||e.moduleName)+"js",method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:"static",isHttps:!0,urlQuery:"",domainLookup:0,connectTime:0}},publishAssetLog:function(e){var t=this;this.$walk((function(n){n.speedLogPipeline(t.generateLog(e))}))}}),M=new M({name:"pagePerformance",onNewAegis:function(e){try{T("getPerformance")&&this.reportPerformance(e),this.setPagePV(e),this.reportSetDataTiming(e)}catch(e){}},reportPerformance:function(e){var t,n=this;null==(t=null==(t=H.getPerformance())?void 0:t.createObserver((function(t){var i={},o=(s=t.getEntries()).find((function(e){return"appLaunch"===e.name&&0<e.duration})),r=s.find((function(e){return"firstRender"===e.name&&0<e.duration})),s=(t=s.find((function(e){return"evaluateScript"===e.name&&0<e.duration})),s.find((function(e){return"route"===e.name&&0<e.duration})));o&&(i.appLaunch=o.duration),r&&(i.firstScreenTiming=r.duration),t&&(i.scriptEvaluateTiming=t.duration),s&&(i.pageRouteTiming=s.duration),n.publish(i,e)})))||t.observe({entryTypes:["navigation","render","script"]})},publish:function(e,t){var n,i,o=[],r=this.$getConfig(t),s=-1===(null===(n=t.config.performanceUrl)||void 0===n?void 0:n.indexOf("?"))?"?":"&";for(i in e)o.push(i+"="+e[i]);"function"==typeof r.urlHandler?this.$walk((function(n){n.send({url:t.config.performanceUrl+s+o.join("&")+"&from="+(encodeURIComponent(r.urlHandler())||window.location.href),beanFilter:["from"],type:m.PERFORMANCE,log:e})})):this.$walk((function(n){n.send({url:t.config.performanceUrl+s+o.join("&"),type:m.PERFORMANCE,log:e})}))},setPagePV:function(e){var t=this;H.onAppRoute&&H.onAppRoute((function(e){"appLaunch"!==e.openType&&t.$walk((function(e){e.send({url:""+e.config.pvUrl,type:m.PV})}))}))},reportSetDataTiming:function(e){var t=E([b(e,5),function(t){t=t.map((function(e){return{component:e.from,duration:e.duration,fields:e.dataPaths.sort().join(";")}})),e.send({url:e.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({miniProgramData:t})),type:m.CUSTOM,log:t})}]),n=Page,i=Component,o=e.config.updatePerformanceReportThreshold;(!o||isNaN(+o)||o<5)&&(o=5),Page=function(e){var i=e.onReady;return e.onReady=function(){var e=this;return"function"==typeof this.setUpdatePerformanceListener&&this.setUpdatePerformanceListener({withDataPaths:!0},(function(n){var i=n.updateStartTimestamp,r=n.updateEndTimestamp;n=void 0===(n=n.dataPaths)?[]:n,i=r-i,isNaN(i)||i<o||(n={duration:i,from:e.is,dataPaths:n},t(n))})),null==i?void 0:i.call(this)},n(e)},Component=function(e){var n=e.attached;return e.attached=function(){var e=this;return"function"==typeof this.setUpdatePerformanceListener&&this.setUpdatePerformanceListener({withDataPaths:!0},(function(n){var i=n.updateStartTimestamp,r=n.updateEndTimestamp;n=n.dataPaths,i=r-i,isNaN(i)||i<o||(n={duration:i,from:e.is,dataPaths:n},t(n))})),null==n?void 0:n.call(this)},i(e)}}}),G.use(ee),G.use(F),G.use(W),G.use($),G.use(M),G.use(B),G}))}),(function(e){return t({}[e],e)})),t(1637058944944));