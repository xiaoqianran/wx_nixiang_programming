var e,t=require("../../@babel/runtime/helpers/interopRequireDefault"),r=t(require("../../@babel/runtime/regenerator")),n=require("../../@babel/runtime/helpers/asyncToGenerator"),a=require("../../config/appConfig"),i=t(require("../../utils/systemInfo")),s=require("../../models/RequestAPI");require("../../libs/runtime");Component({properties:{routeType:{type:String,observer:function(e){this.setData({currentType:e})}},startPoint:{type:Object},endPoint:{type:Object}},data:{CDN_PATH:a.CDN_PATH,routeTypes:[{type:"driving",text:"驾车",normalImg:"icon-route_ic_car",activeImg:"icon-route_ic_car"},{type:"transit",text:"公交",normalImg:"icon-route_ic_bus",activeImg:"icon-route_ic_bus"},{type:"walking",text:"步行",normalImg:"icon-route_ic_walk",activeImg:"icon-route_ic_walk"}],currentType:{type:String,value:""}},lifetimes:{ready:function(){var e=i.default.globalData.themeColor;this.setData({themeColor:e})}},pageLifetimes:{show:(e=n(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=getCurrentPages(),(n=t[t.length-1]).data.selectedPosition){e.next=4;break}return e.abrupt("return");case 4:return"start"===this.searchType&&this.triggerEvent("startendchange",{startPoint:n.data.selectedPosition,endPoint:this.properties.endPoint},{}),"end"===this.searchType&&this.triggerEvent("startendchange",{startPoint:this.properties.startPoint,endPoint:n.data.selectedPosition},{}),n&&n.setData({selectedPosition:null}),e.prev=7,e.next=10,s.requestAPI.sendPv({referer:i.default.globalData.referer});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(){return e.apply(this,arguments)})},methods:{onExchangeRoute:function(){this.triggerEvent("exchange")},onChangeType:function(e){var t=e.currentTarget.dataset.type;t!==this.data.currentType&&(this.setData({currentType:t}),this.triggerEvent("changeRouteType",{type:t}))},onClickStart:function(){this.searchType="start",wx.navigateTo({url:"../../pages/search/search?searchType=start&startPoint=".concat(JSON.stringify(this.data.startPoint),"&endPoint=").concat(JSON.stringify(this.data.endPoint))})},onClickEnd:function(){this.searchType="end",wx.navigateTo({url:"../../pages/search/search?searchType=end&startPoint=".concat(JSON.stringify(this.data.startPoint),"&endPoint=").concat(JSON.stringify(this.data.endPoint))})}}});