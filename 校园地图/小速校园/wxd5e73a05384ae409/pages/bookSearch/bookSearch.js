var e=require("../../common/vendor.js"),t=require("../../config/config.js"),o=require("../../config/tips.js"),n={data:function(){return{allPage:[1,2,3],nowPage:1,allTag:["关键词","题名","作者","主题词","ISBN","分类号","索书号","出版社","丛书","摘要"],allTagEng:["all","titles","authors","subjects","isbns","classnoes","callno","publisher","series","abstract"],nowTag:"关键词",nowTagEng:"all",searchContent:"",bookData:[],showEmpty:!0,kevyType:"search",kevyText:"请先搜索噢~"}},onLoad:function(){},onShow:function(){},methods:{choosePage:function(e){this.nowPage=this.allPage[e.target.value],this.getBooksInfo()},chooseTag:function(e){this.nowTag=this.allTag[e.target.value],this.nowTagEng=this.allTagEng[e.target.value],this.getBooksInfo()},getSearchContent:function(e){this.searchContent=e.target.value},getBooksInfo:function(){var n=this;""==this.searchContent?e.index.showToast({title:"搜索内容不能为空！",icon:"error"}):(e.index.showLoading({title:"查询中...",mask:!0}),this.kevyType="loading",this.kevyText=o.tips.loading,this.showEmpty=!0,e.index.request({url:t.config.searchBooks,method:"GET",data:{tag:this.nowTagEng,value:this.searchContent},header:{token:getApp().globalData.token},success:function(t){if(e.index.hideLoading(),"0"==t.data.code)return n.bookData=t.data.data,void(n.showEmpty=!1);"C0302"==t.data.code?(n.kevyType="data",n.kevyText="无该书籍信息",n.showEmpty=!0):(e.index.hideLoading(),e.index.showToast({title:t.data.message,icon:"error"}),n.kevyType="error",n.kevyText=o.tips.error,n.showEmpty=!0),n.bookData=[]},fail:function(t){e.index.showToast({title:"请检查网络连接",icon:"error"}),n.kevyType="network",n.kevyText=o.tips.network,n.showEmpty=!0,n.bookData=[]}}))},copy:function(t){e.index.setClipboardData({data:t,success:function(t){e.index.showToast({title:"复制成功",icon:"success"})},fail:function(t){e.index.showToast({title:"复制失败",icon:"error"})}})}}};Array||(e.resolveComponent("uni-card")+e.resolveComponent("uni-icons")+e.resolveComponent("uni-tag")+e.resolveComponent("uni-collapse-item")+e.resolveComponent("uni-collapse")+e.resolveComponent("kevy-empty"))(),Math||(function(){return"../../uni_modules/uni-card/components/uni-card/uni-card.js"}+function(){return"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js"}+function(){return"../../uni_modules/uni-tag/components/uni-tag/uni-tag.js"}+function(){return"../../uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item.js"}+function(){return"../../uni_modules/uni-collapse/components/uni-collapse/uni-collapse.js"}+function(){return"../../uni_modules/kevy-empty/components/kevy-empty/kevy-empty.js"})();var a=e._export_sfc(n,[["render",function(t,o,n,a,i,s){return{a:e.p({"is-full":!0,shadow:"0 0 0 0",border:!1}),b:e.t(t.nowTag),c:e.p({type:"down",size:"20rpx"}),d:e.o((function(){return t.chooseTag&&t.chooseTag.apply(t,arguments)})),e:t.allTag,f:t.allTag,g:e.o((function(){return t.getSearchContent&&t.getSearchContent.apply(t,arguments)})),h:e.o(t.getBooksInfo),i:e.p({type:"search",size:"50rpx"}),j:e.f(t.bookData,(function(o,n,a){return e.e({a:o.imgUrl?o.imgUrl:"",b:e.t(o.title),c:0!=o.holdings.length},0!=o.holdings.length?{d:e.t(o.holdings[0].callNo)}:{},{e:e.t(o.author),f:e.t(o.publisher),g:e.t(o.pubYear),h:e.t(o.isbn),i:e.f(o.holdings,(function(t,o,n){return{a:"700da4e3-5-"+a+"-"+n+",700da4e3-4-"+a+"-"+n,b:e.t(t.location),c:e.t(t.barCode),d:e.t(t.callNo),e:e.t(t.status),f:o,g:"700da4e3-4-"+a+"-"+n+",700da4e3-3-"+a,h:e.p({title:t.location})}})),j:"700da4e3-3-"+a,k:e.f(o.eholdings,(function(o,n,i){return{a:"700da4e3-6-"+a+"-"+i,b:"700da4e3-7-"+a+"-"+i,c:e.t(o.storage),d:o.storage,e:n,f:e.o((function(e){return t.copy(o.url)}),n)}})),l:n})})),k:e.p({text:"纸质书",type:"success",inverted:!0}),l:e.p({text:"电子书",type:"primary",inverted:!0}),m:e.p({type:"primary",text:"复制链接"}),n:e.p({type:t.kevyType,text:t.kevyText,show:t.showEmpty})}}]]);wx.createPage(a);