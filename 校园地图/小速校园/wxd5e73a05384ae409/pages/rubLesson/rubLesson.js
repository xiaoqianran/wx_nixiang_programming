var e=require("../../common/vendor.js"),t=require("../../config/config.js"),n=require("../../config/tips.js"),o={data:function(){return{allWeek:t.config.allWeek,allCampus:t.config.allCampus,allCheckWay:["老师","课程"],nowWeek:getApp().globalData.nowWeek,nowWeekValue:getApp().globalData.nowWeek-1,nowCampus:getApp().globalData.xq.name,nowCampusValue:getApp().globalData.xq.value,nowCheckWay:"课程",nowCheckWayValue:1,detail:[],lessonName:"",allLessonData:[],thisCampusHasNoLesson:!1,hasNoLesson:!1,showEmpty:!0,kevyType:"search",kevyText:n.tips.search,content:"",current:1,size:20,status:"more",contentText:t.config.contentText}},onLoad:function(){},onShow:function(){},onReachBottom:function(){this.loadMore()},methods:{chooseCampus:function(e){this.nowCampus=this.allCampus[e.target.value],this.nowCampusValue=parseInt(e.target.value),this.getLessonInfo(!0)},chooseWeek:function(e){this.nowWeek=this.allWeek[e.target.value],this.nowWeekValue=parseInt(e.target.value),this.getLessonInfo(!0)},chooseCheckWay:function(e){this.nowCheckWay=this.allCheckWay[e.target.value],this.nowCheckWayValue=parseInt(e.target.value),this.getLessonInfo(!0)},userCampus:function(e){return this.nowCampus===e&&(this.hasNoLesson=!1,!0)},onKeyInput:function(e){this.content=e.target.value},getLessonInfo:function(){var o=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.status="loading",""!=this.content?(e.index.showLoading({title:"查询中...",mask:!0}),this.lessonName="",this.teacherName="","课程"==this.nowCheckWay?this.lessonName=this.content:this.teacherName=this.content,e.index.request({url:t.config.getRubLessonByQueryUrl,method:"GET",data:{lessonName:this.lessonName,teacherName:this.teacherName,week:this.nowWeekValue+1,current:this.current,size:this.size},header:{token:getApp().globalData.token},success:function(t){if("0"==t.data.code){if(t.data.data.total<=0)return 1==o.current?(o.showEmpty=!0,o.kevyType="data",o.kevyText=n.tips.data,o.status="noMore"):o.status="noMore",void e.index.hideLoading();1==o.current?o.detail=t.data.data.content:o.detail=o.detail.concat(t.data.data.content),o.showEmpty=!1,o.status="more",e.index.hideLoading()}else e.index.hideLoading(),e.index.showToast({title:t.data.message,icon:"error"}),o.showEmpty=!0,o.kevyType="error",o.kevyText=n.tips.error},fail:function(t){e.index.hideLoading(),e.index.showToast({title:"获取失败",icon:"error"}),o.showEmpty=!0,o.kevyType="network",o.kevyText=n.tips.network}})):a||e.index.showToast({title:"请输入搜索内容",icon:"none"})},loadMore:function(){"noMore"!=this.status&&(this.current++,this.getLessonInfo(!1))},getPeriod:function(e){return 2*e-1+"-"+2*e},getWeekDay:function(e){switch(e){case 1:return"周一";case 2:return"周二";case 3:return"周三";case 4:return"周四";case 5:return"周五";case 6:return"周六";case 0:return"周日"}}}};Array||(e.resolveComponent("uni-icons")+e.resolveComponent("uni-load-more")+e.resolveComponent("kevy-empty")+e.resolveComponent("uni-card"))(),Math||(function(){return"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js"}+function(){return"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js"}+function(){return"../../uni_modules/kevy-empty/components/kevy-empty/kevy-empty.js"}+function(){return"../../uni_modules/uni-card/components/uni-card/uni-card.js"})();var a=e._export_sfc(o,[["render",function(t,n,o,a,s,i){return e.e({a:e.t(t.nowWeek),b:e.p({type:"down",size:"20rpx"}),c:e.o((function(){return t.chooseWeek&&t.chooseWeek.apply(t,arguments)})),d:t.allWeek,e:t.nowWeekValue,f:e.t(t.nowCheckWay),g:e.p({type:"down",size:"20rpx"}),h:e.o((function(){return t.chooseCheckWay&&t.chooseCheckWay.apply(t,arguments)})),i:t.allCheckWay,j:t.nowCheckWayValue,k:e.o((function(){return t.onKeyInput&&t.onKeyInput.apply(t,arguments)})),l:e.o(t.getLessonInfo),m:e.p({type:"search",size:"50rpx"}),n:e.f(t.detail,(function(n,o,a){return{a:e.t(n.lessonName),b:e.t(n.building),c:e.t(n.room),d:e.t(n.teacherName),e:e.t(t.getWeekDay(n.day)),f:e.t(t.getPeriod(n.period)),g:o}})),o:e.o(t.loadMore),p:e.p({status:t.status,"content-text":t.contentText,type:"line"}),q:!t.showEmpty,r:t.showEmpty},t.showEmpty?{s:e.p({type:t.kevyType,text:t.kevyText,show:t.showEmpty})}:{},{t:e.p({"is-full":!0,shadow:"0 0 0 0",border:!1})})}]]);wx.createPage(a);