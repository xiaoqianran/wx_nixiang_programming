Object.defineProperty(exports,"__esModule",{value:!0});var THREE=require("three.xcx.min"),version="2.1.0",REVISION=version.split(".")[1],VERSION=version,CONTROLS={ORBIT:0,DEVICEORIENTATION:1},MODES={UNKNOWN:0,NORMAL:1,CARDBOARD:2,STEREO:3};function init(a,b){a._Node.OffscreenCanvas=wx.createOffscreenCanvas();a.currentorientation=0;a.FPS=30;a.FPSTimeRange=1E3/a.FPS;a.SetFPS=function(b){return a.FPS=Math.min(Math.max(b,12),60),a.FPSTimeRange=1E3/a.FPS,a.FPS};a._Lib.px2xyz=function(a,b,f){var c=Math.PI*(.5-2*a),d=Math.PI*(.5-b),k=f*Math.sin(d);f*=Math.cos(d);return{x:f*Math.sin(c),y:0>k?k+.001:k-.001,z:f*Math.cos(c),temp:f,lg:c,lt:d,longitude:a,latitude:b}};a._Lib.xyz2px=function(a,b,f){var c=a/f,d=.5-Math.asin(b/10)/Math.PI;return{_x:a,
_y:b,_z:f,x:parseFloat((.25-(0>f?Math.atan(c)-Math.PI:Math.atan(c))/(2*Math.PI)).toFixed(3))||0,y:parseFloat(d.toFixed(3))||0}};a._Lib.requestAnimationFrame=a._Node.WebGLCanvas.requestAnimationFrame;a._Lib.cancelAnimationFrame=a._Node.WebGLCanvas.cancelAnimationFrame;a.data.currentInfospots=[];a.data.cameraInfospots=[];a.data.currentPanoInfo=[];a.data.controlPoint={};a.data.currentPanorama={};a.data.prePanorama={};b();return a}var DataImage={Info:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADBklEQVR42u2bP08UQRiHnzFaSYCI/xoksdBIqGwIiYWRUBISExpCQ0ej38FWOmlIKKhoMPEbaCxsrrHiYrQgOSlQEaICrT+LHSPZzNzt3s3c3Hn7lHvLzvv82L2dm30XKioqKgYY062BJF0HpoA7wARwBbhsPz4DjoEG8AnYNcZ8Sx1Op8IXJM1KWpdUV3nq9m9nJV1I7VNGfEzSM0mNNqR9NOwxx1L7NRMflbQm6SSgeJ4TO8Zoat+8/LKkg4jieQ4kLaf2RtKwpJ0uiufZkTScSn5S0l5C+b/sSZrstvyMpKPU5uc4kjTTjkvpeYCkaeA1/+7hvcIZMGuMqUULQNIU8Aa4ltrWwyHwyBizGzwASSPAe+B2assW7AH3jTE/i+xcZoa12Qfy2Bo3i+5cKABl99zF1GYlWFTBeULLS0DZrOsDcDNggTXgc27bLWA64BhfgHvGmB8dHUXZ1DM0S45xliKMs9bKr+klIOkqsBrwv9JtVq1DewEAT4Ch1BYdMGQdygeg7Df4SmqDAKyoyXpCszPgITCeuvoAjFuX0gE8jljUdv7bCtiOOJ7XpdUZ8L/gdXHOA5QtYH5NXXVgbrgWWn1nwFTqaiPgdPIFcDd1tRFwOl307DwRuZgXwLvctgfA04hjOp18AcReZ6sZY16e3yDpUuQxnU6+S2AkcjEpcDr1zxOXSPgCKLSa0mc4nXwB/EpdbQScTr4AGqmrjYDTyRfAx9TVRsDp5Aug8LJyH+F0cgZg58z11BUHpO5ruGh2G3ybuuqAeF2aBfAqddUB8bq0OgP2U1cegH3aOQOMMb+BrdTVB2DLupQLwLIOnKY26IBT6+ClaQDGmO/ARmqLDtiwDn7HVkcY+EdjNoTlCI+tYhO2iUppm6HKslPUq2qQKHpUe8AFsjaUXuUQWCgqXyoAG8IuME/WkNRrnAHzZfqDSgdgQ6gBc2Td3b3CMTBXtkOsIzTIjZLnQhjcVtlcEIPZLJ0LoVvt8s/Va+3yuSAG84UJRxB98cpM9dJURUVFxSDzBxKde4Lk3/h2AAAAAElFTkSuQmCC",Arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADPklEQVR42u2bMUscQRiG30/SRaJEI1ZKUiRErNIELRUbQYSAnX8hpVUgkDYp0wgWVjYW+QcJaQzYpLojJIXhtDDEKBpj65ti58ixmdmb2ZvZ7+T2AUHudmfmeXf2bnb3O6CmpqZmgJGqOiI5AWAWwEMA0wDuArht3r4CcAagBeAbgIaI/NQOp1fhIZKLJN+SbDKcptl3keSQtk+I+BjJVyRbJaRdtEybY9p+ReKjJN+QvIwonufS9DGq7ZuXXyd5nFA8zzHJdW1vkLxDcrdC8Ty7JO9oyc+QPFCUb3NAcqZq+TmSp9rmHZySnCvjErwOIPkUwHv8+w7vF64ALIrIfrIASM4C+ADgnratgxMACyLSiB4AyREAnwE80LbswgGAJyJy4bNxyApr6wbIw4xxy3djrwCYfeeuaZsFsEbPdULXU4DZqusLgMkEA21P05EEbf8A8FhEzos28pkBLxLKL5s/r/M1kEkz9vKQHGeatf05yfmOfubNa7G5JDle5NhtBjwHMBz5yFwAWBaRT+0XzP8pZsKwcQiH2fX8Ycojb+kzxUw4ZJn7CSQXqpRPHMKCq7+iZJ71Mvdy/DftXSQ6HcJdSDaqPPKW/mPOBO+lcbvzCU35RCFM2PpwnQKzZQfdgfe0dxH5dLA6uQJ4pC2fIASrkyuA6X6QjxyC1ckVQNn7bNHlI4ZgdXIFUObiJJl8pBCsTjGfuIwA2Cv4FN7xbYjkjqsRAHuIePXoCiDF1Zk2VidXAL+1R5sAq5MrgJb2aBNgdXIF8FV7tAmwOrkCCFs73wysTtYATHFCU3vEEWm6Ci6KvgY/ao86Ik6XogDeaY86Ik6XbjPgSHvkEThCwQy45XpDRK5JbgN4GWkgUyR9H65MRQxgW0SunZ5FezK7pfwd8e8MV8UfAPdF5Jdrg8JrAbPjprZFD2wWyQP6j8ZSEufRmGlgQ9umBBvd5IOgbjFUKLu+XnWBhG+rpsFVZGUo/coJgFVf+aAATAgNACvICpL6jSsAKyH1QcEBmBD2ASwhq+7uF84ALIVWiPUEB7lQsiOEwS2VzQUxmMXSuRCqKpd/zX4rl88FMZg/mLAEcSN+MlP/aKqmpqZmkPkL0hSjwOpNKxwAAAAASUVORK5CYII=",
FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",
VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",
WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg==",
Setting:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADn0lEQVR42u2bzUsVURjGnyO6CPzAMnTjppAo3LTwH1CqTfaxbeOiRS37A0wXtROFVi1aRBs3LWohSIGbQAQXViBGRhG0UIRKUCpK7q/FnOB2uc6cOXNmRnGe3eW+H8/7zLln3vNxpQoVKlQ4wjBFJAFOSRqX1O7osivpvjHmU1nChBZglvSYLYJbS0EanCvIJzWK+gnsyH34/8OuMaYjb265jwCgz6N4SWq3vodbAEmnS/KtBDgoAgyU5BteAOAkMAPcBroc7PskDWfgN+wyDwBdltMMcDI3tYBnde/pHeARMNTErgd4APzweP834oeN1dMkz5DlsFNn/yyv4kdiSK4At4AO4CqwGaDwRmza2B0210qM7YhrXU59ANAq6bWkwQTTn5KO5fIE0uVYlXTeGLOXFMx1DrjlULwKKN41x6DlnIjEEQCckPRe0okCiguJr5LOGGO+xhm5jICJQ1i8LOeJJKPYEQAMKvrtt5ZdjSf2FM0Fq/sZJI2A6UNcvCz36TiDfUcAcE1SPu/U6Mm8k/TFfu6XdFb5iX3dGPM8lQfwNod3+TowBnQ3yddtv1vPIe+b1JIBiwEJ1IAJ208k5W21trWA+V/5CHAcmAtU/A2P/DcCiTAHHE8tgCVhgLvAXgYCk17Jo/yTGfLuWe7Zd72AC8CWB4n3OAz7mLytNkZabAEXMhfeQKYfWEpJZCxA3rGUOZeA/qDF15FpAz47EvlNk9neI2e3jeWCz0BbmvipNkSMMX8kuSZYM8Z8zyqAjbHmaN5mOeYjgIXrU93MWrxHrNQjrqiDkQMLHwG+OdqF3NN3jeXKzU8AoF1SzdH8XKhJUO7HZDXLMbwAwICkJUULFxe0SbqSVQAbw3Xi7Ze0ZLmGAzAKbHs0JGU1QtvAaIjCW4B7ZOvJy2qFa5a730RPtBiaz0CgnkiZi6F5fBZDVMvho7EhcuS3xJJ2hV9IupgTqaLw0hhzab8vq23xOG/r+LDsKjLgYVzxUnU0ltwK2wDezUyJmEwqXgp/PL4rvxthaeCSI+zxuA10J8ZkWdJNSb2SLkvayKHwDRu71+ZajrG941J8agALDQ3GU/a/IvMkYCPzmCbtLNEVmacNtgs5iP9fYVNEV1Q6Hez7yNZSL+J2SarTcpqiyV2iUkG0IvPFvbz5FbEn+KEk3wMjwMeSfCsBXFBdly9CAPk9ydyffpECuB5tZfVJjaKWueOSfinln6YK4lahQoUKRxd/AcRPGTcQCAUQAAAAAElFTkSuQmCC",
ChevronRight:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguNTksMTYuNThMMTMuMTcsMTJMOC41OSw3LjQxTDEwLDZMMTYsMTJMMTAsMThMOC41OSwxNi41OFoiIC8+PC9zdmc+",
Check:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDdMOSwxOUwzLjUsMTMuNUw0LjkxLDEyLjA5TDksMTYuMTdMMTkuNTksNS41OUwyMSw3WiIgLz48L3N2Zz4=",
ViewIndicator:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0idmlldy1pbmRpY2F0b3IiIGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgdmlld0JveD0iLTIuNSAtMSAzMCAzMCI+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7ZmlsbDpub25lO30uc3Qxe3N0cm9rZS13aWR0aDo2O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCTwvc3R5bGU+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNIDEyLjUgMCBBIDEyLjUgMTIuNSAwIDAgMCAtMTIuNSAwIEEgMTIuNSAxMi41IDAgMCAwIDEyLjUgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0gMTMgMCBMIDEwIDIgTCAxNiAyIFoiPjwvcGF0aD4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNIDIgMCBBIDIgMiAwIDAgMCAtMiAwIEEgMiAyIDAgMCAwIDIgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGlkPSJpbmRpY2F0b3IiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTMsMTUuNSkiPjwvcGF0aD4KCTwvZz4KPC9zdmc+",
Ring:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhQTFRFz8/P////s7OzBAQESUlJiYmJ6urqAAAAdRpBMQAAAAh0Uk5T/////////wDeg71ZAAABvElEQVR42sSXWxbDIAhExwdk/ztu2tQEFKOY01N+Wy4PDQ7YHhp+CODA4WPM7AeE2hgOAAfL7DwwEfwyTADCvWEECCPjeAdQsSLlnHbLmSK6ScD2B+2+8icitgmwmv92b7qVCRYBbXy23D8WuSWgiY+e+7sQNATU8eON/zuJ8rcegNLg4ykEqgCz/ieBSQFKYmnmA1ZFKEDMcyNAFgHhzznNDREWJyEBlGankEgBlz/y9BzjqwtYSKCkwFkBHAmUFOgLcCdQUoACZNc0P2s4AUguwFkDzpY+BZDzQSoHibUWlLqfAjhdgPQXQPg7QJbwoIn84BjT8kXayvWFmg5rV3nraYfxIWQ1D9Y/54UmXF8w9ITzVUBJD9WVCg4AvG0UD6F8WKLP/7h7ED1h8iegH1d4/JkkAI4itBSAVkhx2r88ZOhpn4H/+ZCherJHfeBaC2FzES4tZwhNDFYLIWWFFkQrPLqIYGlJbBbBQIgtRmlRmCry2HBg70BaSleRiEcLByohUqdK8d6/kdLoK3IrfKskrX5TZHtbqraYm8Vz305qRuysId1Lk2lftZg/p3GsXyvLd/raL7f3lwADAFsDV1mfn15mAAAAAElFTkSuQmCC"};function Reticle(a,b,c,d){a=void 0===a?16777215:a;b=void 0===b?!0:b;c=void 0===c?1500:c;this.dpr=void 0===d?1:d;d=new THREE.SpriteMaterial({color:a});THREE.Sprite.call(this,d);this.color=a instanceof THREE.Color?a:new THREE.Color(a);this.autoSelect=b;this.dwellTime=c;this.rippleDuration=500;this.position.z=-10;this.center.set(.5,.5);this.scale.set(.5,.5,1);this.callback=this.timerId=this.startTimestamp=null;this.frustumCulled=!1}Reticle.prototype=Object.assign(Object.create(THREE.Sprite.prototype),{constructor:Reticle,setColor:function(a){this.material.color.copy(a instanceof THREE.Color?a:new THREE.Color(a))},createCanvasTexture:function(a){a=new THREE.CanvasTexture(a);a.minFilter=THREE.LinearFilter;a.magFilter=THREE.LinearFilter;a.generateMipmaps=!1;return a},createCanvas:function(){var a=document.createElement("canvas"),b=a.getContext("2d"),c=this.dpr;a.width=32*c;a.height=32*c;b.scale(c,c);b.shadowBlur=5;b.shadowColor=
"rgba(200,200,200,0.9)";return{canvas:a,context:b}},updateCanvasArcByProgress:function(a){var b=this.context,c=this.canvasWidth,d=this.canvasHeight,f=this.material,e=this.dpr,g=a*Math.PI*2,k=this.color.getStyle(),h=.5*c/e;e=.5*d/e;b.clearRect(0,0,c,d);b.beginPath();0===a?(b.arc(h,e,c/16,0,2*Math.PI),b.fillStyle=k,b.fill()):(b.arc(h,e,c/4-3,-Math.PI/2,-Math.PI/2+g),b.strokeStyle=k,b.lineWidth=3,b.stroke());b.closePath();f.map.needsUpdate=!0},ripple:function(){var a=this,b=this.material,c=this.rippleDuration,
d=performance.now(),f=function(){var e=window.requestAnimationFrame(f);1<=(performance.now()-d)/c&&(window.cancelAnimationFrame(e),a.dispatchEvent({type:"reticle-ripple-end"}));b.map.needsUpdate=!0};this.dispatchEvent({type:"reticle-ripple-start"});f()},show:function(){this.visible=!0},hide:function(){this.visible=!1},start:function(a){this.autoSelect&&(this.dispatchEvent({type:"reticle-start"}),this.startTimestamp=performance.now(),this.callback=a,this.update())},end:function(){this.startTimestamp&&
(window.cancelAnimationFrame(this.timerId),this.startTimestamp=this.timerId=this.callback=null,this.dispatchEvent({type:"reticle-end"}))},update:function(){this.timerId=window.requestAnimationFrame(this.update.bind(this));var a=(performance.now()-this.startTimestamp)/this.dwellTime;this.dispatchEvent({type:"reticle-update",progress:a});1<=a&&(window.cancelAnimationFrame(this.timerId),this.callback&&this.callback(),this.end(),this.ripple())}});function Infospot(a,b,c){b=void 0===b?300:b;this.options=a;c=c||DataImage.Info;THREE.Sprite.call(this);this.type="infospot";this.mode=MODES.NORMAL;this.scale.set(b,b,1);this.rotation.y=Math.PI;this.originalRaycast=this.raycast;this.material.side=THREE.DoubleSide;this.material.depthTest=!1;this.material.transparent=!0;this.material.opacity=1;a=function(a){if(this.material){a.minFilter=THREE.LinearFilter;var c=a.image.width/a.image.height,d=new THREE.Vector3;this.scale.set(c*b,b,1);d.copy(this.scale);
this.material.side=THREE.DoubleSide;this.material.map=a;this.material.depthTest=!1;this.material.needsUpdate=!0}}.bind(this);if("object"==typeof c.data){var d={};d.width=c.width;d.height=c.height;d.data=new Uint8Array(c.data);d.format=void 0!==c.format?c.format:THREE.RGBAFormat;c=new THREE.DataTexture;c.flipY=!0;c.wrapS=void 0!==d.wrapS?d.wrapS:THREE.ClampToEdgeWrapping;c.wrapT=void 0!==d.wrapT?d.wrapT:THREE.ClampToEdgeWrapping;c.magFilter=void 0!==d.magFilter?d.magFilter:THREE.LinearFilter;c.minFilter=
void 0!==d.minFilter?d.minFilter:THREE.LinearFilter;c.anisotropy=void 0!==d.anisotropy?d.anisotropy:1;c.format=d.format;c.image.width=d.width;c.image.height=d.height;c.image.data=d.data;a(c)}else(new THREE.TextureLoader({PanoEnv:this.options})).load(c,a)}Infospot.prototype=Object.assign(Object.create(THREE.Sprite.prototype),{constructor:Infospot,enableRaycast:function(a){this.raycast=void 0===a||a?this.originalRaycast:function(){}},dispose:function(){var a=this.geometry,b=this.material,c=b.map;this.parent&&this.parent.remove(this);c&&(c.dispose(),b.map=null);a&&(a.dispose(),this.geometry=null);b&&(b.dispose(),this.material=null)}});var _Group=function(){this._tweens={};this._tweensAddedDuringUpdate={}};_Group.prototype={getAll:function(){return Object.keys(this._tweens).map(function(a){return this._tweens[a]}.bind(this))},removeAll:function(){this._tweens={}},add:function(a){this._tweens[a.getId()]=a;this._tweensAddedDuringUpdate[a.getId()]=a},remove:function(a){delete this._tweens[a.getId()];delete this._tweensAddedDuringUpdate[a.getId()]},update:function(a,b){var c=Object.keys(this._tweens);if(0===c.length)return!1;for(a=void 0!==a?a:TWEEN.now();0<c.length;){this._tweensAddedDuringUpdate={};for(var d=
0;d<c.length;d++){var f=this._tweens[c[d]];f&&!1===f.update(a)&&(f._isPlaying=!1,b||delete this._tweens[c[d]])}c=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var TWEEN=new _Group;TWEEN.Group=_Group;TWEEN._nextId=0;TWEEN.nextId=function(){return TWEEN._nextId++};TWEEN.now="undefined"===typeof self&&"undefined"!==typeof process&&process.hrtime?function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};TWEEN.Tween=function(a,b){this._object=a;this._valuesStart={};this._valuesEnd={};this._valuesStartRepeat={};this._duration=1E3;this._repeat=0;this._repeatDelayTime=void 0;this._reversed=this._isPlaying=this._yoyo=!1;this._delayTime=0;this._startTime=null;this._easingFunction=TWEEN.Easing.Linear.None;this._interpolationFunction=TWEEN.Interpolation.Linear;this._chainedTweens=[];this._onStartCallback=null;this._onStartCallbackFired=!1;this._onStopCallback=this._onCompleteCallback=this._onRepeatCallback=
this._onUpdateCallback=null;this._group=b||TWEEN;this._id=TWEEN.nextId()};TWEEN.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(a,b){this._valuesEnd=Object.create(a);void 0!==b&&(this._duration=b);return this},duration:function(a){this._duration=a;return this},start:function(a){this._group.add(this);this._isPlaying=!0;this._onStartCallbackFired=!1;this._startTime=void 0!==a?"string"===typeof a?TWEEN.now()+parseFloat(a):a:TWEEN.now();this._startTime+=this._delayTime;for(var b in this._valuesEnd){if(this._valuesEnd[b]instanceof
Array){if(0===this._valuesEnd[b].length)continue;this._valuesEnd[b]=[this._object[b]].concat(this._valuesEnd[b])}void 0!==this._object[b]&&(this._valuesStart[b]=this._object[b],!1===this._valuesStart[b]instanceof Array&&(this._valuesStart[b]*=1),this._valuesStartRepeat[b]=this._valuesStart[b]||0)}return this},stop:function(){if(!this._isPlaying)return this;this._group.remove(this);this._isPlaying=!1;null!==this._onStopCallback&&this._onStopCallback(this._object);this.stopChainedTweens();return this},
end:function(){this.update(Infinity);return this},stopChainedTweens:function(){for(var a=0,b=this._chainedTweens.length;a<b;a++)this._chainedTweens[a].stop()},group:function(a){this._group=a;return this},delay:function(a){this._delayTime=a;return this},repeat:function(a){this._repeat=a;return this},repeatDelay:function(a){this._repeatDelayTime=a;return this},yoyo:function(a){this._yoyo=a;return this},easing:function(a){this._easingFunction=a;return this},interpolation:function(a){this._interpolationFunction=
a;return this},chain:function(){this._chainedTweens=arguments;return this},onStart:function(a){this._onStartCallback=a;return this},onUpdate:function(a){this._onUpdateCallback=a;return this},onRepeat:function(a){this._onRepeatCallback=a;return this},onComplete:function(a){this._onCompleteCallback=a;return this},onStop:function(a){this._onStopCallback=a;return this},update:function(a){var b;if(a<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),
this._onStartCallbackFired=!0);var c=(a-this._startTime)/this._duration;c=0===this._duration||1<c?1:c;var d=this._easingFunction(c);for(b in this._valuesEnd)if(void 0!==this._valuesStart[b]){var f=this._valuesStart[b]||0,e=this._valuesEnd[b];e instanceof Array?this._object[b]=this._interpolationFunction(e,d):("string"===typeof e&&(e="+"===e.charAt(0)||"-"===e.charAt(0)?f+parseFloat(e):parseFloat(e)),"number"===typeof e&&(this._object[b]=f+(e-f)*d))}null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,
c);if(1===c)if(0<this._repeat){isFinite(this._repeat)&&this._repeat--;for(b in this._valuesStartRepeat)"string"===typeof this._valuesEnd[b]&&(this._valuesStartRepeat[b]+=parseFloat(this._valuesEnd[b])),this._yoyo&&(c=this._valuesStartRepeat[b],this._valuesStartRepeat[b]=this._valuesEnd[b],this._valuesEnd[b]=c),this._valuesStart[b]=this._valuesStartRepeat[b];this._yoyo&&(this._reversed=!this._reversed);this._startTime=void 0!==this._repeatDelayTime?a+this._repeatDelayTime:a+this._delayTime;null!==
this._onRepeatCallback&&this._onRepeatCallback(this._object)}else{null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);a=0;for(b=this._chainedTweens.length;a<b;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}};TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*
a*a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-
a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){return 0===a?0:1===a?1:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)},Out:function(a){return 0===a?0:1===a?1:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1},InOut:function(a){if(0===a)return 0;if(1===a)return 1;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+
1}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*TWEEN.Easing.Bounce.In(2*a):.5*TWEEN.Easing.Bounce.Out(2*
a-1)+.5}}};TWEEN.Interpolation={Linear:function(a,b){var c=a.length-1,d=c*b,f=Math.floor(d),e=TWEEN.Interpolation.Utils.Linear;return 0>b?e(a[0],a[1],d):1<b?e(a[c],a[c-1],c-d):e(a[f],a[f+1>c?c:f+1],d-f)},Bezier:function(a,b){for(var c=0,d=a.length-1,f=Math.pow,e=TWEEN.Interpolation.Utils.Bernstein,g=0;g<=d;g++)c+=f(1-b,d-g)*f(b,g)*a[g]*e(d,g);return c},CatmullRom:function(a,b){var c=a.length-1,d=c*b,f=Math.floor(d),e=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>b&&(f=Math.floor(d=c*(1+b))),e(a[(f-
1+c)%c],a[f],a[(f+1)%c],a[(f+2)%c],d-f)):0>b?a[0]-(e(a[0],a[0],a[1],a[1],-d)-a[0]):1<b?a[c]-(e(a[c],a[c],a[c-1],a[c-1],d-c)-a[c]):e(a[f?f-1:0],a[f],a[c<f+1?c:f+1],a[c<f+2?c:f+2],d-f)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var c=TWEEN.Interpolation.Utils.Factorial;return c(a)/c(b)/c(a-b)},Factorial:function(){var a=[1];return function(b){var c=1;if(a[b])return a[b];for(var d=b;1<d;d--)c*=d;return a[b]=c}}(),CatmullRom:function(a,b,c,d,f){a=.5*(c-a);d=.5*(d-b);var e=
f*f;return(2*b-2*c+a+d)*f*e+(-3*b+3*c-2*a-d)*e+a*f+b}}};function Panorama(a,b){THREE.Mesh.call(this,a,b);this.type="panorama";this.ImageQualityLow=1;this.ImageQualityFair=2;this.ImageQualityMedium=3;this.ImageQualityHigh=4;this.ImageQualitySuperHigh=5;this.animationDuration=1E3;this.defaultInfospotSize=350;this.container=void 0;this.loaded=!1;this.linkedSpots=[];this.isInfospotVisible=!1;this.linkingImageScale=this.linkingImageURL=void 0;this.material.side=THREE.BackSide;this.material.opacity=0;this.scale.x*=-1;this.renderOrder=-1;this.active=!1;this.infospotAnimation=
(new TWEEN.Tween(this)).to({},this.animationDuration/2);this.addEventListener("load",this.fadeIn.bind(this));this.addEventListener("click",this.onClick.bind(this));this.setupTransitions()}Panorama.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:Panorama,add:function(a){var b;if(1<arguments.length){for(b=0;b<arguments.length;b++)this.add(arguments[b]);return this}a instanceof Infospot?(b=a,a.dispatchEvent&&a.dispatchEvent({type:"panolens-infospot-focus",method:function(a,b,f){this.dispatchEvent({type:"panolens-viewer-handler",method:"tweenControlCenter",data:[a,b,f]})}.bind(this)})):(b=new THREE.Object3D,b.scale.x=-1,b.scalePlaceHolder=!0,b.add(a));THREE.Object3D.prototype.add.call(this,
b)},load:function(){this.onLoad()},onClick:function(a){a.intersects&&0===a.intersects.length&&this.traverse(function(a){a.dispatchEvent({type:"dismiss"})})},setContainer:function(a){if(a instanceof HTMLElement)var b=a;else a&&a.container&&(b=a.container);b&&(this.children.forEach(function(a){a instanceof Infospot&&a.dispatchEvent&&a.dispatchEvent({type:"panolens-container",container:b})}),this.container=b)},onLoad:function(){this.loaded=!0;this.dispatchEvent({type:"load"})},onProgress:function(a){this.dispatchEvent({type:"progress",
progress:a})},onError:function(){this.dispatchEvent({type:"error"})},getZoomLevel:function(){return 800>=window.innerWidth?this.ImageQualityFair:800<window.innerWidth&&1280>=window.innerWidth?this.ImageQualityMedium:1280<window.innerWidth&&1920>=window.innerWidth?this.ImageQualityHigh:1920<window.innerWidth?this.ImageQualitySuperHigh:this.ImageQualityLow},updateTexture:function(a){console.log(this);this.material.map=a;this.material.needsUpdate=!0},toggleInfospotVisibility:function(a,b){b=void 0!==
b?b:0;var c=void 0!==a?a:this.isInfospotVisible?!1:!0;this.traverse(function(a){a instanceof Infospot&&(c?a.show(b):a.hide(b))});this.isInfospotVisible=c;this.infospotAnimation.onComplete(function(){this.dispatchEvent({type:"infospot-animation-complete",visible:c})}.bind(this)).delay(b).start()},setLinkingImage:function(a,b){this.linkingImageURL=a;this.linkingImageScale=b},link:function(a,b,c,d){this.visible=!0;b?(c=void 0!==c?c:void 0!==a.linkingImageScale?a.linkingImageScale:300,d=d?d:a.linkingImageURL?
a.linkingImageURL:DataImage.Arrow,d=new Infospot(c,d),d.position.copy(b),d.toPanorama=a,d.addEventListener("click",function(){this.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:a})}.bind(this)),this.linkedSpots.push(d),this.add(d),this.visible=!1):console.warn("Please specify infospot position for linking")},reset:function(){this.children.length=0},setupTransitions:function(){this.fadeInAnimation=(new TWEEN.Tween(this.material)).easing(TWEEN.Easing.Quartic.Out).onStart(function(){this.visible=
!0;this.dispatchEvent({type:"enter-fade-start"})}.bind(this));this.fadeOutAnimation=(new TWEEN.Tween(this.material)).easing(TWEEN.Easing.Quartic.Out).onComplete(function(){this.visible=!1;this.dispatchEvent({type:"leave-complete"})}.bind(this));this.enterTransition=(new TWEEN.Tween(this)).easing(TWEEN.Easing.Quartic.Out).onComplete(function(){this.dispatchEvent({type:"enter-complete"})}.bind(this)).start();this.leaveTransition=(new TWEEN.Tween(this)).easing(TWEEN.Easing.Quartic.Out)},onFadeAnimationUpdate:function(){var a=
this.material.opacity,b=this.material.uniforms;b&&b.opacity&&(b.opacity.value=a)},fadeIn:function(a){a=0<=a?a:this.animationDuration;this.fadeOutAnimation.stop();this.fadeInAnimation.to({opacity:1},a).onUpdate(this.onFadeAnimationUpdate.bind(this)).onComplete(function(){this.toggleInfospotVisibility(!0,a/2);this.dispatchEvent({type:"enter-fade-complete"})}.bind(this)).start()},fadeOut:function(a){a=0<=a?a:this.animationDuration;this.fadeInAnimation.stop();this.fadeOutAnimation.to({opacity:0},a).onUpdate(this.onFadeAnimationUpdate.bind(this)).start()},
onEnter:function(){var a=this.animationDuration;this.leaveTransition.stop();this.enterTransition.to({},a).onStart(function(){this.dispatchEvent({type:"enter-start"});this.loaded?this.fadeIn(a):this.load()}.bind(this)).start();this.dispatchEvent({type:"enter"});this.children.forEach(function(a){a.dispatchEvent({type:"panorama-enter"})});this.active=!0},onLeave:function(){var a=this.animationDuration;this.enterTransition.stop();this.leaveTransition.to({},a).onStart(function(){this.dispatchEvent({type:"leave-start"});
this.fadeOut(a);this.toggleInfospotVisibility(!1)}.bind(this)).start();this.dispatchEvent({type:"leave"});this.children.forEach(function(a){a.dispatchEvent({type:"panorama-leave"})});this.active=!1},dispose:function(){function a(b){for(var c=b.geometry,d=b.material,f=b.children.length-1;0<=f;f--)a(b.children[f]),b.remove(b.children[f]);b instanceof Infospot&&b.dispose();c&&(c.dispose(),b.geometry=null);d&&(d.dispose(),b.material=null)}this.infospotAnimation.stop();this.fadeInAnimation.stop();this.fadeOutAnimation.stop();
this.enterTransition.stop();this.leaveTransition.stop();this.dispatchEvent({type:"panolens-viewer-handler",method:"onPanoramaDispose",data:this});a(this);this.parent&&this.parent.remove(this)}});function ImagePanorama(a,b,c){this.options=a;this.container=this.canvas=a.canvas;a=new THREE.SphereGeometry(c||10,this.options.widthSegments||64,this.options.heightSegments||64);var d=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,opacity:1,transparent:!0,wireframe:this.options.wireframe||!1});d.side=THREE.DoubleSide;console.log(d);Panorama.call(this,a,d);"object"!=typeof b&&(b={src:b,type:"jpg"});this.src=b.src;this.panotype=b.type;this.radius=c;this.hascache=!1;THREE.Cache.enabled=!0}ImagePanorama.prototype=Object.assign(Object.create(Panorama.prototype),{constructor:ImagePanorama,load:function(a){"object"!=typeof a&&(a={src:a,type:"jpg"});var b=a.src||this.src;a=a.type||this.panotype;this.src=b;if(b instanceof ArrayBuffer){var c=new Uint8Array(b);this.cachename=c[0]+"@"+c[2]+"@"+c[4]+"@"+c[6]+"@"+c[8]+"@"+c[10]}else this.cachename=b;c=THREE.Cache.get(this.cachename);console.log(this.cachename,c);if(void 0!==c)return this.hascache=!0,this.onLoad(c),!0;if(b)if("string"===typeof b)if("mp4"==
a)if(this.options.wxEnv.checkVip()&&null!=this.options._Node.PanoVideo)try{var d=this.options,f=this,e=new THREE.DataTexture;e.flipY=!0;e.wrapS=void 0!==d.wrapS?d.wrapS:THREE.ClampToEdgeWrapping;e.wrapT=void 0!==d.wrapT?d.wrapT:THREE.ClampToEdgeWrapping;e.magFilter=void 0!==d.magFilter?d.magFilter:THREE.LinearFilter;e.minFilter=void 0!==d.minFilter?d.minFilter:THREE.LinearFilter;e.anisotropy=void 0!==d.anisotropy?d.anisotropy:1;this.onLoad(e);var g=d._Node.PanoVideo,k=d._Node.Canvas2d;if(d.data.VideoInfo.enableBackgroundImage){var h=
k.createImage();h.src=d.data.VideoInfo.BackgroundImageSrc}else h=null;d.wxEnv.setData({videosrc:b},function(){wx.hideLoading();g.play();d._Lib.requestAnimationFrame(f.onvideoplay.bind({scope:f,options:d,texture:e,PanoVideo:g,Canvas2d:k,bgimg:h}))})}catch(l){console.log(l)}else console.warn("\u5168\u666f\u89c6\u9891\u529f\u80fd\u6b63\u5728\u5185\u6d4b\u4e2d\nVideo Panorama function is under internal test");else"GLLoader"==this.options.data.loader?(new THREE.TextureLoader({PanoEnv:this.options})).load(b,
this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)):this.options.data.loader&&"JPLoader"==this.options.data.loader&&(new THREE.JPLoader({request:this.options._Lib.request})).load(b,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this));else if(b instanceof ArrayBuffer)c=new Uint8Array(b),b=137==c[0]&&80==c[1]?THREE.PNGDecode(b):THREE.JPEGDecode(b,{useTArray:!0,colorTransform:!0}),e=new THREE.DataTexture,b&&(e.image.width=b.width,e.image.height=b.height,e.image.data=
b.data,e.flipY=!0,e.wrapS=void 0!==b.wrapS?b.wrapS:THREE.ClampToEdgeWrapping,e.wrapT=void 0!==b.wrapT?b.wrapT:THREE.ClampToEdgeWrapping,e.magFilter=void 0!==b.magFilter?b.magFilter:THREE.LinearFilter,e.minFilter=void 0!==b.minFilter?b.minFilter:THREE.LinearFilter,e.anisotropy=void 0!==b.anisotropy?b.anisotropy:1,void 0!==b.format&&(e.format=b.format),void 0!==b.type&&(e.type=b.type),void 0!==b.mipmaps&&(e.mipmaps=b.mipmaps,e.minFilter=THREE.LinearMipmapLinearFilter),1===b.mipmapCount&&(e.minFilter=
THREE.LinearFilter),e.needsUpdate=!0,this.onLoad(e));else return!1},onvideoplay:function(a,b,c,d,f){var e=this.scope;"object"==typeof this.options&&(a=this.options,b=this.texture,c=this.PanoVideo,d=this.Canvas2d,f=this.bgimg);var g=d.getContext("2d");a.data.VideoInfo.enableBackgroundImage?(g.drawImage(f,0,0,d.width,d.height),g.drawImage(c,a.data.VideoInfo.VideoX,a.data.VideoInfo.VideoY,a.data.VideoInfo.VideoWidth,a.data.VideoInfo.VideoHeight)):g.drawImage(c,0,0,d.width,d.height);g=g.getImageData(0,
0,d.width,d.height);b.format=void 0!==g.format?g.format:THREE.RGBAFormat;b.image.width=g.width;b.image.height=g.height;b.image.data=new Uint8Array(g.data);b.needsUpdate=!0;a._Lib.requestAnimationFrame(e.onvideoplay.bind({scope:e,options:a,texture:b,PanoVideo:c,Canvas2d:d,bgimg:f}))},onLoad:function(a){wx.hideLoading();this.hascache||THREE.Cache.add(this.cachename,a);a.minFilter=a.magFilter=THREE.LinearFilter;a.needsUpdate=!0;this.updateTexture(a);this.options._Lib.requestAnimationFrame(Panorama.prototype.onLoad.bind(this))},
reset:function(){Panorama.prototype.reset.call(this)},dispose:function(){var a=this.material.map;THREE.Cache.remove(this.src);a&&a.dispose();Panorama.prototype.dispose.call(this)}});function EmptyPanorama(){var a=new THREE.BufferGeometry,b=new THREE.MeshBasicMaterial({color:0,opacity:0,transparent:!0});a.addAttribute("position",new THREE.BufferAttribute(new Float32Array,1));Panorama.call(this,a,b)}EmptyPanorama.prototype=Object.assign(Object.create(Panorama.prototype),{constructor:EmptyPanorama});var ImageLoader={load:function(a,b,c,d){b=void 0===b?function(){}:b;c=void 0===c?function(){}:c;d=void 0===d?function(){}:d;THREE.Cache.enabled=!0;var f,e,g,k;for(k in DataImage)DataImage.hasOwnProperty(k)&&a===DataImage[k]&&(f=k);var h=THREE.Cache.get(f?f:a);if(void 0!==h)return b&&setTimeout(function(){c({loaded:1,total:1});b(h)},0),h;var l=window.URL||window.webkitURL;var m=document.createElementNS("http://www.w3.org/1999/xhtml","img");THREE.Cache.add(f?f:a,m);var p=function(){l.revokeObjectURL(m.src);
b(m)};if(0===a.indexOf("data:"))return m.addEventListener("load",p,!1),m.src=a,m;m.crossOrigin=void 0!==this.crossOrigin?this.crossOrigin:"";f=new window.XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.addEventListener("error",d);f.addEventListener("progress",function(a){if(a){var b=a.loaded,d=a.total;a.lengthComputable&&c({loaded:b,total:d})}});f.addEventListener("loadend",function(a){a&&(e=new Uint8Array(a.currentTarget.response),g=new window.Blob([e]),m.addEventListener("load",
p,!1),m.src=l.createObjectURL(g))});f.send(null)}},CubeTextureLoader={load:function(a,b,c,d){b=void 0===b?function(){}:b;c=void 0===c?function(){}:c;var f;var e=new THREE.CubeTexture([]);var g=0;var k={};var h={};a.map(function(a,m){ImageLoader.load(a,function(a){e.images[m]=a;g++;6===g&&(e.needsUpdate=!0,b(e))},function(a){k[m]={loaded:a.loaded,total:a.total};h.loaded=0;f=h.total=0;for(var b in k)f++,h.loaded+=k[b].loaded,h.total+=k[b].total;6>f&&(h.total=h.total/f*6);c(h)},d)});return e}};function CubePanorama(a){a=void 0===a?[]:a;var b=Object.assign({},THREE.ShaderLib.cube),c=new THREE.BoxBufferGeometry(1E4,1E4,1E4);b=new THREE.ShaderMaterial({fragmentShader:b.fragmentShader,vertexShader:b.vertexShader,uniforms:b.uniforms,side:THREE.BackSide,transparent:!0});Panorama.call(this,c,b);this.images=a;this.edgeLength=1E4;this.material.uniforms.opacity.value=0}CubePanorama.prototype=Object.assign(Object.create(Panorama.prototype),{constructor:CubePanorama,load:function(){CubeTextureLoader.load(this.images,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this))},onLoad:function(a){this.material.uniforms.tCube.value=a;Panorama.prototype.onLoad.call(this)},dispose:function(){var a=this.material.uniforms.tCube.value;this.images.forEach(function(a){THREE.Cache.remove(a)});a instanceof THREE.CubeTexture&&a.dispose();Panorama.prototype.dispose.call(this)}});function BasicPanorama(){for(var a=[],b=0;6>b;b++)a.push(DataImage.WhiteTile);CubePanorama.call(this,a)}BasicPanorama.prototype=Object.assign(Object.create(CubePanorama.prototype),{constructor:BasicPanorama});var StereographicShader={uniforms:{tDiffuse:{value:new THREE.Texture},resolution:{value:1},transform:{value:new THREE.Matrix4},zoom:{value:1},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float resolution;\nuniform mat4 transform;\nuniform float zoom;\nuniform float opacity;\nvarying vec2 vUv;\nconst float PI = 3.141592653589793;\nvoid main(){\nvec2 position = -1.0 +  2.0 * vUv;\nposition *= vec2( zoom * resolution, zoom * 0.5 );\nfloat x2y2 = position.x * position.x + position.y * position.y;\nvec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );\nsphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );\nvec2 sampleUV = vec2(\n(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,\n(asin(sphere_pnt.z) / PI + 0.5)\n);\ngl_FragColor = texture2D( tDiffuse, sampleUV );\ngl_FragColor.a *= opacity;\n}"};function LittlePlanet(a,b,c,d){c=void 0===c?1E4:c;d=void 0===d?.5:d;"image"===(void 0===a?"image":a)&&ImagePanorama.call(this,b,this.createGeometry(c,d),this.createMaterial(c));this.size=c;this.ratio=d;this.EPS=1E-6;this.frameId=null;this.dragging=!1;this.userMouse=new THREE.Vector2;this.quatA=new THREE.Quaternion;this.quatB=new THREE.Quaternion;this.quatCur=new THREE.Quaternion;this.quatSlerp=new THREE.Quaternion;this.vectorX=new THREE.Vector3(1,0,0);this.vectorY=new THREE.Vector3(0,1,0);this.addEventListener("window-resize",
this.onWindowResize)}LittlePlanet.prototype=Object.assign(Object.create(ImagePanorama.prototype),{constructor:LittlePlanet,add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}a instanceof Infospot&&(a.material.depthTest=!1);ImagePanorama.prototype.add.call(this,a)},createGeometry:function(a,b){return new THREE.PlaneBufferGeometry(a,a*b)},createMaterial:function(a){var b=Object.assign({},StereographicShader),c=b.uniforms;c.zoom.value=a;c.opacity.value=0;return new THREE.ShaderMaterial({uniforms:c,
vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,side:THREE.BackSide,transparent:!0})},registerMouseEvents:function(){this.container.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0});this.container.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0});this.container.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0});this.container.addEventListener("touchstart",this.onMouseDown.bind(this),{passive:!0});this.container.addEventListener("touchmove",
this.onMouseMove.bind(this),{passive:!0});this.container.addEventListener("touchend",this.onMouseUp.bind(this),{passive:!0});this.container.addEventListener("mousewheel",this.onMouseWheel.bind(this),{passive:!1});this.container.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),{passive:!1});this.container.addEventListener("contextmenu",this.onContextMenu.bind(this),{passive:!0})},unregisterMouseEvents:function(){this.container.removeEventListener("mousedown",this.onMouseDown.bind(this),
!1);this.container.removeEventListener("mousemove",this.onMouseMove.bind(this),!1);this.container.removeEventListener("mouseup",this.onMouseUp.bind(this),!1);this.container.removeEventListener("touchstart",this.onMouseDown.bind(this),!1);this.container.removeEventListener("touchmove",this.onMouseMove.bind(this),!1);this.container.removeEventListener("touchend",this.onMouseUp.bind(this),!1);this.container.removeEventListener("mousewheel",this.onMouseWheel.bind(this),!1);this.container.removeEventListener("DOMMouseScroll",
this.onMouseWheel.bind(this),!1);this.container.removeEventListener("contextmenu",this.onContextMenu.bind(this),!1)},onMouseDown:function(a){switch(a.touches&&a.touches.length||1){case 1:var b=0<=a.clientX?a.clientX:a.touches[0].clientX;a=0<=a.clientY?a.clientY:a.touches[0].clientY;this.dragging=!0;this.userMouse.set(b,a);break;case 2:b=a.touches[0].pageX-a.touches[1].pageX,a=a.touches[0].pageY-a.touches[1].pageY,this.userMouse.pinchDistance=Math.sqrt(b*b+a*a)}this.onUpdateCallback()},onMouseMove:function(a){switch(a.touches&&
a.touches.length||1){case 1:var b=0<=a.clientX?a.clientX:a.touches[0].clientX;a=0<=a.clientY?a.clientY:a.touches[0].clientY;var c=.4*THREE.Math.degToRad(b-this.userMouse.x),d=.4*THREE.Math.degToRad(a-this.userMouse.y);this.dragging&&(this.quatA.setFromAxisAngle(this.vectorY,c),this.quatB.setFromAxisAngle(this.vectorX,d),this.quatCur.multiply(this.quatA).multiply(this.quatB),this.userMouse.set(b,a));break;case 2:b=a.touches[0].pageX-a.touches[1].pageX,a=a.touches[0].pageY-a.touches[1].pageY,this.addZoomDelta(this.userMouse.pinchDistance-
Math.sqrt(b*b+a*a))}},onMouseUp:function(){this.dragging=!1},onMouseWheel:function(a){a.preventDefault();a.stopPropagation();var b=0;void 0!==a.wheelDelta?b=a.wheelDelta:void 0!==a.detail&&(b=-a.detail);this.addZoomDelta(b);this.onUpdateCallback()},addZoomDelta:function(a){var b=this.material.uniforms,c=.1*this.size,d=10*this.size;b.zoom.value+=a;b.zoom.value<=c?b.zoom.value=c:b.zoom.value>=d&&(b.zoom.value=d)},onUpdateCallback:function(){this.frameId=window.requestAnimationFrame(this.onUpdateCallback.bind(this));
this.quatSlerp.slerp(this.quatCur,.1);this.material&&this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp);!this.dragging&&1-this.quatSlerp.clone().dot(this.quatCur)<this.EPS&&window.cancelAnimationFrame(this.frameId)},reset:function(){this.quatCur.set(0,0,0,1);this.quatSlerp.set(0,0,0,1);this.onUpdateCallback()},onLoad:function(a){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight;this.registerMouseEvents();this.onUpdateCallback();
this.dispatchEvent({type:"panolens-viewer-handler",method:"disableControl"});ImagePanorama.prototype.onLoad.call(this,a)},onLeave:function(){this.unregisterMouseEvents();this.dispatchEvent({type:"panolens-viewer-handler",method:"enableControl",data:CONTROLS.ORBIT});window.cancelAnimationFrame(this.frameId);ImagePanorama.prototype.onLeave.call(this)},onWindowResize:function(){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight},onContextMenu:function(){this.dragging=
!1},dispose:function(){this.unregisterMouseEvents();ImagePanorama.prototype.dispose.call(this)}});function ImageLittlePlanet(a,b,c){LittlePlanet.call(this,"image",a,b,c)}ImageLittlePlanet.prototype=Object.assign(Object.create(LittlePlanet.prototype),{constructor:ImageLittlePlanet,onLoad:function(a){this.updateTexture(a);LittlePlanet.prototype.onLoad.call(this,a)},updateTexture:function(a){a.minFilter=a.magFilter=THREE.LinearFilter;this.material.uniforms.tDiffuse.value=a},dispose:function(){var a=this.material.uniforms.tDiffuse;a&&a.value&&a.value.dispose();LittlePlanet.prototype.dispose.call(this)}});function Media(a){this.constraints=Object.assign({video:{width:{ideal:1920},height:{ideal:1080},facingMode:{exact:"environment"}},audio:!1},a);this.element=this.scene=this.container=null;this.devices=[];this.stream=null;this.ratioScalar=1;this.videoDeviceIndex=0}Media.prototype=Object.assign(Object.create(THREE.EventDispatcher.prototype),{setContainer:function(a){this.container=a},setScene:function(a){this.scene=a},enumerateDevices:function(){var a=this.devices,b=new Promise(function(b){b(a)});return 0<a.length?b:window.navigator.mediaDevices.enumerateDevices()},switchNextVideoDevice:function(){var a=this.stop.bind(this),b=this.start.bind(this),c=this.setVideDeviceIndex.bind(this),d=this.videoDeviceIndex;this.getDevices("video").then(function(f){a();d++;
d>=f.length?(c(0),d--):c(d);b(f[d])})},getDevices:function(a){a=void 0===a?"video":a;var b=this.devices;return this.enumerateDevices().then(function(a){return a.map(function(a){b.includes(a)||b.push(a);return a})}).then(function(b){var c=new RegExp(a,"i");return b.filter(function(a){return c.test(a.kind)})})},getUserMedia:function(a){var b=this.setMediaStream.bind(this),c=this.playVideo.bind(this);return window.navigator.mediaDevices.getUserMedia(a).then(b).then(c).catch(function(a){console.warn("PANOLENS.Media: "+
a)})},setVideDeviceIndex:function(a){this.videoDeviceIndex=a},start:function(a){var b=this.constraints,c=this.getUserMedia.bind(this);this.element=this.createVideoElement();return this.getDevices().then(function(d){if(!d||0===d.length)throw Error("no video device found");b.video.deviceId=(a||d[0]).deviceId;return c(b)})},stop:function(){var a=this.stream;a&&a.active&&(a.getTracks()[0].stop(),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.stream=this.element=null)},setMediaStream:function(a){this.stream=
a;this.element.srcObject=a;this.scene&&(this.scene.background=this.createVideoTexture());window.addEventListener("resize",this.onWindowResize.bind(this))},playVideo:function(){var a=this.element;a&&(a.play(),this.dispatchEvent({type:"play"}))},pauseVideo:function(){var a=this.element;a&&(a.pause(),this.dispatchEvent({type:"pause"}))},createVideoTexture:function(){var a=this.element,b=new THREE.VideoTexture(a);b.generateMipmaps=!1;b.minFilter=THREE.LinearFilter;b.magFilter=THREE.LinearFilter;b.format=
THREE.RGBFormat;b.center.set(.5,.5);a.addEventListener("canplay",this.onWindowResize.bind(this));return b},createVideoElement:function(){var a=this.dispatchEvent.bind(this),b=document.createElement("video");b.setAttribute("autoplay","");b.setAttribute("muted","");b.setAttribute("playsinline","");b.style.position="absolute";b.style.top="0";b.style.left="0";b.style.width="100%";b.style.height="100%";b.style.objectPosition="center";b.style.objectFit="cover";b.style.display=this.scene?"none":"";b.addEventListener("canplay",
function(){return a({type:"canplay"})});return b},onWindowResize:function(){if(this.element&&this.element.videoWidth&&this.element.videoHeight&&this.scene){var a=this.container,b=a.clientWidth;a=a.clientHeight;var c=this.scene.background,d=this.element;d=d.videoHeight/d.videoWidth*(this.container?b/a:1)*this.ratioScalar;b>a?c.repeat.set(d,1):c.repeat.set(1,1/d)}}});function CameraPanorama(a){var b=new THREE.SphereBufferGeometry(5E3,60,40),c=new THREE.MeshBasicMaterial({visible:!1});Panorama.call(this,b,c);this.media=new Media(a);this.radius=5E3;this.addEventListener("enter",this.start.bind(this));this.addEventListener("leave",this.stop.bind(this));this.addEventListener("panolens-container",this.onPanolensContainer.bind(this));this.addEventListener("panolens-scene",this.onPanolensScene.bind(this))}CameraPanorama.prototype=Object.assign(Object.create(Panorama.prototype),{constructor:CameraPanorama,onPanolensContainer:function(a){this.media.setContainer(a.container)},onPanolensScene:function(a){this.media.setScene(a.scene)},start:function(){return this.media.start()},stop:function(){this.media.stop()}});function OrbitControls(a,b){function c(a){E=!1;z=A=0;if(!1!==e.enabled){switch(a.touches.length){case 1:if(!0===e.noRotate)return;t=q.TOUCH_ROTATE;g.set(a.touches[0].pageX,a.touches[0].pageY);break;case 2:if(!0===e.noZoom)return;t=q.TOUCH_DOLLY;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;y.set(0,Math.sqrt(b*b+a*a));break;case 3:if(!0===e.noPan)return;t=q.TOUCH_PAN;l.set(a.touches[0].pageX,a.touches[0].pageY);break;default:t=q.NONE}t!==q.NONE&&e.dispatchEvent(L)}}
function d(a){if(!1!==e.enabled){var b=e.domElement===document?e.domElement.body:e.domElement;switch(a.touches.length){case 1:if(!0===e.noRotate)break;if(t!==q.TOUCH_ROTATE)break;k.set(a.touches[0].pageX,a.touches[0].pageY);h.subVectors(k,g);e.rotateLeft(2*Math.PI*h.x/b.clientWidth*e.rotateSpeed);e.rotateUp(2*Math.PI*h.y/b.clientHeight*e.rotateSpeed);g.copy(k);B&&(z=a.touches[0].pageX-B.pageX,A=a.touches[0].pageY-B.pageY);B={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY};e.update();break;case 2:if(!0===
e.noZoom)break;if(t!==q.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;I.set(0,Math.sqrt(b*b+a*a));J.subVectors(I,y);0>J.y?(e.object.fov=e.object.fov<e.maxFov?e.object.fov+1:e.maxFov,e.object.updateProjectionMatrix()):0<J.y&&(e.object.fov=e.object.fov>e.minFov?e.object.fov-1:e.minFov,e.object.updateProjectionMatrix());y.copy(I);e.update();e.dispatchEvent(C);break;case 3:if(!0===e.noPan)break;if(t!==q.TOUCH_PAN)break;m.set(a.touches[0].pageX,a.touches[0].pageY);
p.subVectors(m,l);e.pan(p.x,p.y);l.copy(m);e.update();break;default:t=q.NONE}}}function f(){E=!0;B=void 0;!1!==e.enabled&&(e.dispatchEvent(M),t=q.NONE)}this.object=a;this.domElement=void 0!==b?b:document;this.frameId=null;this.enabled=!0;this.center=this.target=new THREE.Vector3;this.noZoom=!1;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.noRotate=!1;this.rotateSpeed=-.15;this.noPan=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=
2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.momentumDampingFactor=.9;this.momentumScalingFactor=-.005;this.momentumKeydownFactor=20;this.minFov=30;this.maxFov=120;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var e=this,g=new THREE.Vector2,k=new THREE.Vector2,h=new THREE.Vector2,l=new THREE.Vector2,m=new THREE.Vector2,p=new THREE.Vector2,
r=new THREE.Vector3,n=new THREE.Vector3,y=new THREE.Vector2,I=new THREE.Vector2,J=new THREE.Vector2,x=0,v=0,F=0,G=0,H=1,w=new THREE.Vector3,D=new THREE.Vector3,u=new THREE.Quaternion,z=0,A=0,B,E=!1,q={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},t=q.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;var K=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),N=K.clone().inverse(),C={type:"change"},
L={type:"start"},M={type:"end"};this.setLastQuaternion=function(a){u.copy(a);e.object.quaternion.copy(a)};this.getLastPosition=function(){return D};this.rotateLeft=function(a){void 0===a&&(a=2*Math.PI/60/60*e.autoRotateSpeed);G-=a};this.rotateUp=function(a){void 0===a&&(a=2*Math.PI/60/60*e.autoRotateSpeed);F-=a};this.panLeft=function(a){var b=this.object.matrix.elements;r.set(b[0],b[1],b[2]);r.multiplyScalar(-a);w.add(r)};this.panUp=function(a){var b=this.object.matrix.elements;r.set(b[4],b[5],b[6]);
r.multiplyScalar(a);w.add(r)};this.pan=function(a,b){var c=e.domElement===document?e.domElement.body:e.domElement;if(e.object instanceof THREE.PerspectiveCamera){var d=e.object.position.clone().sub(e.target).length();d*=Math.tan(e.object.fov/2*Math.PI/180);e.panLeft(2*a*d/c.clientHeight);e.panUp(2*b*d/c.clientHeight)}else e.object instanceof THREE.OrthographicCamera?(e.panLeft(a*(e.object.right-e.object.left)/c.clientWidth),e.panUp(b*(e.object.top-e.object.bottom)/c.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};
this.momentum=function(){E&&(1E-4>Math.abs(z)&&1E-4>Math.abs(A)?E=!1:(A*=this.momentumDampingFactor,z*=this.momentumDampingFactor,G-=this.momentumScalingFactor*z,F-=this.momentumScalingFactor*A))};this.dollyIn=function(a){void 0===a&&(a=Math.pow(.95,e.zoomSpeed));e.object instanceof THREE.PerspectiveCamera?H/=a:e.object instanceof THREE.OrthographicCamera?(e.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*a)),e.object.updateProjectionMatrix(),e.dispatchEvent(C)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};
this.dollyOut=function(a){void 0===a&&(a=Math.pow(.95,e.zoomSpeed));e.object instanceof THREE.PerspectiveCamera?H*=a:e.object instanceof THREE.OrthographicCamera?(e.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/a)),e.object.updateProjectionMatrix(),e.dispatchEvent(C)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};this.update=function(a){var b=this.object.position;n.copy(b).sub(this.target);n.applyQuaternion(K);x=Math.atan2(n.x,
n.z);v=Math.atan2(Math.sqrt(n.x*n.x+n.z*n.z),n.y);this.autoRotate&&t===q.NONE&&this.rotateLeft(2*Math.PI/60/60*e.autoRotateSpeed);this.momentum();x+=G;v+=F;x=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,x));v=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,v));v=Math.max(1E-7,Math.min(Math.PI-1E-7,v));var c=n.length()*H;c=Math.max(this.minDistance,Math.min(this.maxDistance,c));this.target.add(w);n.x=c*Math.sin(v)*Math.sin(x);n.y=c*Math.cos(v);n.z=c*Math.sin(v)*Math.cos(x);n.applyQuaternion(N);
b.copy(this.target).add(n);this.object.lookAt(this.target);F=G=0;H=1;w.set(0,0,0);if(1E-7<D.distanceToSquared(this.object.position)||1E-7<8*(1-u.dot(this.object.quaternion)))!0!==a&&this.dispatchEvent(C),D.copy(this.object.position),u.copy(this.object.quaternion)};this.reset=function(){t=q.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.object.zoom=this.zoom0;this.object.updateProjectionMatrix();this.dispatchEvent(C);this.update()};this.getPolarAngle=function(){return v};
this.getAzimuthalAngle=function(){return x};this.dispose=function(){this.domElement.removeEventListener("touchstart",this.touchstartID);this.domElement.removeEventListener("touchend",this.touchendID);this.domElement.removeEventListener("touchmove",this.touchmoveID)};this.connect=function(){this.touchstartID=this.domElement.addEventListener("touchstart",c,{passive:!1});this.touchendID=this.domElement.addEventListener("touchend",f,{passive:!1});this.touchmoveID=this.domElement.addEventListener("touchmove",
d,{passive:!1})};this.connect();this.update()}OrbitControls.prototype=Object.assign(Object.create(THREE.EventDispatcher.prototype),{constructor:OrbitControls});function DeviceOrientationControls(a,b){var c=this,d={type:"change"},f=0,e=0,g=0,k=0;this.camera=a;this.camera.rotation.reorder("YXZ");this.domElement=void 0!==b?b:document;this.enabled=!0;this.deviceOrientation={};this.alphaOffsetAngle=this.alpha=this.screenOrientation=0;var h=function(a){c.deviceOrientation=a},l=function(a){c.screenOrientation=a},m=function(a){g=a.touches[0].pageX;k=a.touches[0].pageY},p=function(a){f+=THREE.Math.degToRad((g-a.touches[0].pageX)/4);e+=THREE.Math.degToRad((k-a.touches[0].pageY)/
4);c.updateAlphaOffsetAngle(f);g=a.touches[0].pageX;k=a.touches[0].pageY};this.connect=function(){l();c.orientationchangeID=c.domElement.addEventListener("orientationchange",l,!1);c.deviceorientationID=c.domElement.addEventListener("deviceorientation",h,!1);c.deviceorientationUpdateID=c.domElement.addEventListener("deviceorientation",this.update.bind(this),!1);c.touchstartID=c.domElement.addEventListener("touchstart",m,!1);c.touchmoveID=c.domElement.addEventListener("touchmove",p,!1);c.enabled=!0};
this.disconnect=function(){c.domElement.removeEventListener("orientationchange",c.orientationchangeID);c.domElement.removeEventListener("deviceorientation",c.deviceorientationID);c.domElement.removeEventListener("deviceorientation",c.deviceorientationUpdateID);c.domElement.removeEventListener("touchstart",c.touchstartID);c.domElement.removeEventListener("touchmove",c.touchmoveID);c.enabled=!1};this.update=function(a){if(!1!==c.enabled){var b=c.deviceOrientation.alpha?THREE.Math.degToRad(c.deviceOrientation.alpha)+
c.alphaOffsetAngle:0,f=c.deviceOrientation.beta?THREE.Math.degToRad(c.deviceOrientation.beta):0,g=c.deviceOrientation.gamma?THREE.Math.degToRad(c.deviceOrientation.gamma):0,k=c.screenOrientation?THREE.Math.degToRad(c.screenOrientation):0,h=c.camera.quaternion,m=new THREE.Vector3(0,0,1),l=new THREE.Euler,p=new THREE.Quaternion,r=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),w=new THREE.Quaternion,D=new THREE.Quaternion;if(0==c.screenOrientation){var u=new THREE.Vector3(1,0,0);w.setFromAxisAngle(u,
-e)}else 180==c.screenOrientation?(u=new THREE.Vector3(1,0,0),w.setFromAxisAngle(u,e)):90==c.screenOrientation?(u=new THREE.Vector3(0,1,0),w.setFromAxisAngle(u,e)):-90==c.screenOrientation&&(u=new THREE.Vector3(0,1,0),w.setFromAxisAngle(u,-e));r.multiply(w);r.multiply(D);l.set(-f,360-b,-g,"YXZ");h.setFromEuler(l);h.multiply(r);h.multiply(p.setFromAxisAngle(m,-k));c.alpha=b;!0!==a&&c.dispatchEvent(d)}};this.updateAlphaOffsetAngle=function(a){this.alphaOffsetAngle=a;this.update()};this.dispose=function(){this.disconnect()};
this.connect()}DeviceOrientationControls.prototype=Object.assign(Object.create(THREE.EventDispatcher.prototype),{constructor:DeviceOrientationControls});function CardboardEffect(a){var b=new THREE.OrthographicCamera(-1,1,1,-1,0,1),c=new THREE.Scene,d=new THREE.StereoCamera;d.aspect=.5;var f=new THREE.WebGLRenderTarget(512,512,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat});f.scissorTest=!0;f.texture.generateMipmaps=!1;var e=new THREE.Vector2(.441,.156),g=(new THREE.PlaneBufferGeometry(1,1,10,20)).toNonIndexed(),k=g.attributes.position.array,h=g.attributes.uv.array;g.attributes.position.count*=2;g.attributes.uv.count*=
2;var l=new Float32Array(2*k.length);l.set(k);l.set(k,k.length);var m=new Float32Array(2*h.length);m.set(h);m.set(h,h.length);h=new THREE.Vector2;k=k.length/3;for(var p=0,r=l.length/3;p<r;p++){h.x=l[3*p];h.y=l[3*p+1];var n=h.dot(h);n=1.5+(e.x+e.y*n)*n;var y=p<k?0:1;l[3*p]=h.x/n*1.5-.5+y;l[3*p+1]=h.y/n*3;m[2*p]=.5*(m[2*p]+y)}g.attributes.position.array=l;g.attributes.uv.array=m;e=new THREE.MeshBasicMaterial({map:f.texture});g=new THREE.Mesh(g,e);c.add(g);this.setSize=function(b,c){a.setSize(b,c);var d=
a.getPixelRatio();f.setSize(b*d,c*d)};this.render=function(e,g){e.updateMatrixWorld();null===g.parent&&g.updateMatrixWorld();d.update(g);g=f.width/2;var h=f.height;a.autoClear&&a.clear();f.scissor.set(0,0,g,h);f.viewport.set(0,0,g,h);a.setRenderTarget(f);a.render(e,d.cameraL);a.clearDepth();f.scissor.set(g,0,g,h);f.viewport.set(g,0,g,h);a.setRenderTarget(f);a.render(e,d.cameraR);a.clearDepth();a.setRenderTarget(null);a.render(c,b)}}var StereoEffect=function(a){var b=new THREE.StereoCamera;b.aspect=.5;var c=new THREE.Vector2;this.setEyeSeparation=function(a){b.eyeSep=a};this.setSize=function(b,c){a.setSize(b,c)};this.render=function(d,f){d.updateMatrixWorld();null===f.parent&&f.updateMatrixWorld();b.update(f);a.getSize(c);a.autoClear&&a.clear();a.setScissorTest(!0);a.setScissor(0,0,c.width/2,c.height);a.setViewport(0,0,c.width/2,c.height);a.render(d,b.cameraL);a.setScissor(c.width/2,0,c.width/2,c.height);a.setViewport(c.width/
2,0,c.width/2,c.height);a.render(d,b.cameraR);a.setScissorTest(!1)}};function Viewer(a){a=a||{};a.autoHideControlBar=void 0!==a.autoHideControlBar?a.autoHideControlBar:!1;a.autoHideInfospot=void 0!==a.autoHideInfospot?a.autoHideInfospot:!0;a.horizontalView=void 0!==a.horizontalView?a.horizontalView:!1;a.clickTolerance=a.clickTolerance||10;a.cameraFov=a.cameraFov||60;a.reverseDragging=a.reverseDragging||!1;a.dwellTime=a.dwellTime||1500;a.autoReticleSelect=void 0!==a.autoReticleSelect?a.autoReticleSelect:!0;a.viewIndicator=void 0!==a.viewIndicator?a.viewIndicator:!1;
a.indicatorSize=a.indicatorSize||30;a.autoRotate=a.autoRotate||!1;a.autoRotateSpeed=a.autoRotateSpeed||2;a.autoRotateActivationDuration=a.autoRotateActivationDuration||5E3;this.options=a;this.modes=MODES;var b=a.container;b._width=b.clientWidth;b._height=b.clientHeight;this.container=b;this.requestAnimationFrame=a.PanoEnv._Lib.requestAnimationFrame;this.cancelAnimationFrame=a.PanoEnv._Lib.cancelAnimationFrame;this.wxEnv=a.PanoEnv.wxEnv;this.camera=a.camera||new THREE.PerspectiveCamera(this.options.cameraFov,
this.container.clientWidth/this.container.clientHeight,1,1E4);this.scene=a.scene||new THREE.Scene;this.renderer=a.renderer||new THREE.WebGLRenderer({canvas:b,alpha:!0,antialias:!1});this.sceneReticle=new THREE.Scene;this.viewIndicatorSize=this.options.indicatorSize;this.mode=MODES.NORMAL;this.pressObject=this.pressEntityObject=this.infospot=this.hoverObject=this.panorama=null;this.raycaster=new THREE.Raycaster;this.raycasterPoint=new THREE.Vector2;this.userMouse=new THREE.Vector2;this.updateCallbacks=
[];this.requestAnimationId=null;this.cameraFrustum=new THREE.Frustum;this.cameraViewProjectionMatrix=new THREE.Matrix4;this.outputDivElement=this.autoRotateRequestId=null;this.touchSupported=!0;this.tweenLeftAnimation=new TWEEN.Tween;this.tweenUpAnimation=new TWEEN.Tween;this.renderer.setPixelRatio(this.container.devicePixelRatio);this.renderer.setSize(this.container.clientWidth,this.container.clientHeight);this.renderer.setClearColor(0,1);this.renderer.autoClear=!1;this.OrbitControls=new OrbitControls(this.camera,
this.container);this.OrbitControls.id="orbit";this.OrbitControls.minDistance=1;this.OrbitControls.noPan=!0;this.OrbitControls.autoRotate=this.options.autoRotate;this.OrbitControls.autoRotateSpeed=this.options.autoRotateSpeed;this.DeviceOrientationControls=new DeviceOrientationControls(this.camera,this.container);this.DeviceOrientationControls.id="device-orientation";this.DeviceOrientationControls.enabled=!1;this.camera.position.z=0;this.controls=[this.OrbitControls,this.DeviceOrientationControls];
this.control=this.OrbitControls;this.CardboardEffect=new CardboardEffect(this.renderer);this.CardboardEffect.setSize(this.container.clientWidth,this.container.clientHeight);this.StereoEffect=new StereoEffect(this.renderer);this.StereoEffect.setSize(this.container.clientWidth,this.container.clientHeight);this.effect=null;this.options.horizontalView&&(this.OrbitControls.minPolarAngle=Math.PI/2,this.OrbitControls.maxPolarAngle=Math.PI/2);this.options.reverseDragging&&this.reverseDraggingDirection();
this.animate.call(this)}Viewer.prototype=Object.assign(Object.create(THREE.EventDispatcher.prototype),{constructor:Viewer,add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}this.scene.add(a);a.addEventListener&&a.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this));a instanceof Panorama&&a.dispatchEvent&&a.dispatchEvent({type:"panolens-container",container:this.container});a instanceof CameraPanorama&&a.dispatchEvent({type:"panolens-scene",scene:this.scene});
"panorama"===a.type&&(this.addPanoramaEventListener(a),this.panorama||this.setPanorama(a))},remove:function(a){a.removeEventListener&&a.removeEventListener("panolens-viewer-handler",this.eventHandler.bind(this));this.scene.remove(a)},setPanorama:function(a){var b=this.panorama;if("panorama"===a.type&&b!==a){var c=function(){if(b)b.onLeave();a.removeEventListener("enter-fade-start",c)};a.addEventListener("enter-fade-start",c);(this.panorama=a).onEnter()}},eventHandler:function(a){if(a.method&&this[a.method])this[a.method](a.data)},
dispatchEventToChildren:function(a){this.scene.traverse(function(b){b.dispatchEvent&&b.dispatchEvent(a)})},enableEffect:function(a){if(this.mode!==a)if(a===MODES.NORMAL)this.disableEffect();else{this.mode=a;var b=this.camera.fov;switch(a){case MODES.CARDBOARD:this.effect=this.CardboardEffect;break;case MODES.STEREO:this.effect=this.StereoEffect;break;default:this.effect=null}this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode});this.camera.fov=b+.01;this.effect.setSize(this.container.clientWidth,
this.container.clientHeight);this.render();this.camera.fov=b;this.dispatchEvent({type:"mode-change",mode:this.mode})}},disableEffect:function(){this.mode!==MODES.NORMAL&&(this.mode=MODES.NORMAL,this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.dispatchEvent({type:"mode-change",mode:this.mode}))},enableAutoRate:function(a){""!=a&&(this.OrbitControls.autoRotateSpeed=a);this.options.autoRotate=
!0;this.OrbitControls.autoRotate=!0},disableAutoRate:function(){clearTimeout(this.autoRotateRequestId);this.options.autoRotate=!1;this.OrbitControls.autoRotate=!1},toggleVideoPlay:function(a){},setVideoCurrentTime:function(a){},onVideoUpdate:function(a){},addUpdateCallback:function(a){a&&this.updateCallbacks.push(a)},removeUpdateCallback:function(a){var b=this.updateCallbacks.indexOf(a);a&&0<=b&&this.updateCallbacks.splice(b,1)},showVideoWidget:function(){},hideVideoWidget:function(){},updateVideoPlayButton:function(a){},
addPanoramaEventListener:function(a){a.addEventListener("enter-fade-start",this.setCameraControl.bind(this))},setCameraControl:function(){this.OrbitControls.target.copy(this.panorama.position)},getControl:function(){return this.control},getScene:function(){return this.scene},getCamera:function(){return this.camera},getRenderer:function(){return this.renderer},getContainer:function(){return this.container},getControlId:function(){return this.control.id},getNextControlId:function(){return this.controls[this.getNextControlIndex()].id},
getNextControlIndex:function(){var a=this.controls,b=a.indexOf(this.control)+1;return b>=a.length?0:b},setCameraFov:function(a){this.camera.fov=a;this.camera.updateProjectionMatrix()},enableControl:function(a){a=0<=a&&a<this.controls.length?a:0;this.control.enabled=!1;this.control=this.controls[a];this.control.enabled=!0;switch(a){case CONTROLS.ORBIT:this.camera.position.copy(this.panorama.position);break;case CONTROLS.DEVICEORIENTATION:this.camera.position.copy(this.panorama.position)}this.control.inited||
(this.control.connect(),this.control.inited=!0);this.control.update()},disableControl:function(){this.control.enabled=!1;this.control.dispose();this.control.inited=!1},getScreenVector:function(a){a=a.clone();var b=this.container.clientWidth/2,c=this.container.clientHeight/2;a.project(this.camera);a.x=a.x*b+b;a.y=-(a.y*c)+c;a.z=0;return a},checkSpriteInViewport:function(a){this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld);this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix,
this.camera.matrixWorldInverse);this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix);return a.visible&&this.cameraFrustum.intersectsSprite(a)},reverseDraggingDirection:function(){this.OrbitControls.rotateSpeed*=-1;this.OrbitControls.momentumScalingFactor*=-1},tweenControlCenter:function(a,b,c){var d;if(this.control===this.OrbitControls){a instanceof Array&&(b=a[1],c=a[2],a=a[0]);b=void 0!==b?b:1E3;c=c||TWEEN.Easing.Exponential.Out;var f=this;var e=this.camera.getWorldDirection(new THREE.Vector3);
var g=e.clone();this.panorama.getWorldPosition(new THREE.Vector3).sub(this.camera.getWorldPosition(new THREE.Vector3));var k=a.clone();var h=k.clone();e.y=0;k.y=0;a=Math.atan2(k.z,k.x)-Math.atan2(e.z,e.x);a=a>Math.PI?a-2*Math.PI:a;a=a<-Math.PI?a+2*Math.PI:a;e=Math.abs(g.angleTo(e)+(0>=g.y*h.y?h.angleTo(k):-h.angleTo(k)));e*=-1;g={left:0,up:0};var l=d=0;this.tweenLeftAnimation.stop();this.tweenUpAnimation.stop();this.tweenLeftAnimation=(new TWEEN.Tween(g)).to({left:a},b).easing(c).onUpdate(function(a){f.control.rotateLeft(a.left-
d);d=a.left}).start();this.tweenUpAnimation=(new TWEEN.Tween(g)).to({up:e},b).easing(c).onUpdate(function(a){f.control.rotateUp(a.up-l);l=a.up}).start()}},tweenControlCenterByObject:function(a,b,c){var d=!1;a.traverseAncestors(function(a){a.scalePlaceHolder&&(d=!0)});if(d){var f=new THREE.Vector3(-1,1,1);this.tweenControlCenter(a.getWorldPosition().multiply(f),b,c)}else this.tweenControlCenter(a.getWorldPosition(),b,c)},getConvertedIntersect:function(a){for(var b,c=0;c<a.length;c++)if(0<=a[c].distance&&
a[c].object&&!a[c].object.passThrough&&(!a[c].object.entity||!a[c].object.entity.passThrough)){b=a[c].object.entity&&!a[c].object.entity.passThrough?a[c].object.entity:a[c].object;break}return b},update:function(){TWEEN.update();this.updateCallbacks.forEach(function(a){a()});this.control.update()},render:function(){this.mode===MODES.CARDBOARD||this.mode===MODES.STEREO?(this.renderer.clear(),this.effect.render(this.scene,this.camera),this.effect.render(this.sceneReticle,this.camera)):(this.renderer.clear(),
this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.sceneReticle,this.camera))},animate:function(){this.requestAnimationId=this.requestAnimationFrame(this.animate.bind(this));this.onChange()},onChange:function(){this.update();this.render()},dispose:function(){function a(b){for(var c=b.children.length-1;0<=c;c--)a(b.children[c]),b.remove(b.children[c]);b instanceof Panorama||b instanceof Infospot?b.dispose():b.dispatchEvent&&b.dispatchEvent("dispose")}
this.tweenLeftAnimation.stop();this.tweenUpAnimation.stop();a(this.scene);THREE.Cache&&THREE.Cache.enabled&&THREE.Cache.clear()},destroy:function(){this.dispose();this.render();this.cancelAnimationFrame(this.requestAnimationId)},onPanoramaDispose:function(a){a===this.panorama&&(this.panorama=null)},loadAsyncRequest:function(a,b){b=void 0===b?function(){}:b;var c=new window.XMLHttpRequest;c.onloadend=function(a){b(a)};c.open("GET",a,!0);c.send(null)},clearAllCache:function(){THREE.Cache.clear()}});exports.THREE=THREE;exports.BasicPanorama=BasicPanorama;exports.CONTROLS=CONTROLS;exports.CameraPanorama=CameraPanorama;exports.CubePanorama=CubePanorama;exports.DataImage=DataImage;exports.EmptyPanorama=EmptyPanorama;exports.ImageLittlePlanet=ImageLittlePlanet;exports.ImagePanorama=ImagePanorama;exports.Infospot=Infospot;exports.LittlePlanet=LittlePlanet;exports.MODES=MODES;exports.Panorama=Panorama;exports.REVISION=REVISION;exports.Reticle=Reticle;exports.TWEEN=TWEEN;exports.VERSION=VERSION;exports.Viewer=Viewer;exports.init=init;