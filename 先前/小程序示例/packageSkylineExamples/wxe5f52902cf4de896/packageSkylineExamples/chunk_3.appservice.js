__wxCodeSpace__.batchAddCompiledTemplate(function(G,R,D,Q,gdc,X,Y,Z,RG={}){var P=RG.P||function(a){return typeof a==='function'?a:()=>{}};return {'packageSkylineExamples/examples/album/components/previewer/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"sourcePageId":new Array(1),"list":new Array(1),"imageId":new Array(1)},K=U===true,c=(C)=>{},b=(C,T,E)=>{E("preview-home",{},(N,C)=>{if(C)R.i(N,"preview-home");if(C)L(N,"preview-home");if(C||K||U.imageId)O(N,"imageId",D.imageId);A["imageId"][0]=(D,E,T)=>{O(N,"imageId",D.imageId);E(N)};if(C||K||U.sourcePageId)O(N,"sourcePageId",D.sourcePageId);A["sourcePageId"][0]=(D,E,T)=>{O(N,"sourcePageId",D.sourcePageId);E(N)};if(C||K||U.list)O(N,"list",D.list);A["list"][0]=(D,E,T)=>{O(N,"list",D.list);E(N)};if(C)O(N,"bindback","onBack")},c)},a=(C,T,E)=>{E("scale-gesture-handler",{},(N,C)=>{if(C)O(N,"tag","scale");if(C||K||[])O(N,"simultaneousHandlers",["swiper"]);if(C)R.wl(N,"ongesture","onScale");if(C)R.wl(N,"shouldResponseOnMove","shouldResponseOnMove")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),'packageSkylineExamples/examples/album/components/previewer/preview-home/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"tempIndex":new Array(4),"pretty":new Array(1),"list":new Array(5),"index":new Array(1)},K=U===true,d=(C)=>{},c=(C,T,E)=>{E("navigation-bar",{},(N,C)=>{if(C)L(N,"navigation-bar preview-top-self");if(C||K||undefined)O(N,"back",true);if(C)O(N,"bindback","onBack")},d)},b=(C,T,E)=>{E("share-element",{},(N,C)=>{if(C)O(N,"key","navigation-bar")},c)},e=(C)=>{},h=(C)=>{},g=(C,T,E)=>{E("preview-list",{},(N,C)=>{if(C)L(N,"preview-list");if(C||K||U.index)O(N,"index",D.index);A["index"][0]=(D,E,T)=>{O(N,"index",D.index);E(N)};if(C||K||U.list)O(N,"list",D.list);A["list"][0]=(D,E,T)=>{O(N,"list",D.list);E(N)};if(C)O(N,"bindbeforerender","onBeforeRender");if(C)O(N,"bindtapimage","onTapImage")},h)},k=(C)=>{},j=(C,T,E)=>{E("image",{},(N,C)=>{var $A=D.tempIndex;var $B=D.tempIndex;if(C||K||!!(U.tempIndex||Z(U.list,$A)||U.tempIndex||Z(Z(U.list,$B),"src"))||undefined)O(N,"src",X(D.list)[$A]&&X(X(D.list)[$B]).src);A["list"][3]=A["tempIndex"][2]=A["list"][4]=A["tempIndex"][3]=(D,E,T)=>{var $C=D.tempIndex;var $D=D.tempIndex;O(N,"src",X(D.list)[$C]&&X(X(D.list)[$D]).src);E(N)};if(C)O(N,"mode","aspectFit")},k)},i=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"temp-image")},j)},f=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"need-hide-on-back")},g);E("share-element",{},(N,C)=>{var $A=D.tempIndex;var $B=D.tempIndex;if(C||K||!!(U.tempIndex||Z(U.list,$A)||U.tempIndex||Z(Z(U.list,$B),"id"))||undefined)O(N,"key",X(D.list)[$A]&&X(X(D.list)[$B]).id);A["list"][1]=A["tempIndex"][0]=A["list"][2]=A["tempIndex"][1]=(D,E,T)=>{var $C=D.tempIndex;var $D=D.tempIndex;O(N,"key",X(D.list)[$C]&&X(X(D.list)[$D]).id);E(N)};if(C)L(N,"share-element-image need-transform-on-back");if(C)O(N,"shuttleOnPush","to")},i)},a=(C,T,E)=>{E("view",{},(N,C)=>{var $A=D.pretty;if(C||K||!!(U.pretty||($A?undefined:undefined))||undefined)L(N,"navigation-bar-cnt "+Y($A?"hide":"show"));A["pretty"][0]=(D,E,T)=>{var $B=D.pretty;L(N,"navigation-bar-cnt "+Y($B?"hide":"show"))}},b);E("view",{},(N,C)=>{if(C)L(N,"preview-extra middle preview-middle-self")},e);E("view",{},(N,C)=>{if(C)L(N,"preview-cnt")},f)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),'packageSkylineExamples/examples/album/components/previewer/preview-image/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={},K=U===true,d,f=(C)=>{},e=(C,T,E)=>{if(d===1){E("image",{},(N,C)=>{if(C)L(N,"image");if(C||K||Z(U.image,"src"))O(N,"src",X(D.image).src);if(C)O(N,"mode","aspectFit");if(C)O(N,"bindload","onImgLoad")},f)}},c=(C,T,E,B)=>{d=D.status?1:0;B(d,e)},b=(C,T,E)=>{E("view",{},(N,C)=>{if(C)R.i(N,"image");if(C)L(N,"image-wrapper")},c)},a=(C,T,E)=>{E("double-tap-gesture-handler",{},(N,C)=>{if(C)L(N,"double-tap-gesture-handler");if(C)R.wl(N,"ongesture","onDoubleTap")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),'packageSkylineExamples/examples/album/components/previewer/preview-list/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"needSwiperAnimation":new Array(1)},K=U===true,f,g,h,i,j,m=(C)=>{},l=(C,T,E)=>{E("preview-image",{},(N,C)=>{if(C)L(N,"image");var $A=D.currentIndex===g;var $B=g>=D.currentIndex-1&&g<=D.currentIndex+1;if(C||K||!!(U.currentIndex||i)||($A?undefined:!!(i||U.currentIndex||i||U.currentIndex)||($B?undefined:undefined)))O(N,"status",$A?1:$B?2:0);if(C||K||h)O(N,"image",f);if(C)O(N,"bindrender","onImageRender")},m)},k=(C,$A,$B,$C,$D,$E,T,E)=>{f=$A,g=$B,h=$C,i=$D,j=$E;E("swiper-item",{},(N,C)=>{},l)},e=(C,T,E,B,F)=>{F(D.list,"id",U?U.list:undefined,[0,"list"],k)},d=(C,T,E)=>{E("swiper",{},(N,C)=>{if(C)L(N,"swiper-cnt");if(C||K||U.currentIndex)O(N,"current",D.currentIndex);if(C)O(N,"duration","300");if(C)O(N,"cache-extent","2");if(C||K||U.needSwiperAnimation)O(N,"scrollWithAnimation",D.needSwiperAnimation);A["needSwiperAnimation"][0]=(D,E,T)=>{O(N,"scrollWithAnimation",D.needSwiperAnimation);E(N)};if(C)O(N,"bindchange","onSwiperChange")},e)},c=(C,T,E)=>{E("tap-gesture-handler",{},(N,C)=>{if(C)R.wl(N,"ongesture","onTapImage")},d)},b=(C,T,E)=>{E("horizontal-drag-gesture-handler",{},(N,C)=>{if(C)O(N,"tag","swiper");if(C||K||[])O(N,"simultaneousHandlers",["scale"]);if(C)O(N,"native-view","swiper");if(C)R.wl(N,"shouldResponseOnMove","shouldResponseOnMove")},c)},a=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"image-previewer")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),'packageSkylineExamples/examples/album/pages/preview/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"imageId":new Array(1),"list":new Array(1),"sourcePageId":new Array(1)},K=U===true,c=(C)=>{},b=(C,T,E)=>{E("previewer",{},(N,C)=>{if(C||K||U.imageId)O(N,"imageId",D.imageId);A["imageId"][0]=(D,E,T)=>{O(N,"imageId",D.imageId);E(N)};if(C||K||U.sourcePageId)O(N,"sourcePageId",D.sourcePageId);A["sourcePageId"][0]=(D,E,T)=>{O(N,"sourcePageId",D.sourcePageId);E(N)};if(C||K||U.list)O(N,"list",D.list);A["list"][0]=(D,E,T)=>{O(N,"list",D.list);E(N)}},c)},a=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"box-cotainer")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),}});;__wxRoute = "packageSkylineExamples/examples/album/components/previewer/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/album/components/previewer/index.js";define("packageSkylineExamples/examples/album/components/previewer/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,a=(e=require("../../utils/event-bus"))&&e.__esModule?e:{default:e},t=require("../../utils/worklet");var l,s=0,r=1,o=2,n=3,i=1,c=2,u=1,v=2,_=3,T=4,m=((l=function(e,a,t){return Math.min(t,Math.max(a,e))})._closure={},l.asString="function clamp(value,min,max){return Math.min(max,Math.max(min,value));}",l.__workletHash=3943736986494,l.__location="packageSkylineExamples/examples/album/components/previewer/index.js (39:0)",l.__worklet=!0,l),g=function(){var e=function(e,a,l){return(0,t.getTiming)(a)(e,{duration:200},l)};return e._closure={getTiming:t.getTiming},e.asString="function recoverTiming(target,renderer,callback){const{getTiming}=jsThis._closure;{return getTiming(renderer)(target,{duration:200},callback);}}",e.__workletHash=3600410011445,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js (44:0)",e.__worklet=!0,e}(),h=function(){var e=function(e,a){var t=e/(a/2);return m(Math.pow(1-t,3),0,1)};return e._closure={clamp:m},e.asString="function calcOpacity(moveY,screenHeight){const{clamp}=jsThis._closure;{var opacityRatio=moveY/(screenHeight/2);return clamp(Math.pow(1-opacityRatio,3),0,1);}}",e.__workletHash=3137145988915,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js (49:0)",e.__worklet=!0,e}(),f=function(){var e=function(e,a){return m(1-.4*(e/(a/3*2)),.6,1)};return e._closure={clamp:m},e.asString="function calcScale(moveY,screenHeight){const{clamp}=jsThis._closure;{var scaleRange=0.4;var scaleRatio=moveY/(screenHeight/3*2);return clamp(1-scaleRange*scaleRatio,0.6,1);}}",e.__workletHash=0xb9fc198fb38,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js (55:0)",e.__worklet=!0,e}();Component({properties:{imageId:{type:String,value:""},sourcePageId:{type:String,value:""},list:{type:Array,value:[]}},lifetimes:{created:function(){a.default.initWorkletEventBus(this.renderer);var e=(0,t.getShared)(this.renderer);this.sharedValues=[e(0),e(0),e(0),e(1),e(1),e(1),e(!1),e(0),e(0),e(1),e(this.renderer)]},attached:function(){var e,a=this,l=this.data.sourcePageId,u=wx.getSystemInfoSync().screenHeight,v=this.getPageId(),_=null!==(e=this.sharedValues)&&void 0!==e?e:[];_[8].value=v,this.customRouteContext=wx.router.getRouteContext(this),(0,t.getRunOnUI)(this.renderer)(function(){var e=function(){globalThis.temp["".concat(v,"GestureBack")]||(globalThis.temp["".concat(v,"GestureBack")]=function(e){if(_[7].value!==r){_[7].value=n;var a=e.moveX,t=e.moveY,l=e.offsetY;if(_[0].value+=a,_[1].value<0){var s=.52*Math.pow(1-Math.min(l/u,1),2),o=_[1].value+Math.ceil(t*s);_[1].value=o}else _[1].value+=t;_[3].value=h(l,u);var i=f(l,u);_[4].value=i,_[5].value=Math.min(i,_[5].value)}},globalThis.eventBus.on("".concat(v,"Back"),globalThis.temp["".concat(v,"GestureBack")])),globalThis.temp["".concat(v,"GestureBackEnd")]||(globalThis.temp["".concat(v,"GestureBackEnd")]=function(){var e=_[1].value,t=_[4].value,r=_[5].value,o=(a.customRouteContext||{}).didPop;if(e>1&&t<=r+.01)globalThis.eventBus.emit("".concat(l,"CustomRouteBack"),{scale:t}),o();else{var n=_[10].value;_[3].value=g(1,n),_[0].value=g(0,n),_[1].value=g(0,n),_[4].value=g(1,n,function(){var e=function(){_[7].value=s};return e._closure={sharedValues:_,GESTURE_STATE:7,PreviewerGesture:{Init:s}},e.asString="function _f(){const{sharedValues,GESTURE_STATE,PreviewerGesture}=jsThis._closure;{sharedValues[GESTURE_STATE].value=PreviewerGesture.Init;}}",e.__workletHash=0xef51b592a76,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js (159:69)",e.__worklet=!0,e}()),_[5].value=1}},globalThis.eventBus.on("".concat(v,"BackEnd"),globalThis.temp["".concat(v,"GestureBackEnd")])),globalThis.temp["".concat(v,"GestureToggle")]||(globalThis.temp["".concat(v,"GestureToggle")]=function(){_[7].value!==r&&(_[7].value=o)},globalThis.eventBus.on("".concat(v,"Toggle"),globalThis.temp["".concat(v,"GestureToggle")])),globalThis.temp["".concat(v,"GestureMoving")]||(globalThis.temp["".concat(v,"GestureMoving")]=function(){_[7].value=r},globalThis.eventBus.on("".concat(v,"Moving"),globalThis.temp["".concat(v,"GestureMoving")]))};return e._closure={pageId:v,sharedValues:_,GESTURE_STATE:7,PreviewerGesture:{Moving:r,Back:n,Init:s,Toggle:o},TRANSLATE_X:0,TRANSLATE_Y:1,screenHeight:u,OPACITY:3,calcOpacity:h,calcScale:f,SCALE:4,MIN_SCALE:5,_this:{customRouteContext:a.customRouteContext},sourcePageId:l,RENDERER:10,recoverTiming:g},e.asString='function _f(){const{pageId,sharedValues,GESTURE_STATE,PreviewerGesture,TRANSLATE_X,TRANSLATE_Y,screenHeight,OPACITY,calcOpacity,calcScale,SCALE,MIN_SCALE,_this,sourcePageId,RENDERER,recoverTiming}=jsThis._closure;{if(!globalThis.temp["".concat(pageId,"GestureBack")]){globalThis.temp["".concat(pageId,"GestureBack")]=function(args){if(sharedValues[GESTURE_STATE].value===PreviewerGesture.Moving)return;sharedValues[GESTURE_STATE].value=PreviewerGesture.Back;var moveX=args.moveX,moveY=args.moveY,offsetY=args.offsetY;sharedValues[TRANSLATE_X].value+=moveX;if(sharedValues[TRANSLATE_Y].value<0){var fy=0.52*Math.pow(1-Math.min(offsetY/screenHeight,1),2);var translateY=sharedValues[TRANSLATE_Y].value+Math.ceil(moveY*fy);sharedValues[TRANSLATE_Y].value=translateY;}else{sharedValues[TRANSLATE_Y].value+=moveY;}sharedValues[OPACITY].value=calcOpacity(offsetY,screenHeight);var scale=calcScale(offsetY,screenHeight);sharedValues[SCALE].value=scale;sharedValues[MIN_SCALE].value=Math.min(scale,sharedValues[MIN_SCALE].value);};globalThis.eventBus.on("".concat(pageId,"Back"),globalThis.temp["".concat(pageId,"GestureBack")]);}if(!globalThis.temp["".concat(pageId,"GestureBackEnd")]){globalThis.temp["".concat(pageId,"GestureBackEnd")]=function(){var moveY=sharedValues[TRANSLATE_Y].value;var scale=sharedValues[SCALE].value;var minScale=sharedValues[MIN_SCALE].value;var _ref=_this.customRouteContext||{},didPop=_ref.didPop;if(moveY>1&&scale<=minScale+0.01){globalThis.eventBus.emit("".concat(sourcePageId,"CustomRouteBack"),{scale:scale});didPop();}else{var renderer=sharedValues[RENDERER].value;sharedValues[OPACITY].value=recoverTiming(1,renderer);sharedValues[TRANSLATE_X].value=recoverTiming(0,renderer);sharedValues[TRANSLATE_Y].value=recoverTiming(0,renderer);sharedValues[SCALE].value=recoverTiming(1,renderer,function(){var _f=function _f(){sharedValues[GESTURE_STATE].value=PreviewerGesture.Init;};_f._closure={sharedValues:sharedValues,GESTURE_STATE:GESTURE_STATE,PreviewerGesture:{Init:PreviewerGesture.Init}};_f.asString="function _f(){const{sharedValues,GESTURE_STATE,PreviewerGesture}=jsThis._closure;{sharedValues[GESTURE_STATE].value=PreviewerGesture.Init;}}";_f.__workletHash=16445888604790;_f.__location="packageSkylineExamples/examples/album/components/previewer/index.js (159:69)";_f.__worklet=true;return _f;}());sharedValues[MIN_SCALE].value=1;}};globalThis.eventBus.on("".concat(pageId,"BackEnd"),globalThis.temp["".concat(pageId,"GestureBackEnd")]);}if(!globalThis.temp["".concat(pageId,"GestureToggle")]){globalThis.temp["".concat(pageId,"GestureToggle")]=function(){if(sharedValues[GESTURE_STATE].value===PreviewerGesture.Moving)return;sharedValues[GESTURE_STATE].value=PreviewerGesture.Toggle;};globalThis.eventBus.on("".concat(pageId,"Toggle"),globalThis.temp["".concat(pageId,"GestureToggle")]);}if(!globalThis.temp["".concat(pageId,"GestureMoving")]){globalThis.temp["".concat(pageId,"GestureMoving")]=function(){sharedValues[GESTURE_STATE].value=PreviewerGesture.Moving;};globalThis.eventBus.on("".concat(pageId,"Moving"),globalThis.temp["".concat(pageId,"GestureMoving")]);}}}',e.__workletHash=0x9b756fd5fa8,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js (109:32)",e.__worklet=!0,e}())(),this.applyAnimatedStyle("#preview-home >>> .need-transform-on-back",function(){var e=function(){return{transform:"translate(".concat(_[0].value,"px, ").concat(_[1].value,"px) scale(").concat(_[4].value,")")}};return e._closure={sharedValues:_,TRANSLATE_X:0,TRANSLATE_Y:1,SCALE:4},e.asString='function _f(){const{sharedValues,TRANSLATE_X,TRANSLATE_Y,SCALE}=jsThis._closure;{return{transform:"translate(".concat(sharedValues[TRANSLATE_X].value,"px, ").concat(sharedValues[TRANSLATE_Y].value,"px) scale(").concat(sharedValues[SCALE].value,")")};}}',e.__workletHash=2784597461612,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js (188:75)",e.__worklet=!0,e}());var T=this.customRouteContext||{},m=T.primaryAnimation,p=T.primaryAnimationStatus;this.applyAnimatedStyle("#preview-home >>> .need-hide-on-back",function(){var e=function(){var e=p.value;return{left:1===e||2===e||_[7].value===n?"9999px":"0"}};return e._closure={primaryAnimationStatus:p,sharedValues:_,GESTURE_STATE:7,PreviewerGesture:{Back:n}},e.asString="function _f(){const{primaryAnimationStatus,sharedValues,GESTURE_STATE,PreviewerGesture}=jsThis._closure;{var status=primaryAnimationStatus.value;var isRunningAnimation=status===1||status===2;return{left:isRunningAnimation||sharedValues[GESTURE_STATE].value===PreviewerGesture.Back?'9999px':'0'};}}",e.__workletHash=6895129981417,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js (198:70)",e.__worklet=!0,e}()),this.applyAnimatedStyle("#preview-home >>> .preview-middle-self",function(){var e=function(){var e=p.value,a=_[3].value;if(_[6].value)return{opacity:a};var t=m.value;e===i?(t*=3)>1&&(t=1):e===c&&(t=1-3*(1-t))<0&&(t=0);var l=a*t;return{opacity:l>1?1:l}};return e._closure={primaryAnimationStatus:p,sharedValues:_,OPACITY:3,USER_GESTURE_IN_PROGRESS:6,primaryAnimation:m,PrimaryAnimationStatus:{FORWARD:i,REVERSE:c}},e.asString="function _f(){const{primaryAnimationStatus,sharedValues,OPACITY,USER_GESTURE_IN_PROGRESS,primaryAnimation,PrimaryAnimationStatus}=jsThis._closure;{var status=primaryAnimationStatus.value;var opacity=sharedValues[OPACITY].value;if(!sharedValues[USER_GESTURE_IN_PROGRESS].value){var value=primaryAnimation.value;var factor=value;if(status===PrimaryAnimationStatus.FORWARD){factor*=3;if(factor>1)factor=1;}else if(status===PrimaryAnimationStatus.REVERSE){factor=1-(1-factor)*3;if(factor<0)factor=0;}var newOpacity=opacity*factor;return{opacity:newOpacity>1?1:newOpacity};}else{return{opacity:opacity};}}}",e.__workletHash=8561485157556,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js (209:72)",e.__worklet=!0,e}())},detached:function(){var e=this.getPageId();(0,t.getRunOnUI)(this.renderer)(function(){var a=function(){["Back","BackEnd","Toggle","Moving"].forEach(function(){var a=function(a){var t="".concat(e,"Gesture").concat(a);globalThis.temp[t]&&(globalThis.eventBus.off("".concat(e).concat(a),globalThis.temp[t]),delete globalThis.temp[t])};return a._closure={pageId:e},a.asString='function _f(item){const{pageId}=jsThis._closure;{var globalKey="".concat(pageId,"Gesture").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}',a.__workletHash=5003641712027,a.__location="packageSkylineExamples/examples/album/components/previewer/index.js (240:27)",a.__worklet=!0,a}())};return a._closure={pageId:e},a.asString='function _f(){const{pageId}=jsThis._closure;{var removeList=[\'Back\',\'BackEnd\',\'Toggle\',\'Moving\'];removeList.forEach(function(){var _f=function _f(item){var globalKey="".concat(pageId,"Gesture").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}};_f._closure={pageId:pageId};_f.asString="function _f(item){const{pageId}=jsThis._closure;{var globalKey=\\"\\".concat(pageId,\\"Gesture\\").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off(\\"\\".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}";_f.__workletHash=5003641712027;_f.__location="packageSkylineExamples/examples/album/components/previewer/index.js (240:27)";_f.__worklet=true;return _f;}());}}',a.__workletHash=1829920814665,a.__location="packageSkylineExamples/examples/album/components/previewer/index.js (237:32)",a.__worklet=!0,a}())()}},methods:{onScale:function(e){var a,t=null!==(a=this.sharedValues)&&void 0!==a?a:[],l=t[8].value;if(e.state===u)t[2].value=e.focalY,t[9].value=1,t[7].value=s,t[6].value=!0;else if(e.state===v){var r=e.focalX,i=e.focalY,c=e.focalDeltaX,m=e.focalDeltaY,g=i-t[2].value;if(2===e.pointerCount){var h=t[8].value,f=e.scale/t[9].value;t[9].value=e.scale,globalThis.eventBus.emit("".concat(h,"Scale"),{scale:f,centerX:r,centerY:i})}else t[7].value===n?globalThis.eventBus.emit("".concat(l,"Back"),{moveX:c,moveY:m,offsetY:g}):t[7].value===o||globalThis.eventBus.emit("".concat(l,"Move"),{moveX:c,moveY:m,offsetY:g,origin:"move"})}else if(e.state===_||e.state===T){var p=e.velocityX,E=e.velocityY;t[6].value=!1,t[7].value===n?globalThis.eventBus.emit("".concat(l,"BackEnd")):(t[7].value===o||globalThis.eventBus.emit("".concat(l,"End"),{velocityX:p,velocityY:E}),t[7].value=s)}},_onScale_worklet_factory_:function(){var e=this;return function(){var a=function(a){var t,l=null!==(t=e.sharedValues)&&void 0!==t?t:[],r=l[8].value;if(a.state===u)l[2].value=a.focalY,l[9].value=1,l[7].value=s,l[6].value=!0;else if(a.state===v){var i=a.focalX,c=a.focalY,m=a.focalDeltaX,g=a.focalDeltaY,h=c-l[2].value;if(2===a.pointerCount){var f=l[8].value,p=a.scale/l[9].value;l[9].value=a.scale,globalThis.eventBus.emit("".concat(f,"Scale"),{scale:p,centerX:i,centerY:c})}else l[7].value===n?globalThis.eventBus.emit("".concat(r,"Back"),{moveX:m,moveY:g,offsetY:h}):l[7].value===o||globalThis.eventBus.emit("".concat(r,"Move"),{moveX:m,moveY:g,offsetY:h,origin:"move"})}else if(a.state===_||a.state===T){var E=a.velocityX,d=a.velocityY;l[6].value=!1,l[7].value===n?globalThis.eventBus.emit("".concat(r,"BackEnd")):(l[7].value===o||globalThis.eventBus.emit("".concat(r,"End"),{velocityX:E,velocityY:d}),l[7].value=s)}};return a._closure={_this2:{sharedValues:e.sharedValues},PAGE_ID:8,GestureState:{BEGIN:u,ACTIVE:v,END:_,CANCELLED:T},START_Y:2,TEMP_LAST_SCALE:9,GESTURE_STATE:7,PreviewerGesture:{Init:s,Back:n,Toggle:o},USER_GESTURE_IN_PROGRESS:6},a.asString='function _f(evt){const{_this2,PAGE_ID,GestureState,START_Y,TEMP_LAST_SCALE,GESTURE_STATE,PreviewerGesture,USER_GESTURE_IN_PROGRESS}=jsThis._closure;{var _this$sharedValues2;var sharedValues=(_this$sharedValues2=_this2.sharedValues)!==null&&_this$sharedValues2!==void 0?_this$sharedValues2:[];var pageId=sharedValues[PAGE_ID].value;if(evt.state===GestureState.BEGIN){sharedValues[START_Y].value=evt.focalY;sharedValues[TEMP_LAST_SCALE].value=1;sharedValues[GESTURE_STATE].value=PreviewerGesture.Init;sharedValues[USER_GESTURE_IN_PROGRESS].value=true;}else if(evt.state===GestureState.ACTIVE){var focalX=evt.focalX;var focalY=evt.focalY;var moveX=evt.focalDeltaX;var moveY=evt.focalDeltaY;var offsetY=focalY-sharedValues[START_Y].value;if(evt.pointerCount===2){var _pageId=sharedValues[PAGE_ID].value;var realScale=evt.scale/sharedValues[TEMP_LAST_SCALE].value;sharedValues[TEMP_LAST_SCALE].value=evt.scale;globalThis.eventBus.emit("".concat(_pageId,"Scale"),{scale:realScale,centerX:focalX,centerY:focalY});}else if(sharedValues[GESTURE_STATE].value===PreviewerGesture.Back){globalThis.eventBus.emit("".concat(pageId,"Back"),{moveX:moveX,moveY:moveY,offsetY:offsetY});}else if(sharedValues[GESTURE_STATE].value===PreviewerGesture.Toggle){}else{globalThis.eventBus.emit("".concat(pageId,"Move"),{moveX:moveX,moveY:moveY,offsetY:offsetY,origin:\'move\'});}}else if(evt.state===GestureState.END||evt.state===GestureState.CANCELLED){var velocityX=evt.velocityX;var velocityY=evt.velocityY;sharedValues[USER_GESTURE_IN_PROGRESS].value=false;if(sharedValues[GESTURE_STATE].value===PreviewerGesture.Back){globalThis.eventBus.emit("".concat(pageId,"BackEnd"));}else if(sharedValues[GESTURE_STATE].value===PreviewerGesture.Toggle){sharedValues[GESTURE_STATE].value=PreviewerGesture.Init;}else{globalThis.eventBus.emit("".concat(pageId,"End"),{velocityX:velocityX,velocityY:velocityY});sharedValues[GESTURE_STATE].value=PreviewerGesture.Init;}}}}',a.__workletHash=0xf94c9bf8f73,a.__location="packageSkylineExamples/examples/album/components/previewer/index.js",a.__worklet=!0,a}()},onBack:function(){var e;(null!==(e=this.sharedValues)&&void 0!==e?e:[])[7].value=n},shouldResponseOnMove:function(){return!0},_shouldResponseOnMove_worklet_factory_:function(){return function(){var e=function(){return!0};return e._closure={},e.asString="function _f(){return true;}",e.__workletHash=0xc11b190ef7c,e.__location="packageSkylineExamples/examples/album/components/previewer/index.js",e.__worklet=!0,e}()}}});
},{isPage:false,isComponent:true,currentFile:'packageSkylineExamples/examples/album/components/previewer/index.js'});require("packageSkylineExamples/examples/album/components/previewer/index.js");;__wxRoute = "packageSkylineExamples/examples/album/components/previewer/preview-home/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/album/components/previewer/preview-home/index.js";define("packageSkylineExamples/examples/album/components/previewer/preview-home/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,t=(e=require("../../../utils/event-bus"))&&e.__esModule?e:{default:e};Component({properties:{imageId:{type:String,value:""},sourcePageId:{type:String,value:""},list:{type:Array,value:[]}},data:{index:0,tempIndex:-1,pretty:!1},observers:{tempIndex:function(e){var a=this.data,i=a.list,n=a.sourcePageId,d=i[e];d&&t.default.emit("".concat(n,"PreviewerChange"),d)}},lifetimes:{attached:function(){var e=this.data.imageId,t=this.data.list,a=0;if(e){var i=t.findIndex((function(t){return t.id===e}));-1!==i&&(a=i)}this.setData({index:a})},detached:function(){t.default.emit("".concat(this.data.sourcePageId,"PreviewerDestroy"))}},methods:{onBeforeRender:function(e){var t=e.detail.index;this.data.index=t,this.setData({tempIndex:t})},onTapImage:function(){this.setData({pretty:!this.data.pretty})},onBack:function(e){this.triggerEvent("back",e.detail)}}});
},{isPage:false,isComponent:true,currentFile:'packageSkylineExamples/examples/album/components/previewer/preview-home/index.js'});require("packageSkylineExamples/examples/album/components/previewer/preview-home/index.js");;__wxRoute = "packageSkylineExamples/examples/album/components/previewer/preview-image/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js";define("packageSkylineExamples/examples/album/components/previewer/preview-image/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,a=require("../../../utils/worklet"),t=0,l=0,i=((e=function(e,t,l){return(0,a.getTiming)(t)(e,{duration:300},l)})._closure={getTiming:a.getTiming},e.asString="function adjustTiming(target,renderer,callback){const{getTiming}=jsThis._closure;{return getTiming(renderer)(target,{duration:300},callback);}}",e.__workletHash=3148052746259,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (31:0)",e.__worklet=!0,e),o=function(){var e=function(e,t,l){return(0,a.getTiming)(t)(e,{duration:200},l)};return e._closure={getTiming:a.getTiming},e.asString="function recoverTiming(target,renderer,callback){const{getTiming}=jsThis._closure;{return getTiming(renderer)(target,{duration:200},callback);}}",e.__workletHash=3600410011445,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (36:0)",e.__worklet=!0,e}();function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";wx.vibrateShort({type:e})}Component({properties:{status:{type:Number,value:0},image:{type:Object,value:{}}},observers:{status:function(e){this.isAttached&&(e!==this.oldStatus&&(this.oldStatus=e,1===e?this.isImgLoaded&&this.triggerEvent("render",this.data.image):this.resetImg()))}},lifetimes:{created:function(){var e=(0,a.getShared)(this.renderer);this.sharedValues=[e(0),e(0),e(1),e(0),e(0),e(1),e(1),e(0),e(0),e(0),e(0),e(0),e(0),e(0),e(1),e(0),e(0),e(1),e(""),e(""),e(this.renderer)]},attached:function(){var e;this.isAttached=!0;var v=this.getPageId(),n=this.data.image.id,r=null!==(e=this.sharedValues)&&void 0!==e?e:[];if(!t||!l){var c=wx.getSystemInfoSync();t=c.screenWidth,l=c.screenHeight}r[19].value=v,r[18].value=n,this.applyAnimatedStyle("#image",function(){var e=function(){return{width:"".concat(r[3].value,"px"),height:"".concat(r[4].value,"px"),transform:"translateX(".concat(r[0].value,"px) translateY(").concat(r[1].value,"px) translateZ(0px) scale(").concat(r[2].value,")")}};return e._closure={sharedValues:r,IMG_WIDTH:3,IMG_HEIGHT:4,MOVE_X:0,MOVE_Y:1,SCALE:2},e.asString='function _f(){const{sharedValues,IMG_WIDTH,IMG_HEIGHT,MOVE_X,MOVE_Y,SCALE}=jsThis._closure;{return{width:"".concat(sharedValues[IMG_WIDTH].value,"px"),height:"".concat(sharedValues[IMG_HEIGHT].value,"px"),transform:"translateX(".concat(sharedValues[MOVE_X].value,"px) translateY(").concat(sharedValues[MOVE_Y].value,"px) translateZ(0px) scale(").concat(sharedValues[SCALE].value,")")};}}',e.__workletHash=5973689107770,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (118:40)",e.__worklet=!0,e}());var u=function(){var e=function(e,a,i){var o=a*e,s=i*e;o>t?(r[8].value=o/2-a/2,r[7].value=t-a/2-o/2):r[8].value=r[7].value=(t-a)/2,s>l?(r[10].value=s/2-i/2,r[9].value=l-i/2-s/2):r[10].value=r[9].value=(l-i)/2};return e._closure={screenWidth:t,sharedValues:r,IMG_MAX_MOVE_X:8,IMG_MIN_MOVE_X:7,screenHeight:l,IMG_MAX_MOVE_Y:10,IMG_MIN_MOVE_Y:9},e.asString="function calcImgLimit(scale,imgWidth,imgHeight){const{screenWidth,sharedValues,IMG_MAX_MOVE_X,IMG_MIN_MOVE_X,screenHeight,IMG_MAX_MOVE_Y,IMG_MIN_MOVE_Y}=jsThis._closure;{var viewWidth=imgWidth*scale;var viewHeight=imgHeight*scale;if(viewWidth>screenWidth){sharedValues[IMG_MAX_MOVE_X].value=viewWidth/2-imgWidth/2;sharedValues[IMG_MIN_MOVE_X].value=screenWidth-imgWidth/2-viewWidth/2;}else{sharedValues[IMG_MAX_MOVE_X].value=sharedValues[IMG_MIN_MOVE_X].value=(screenWidth-imgWidth)/2;}if(viewHeight>screenHeight){sharedValues[IMG_MAX_MOVE_Y].value=viewHeight/2-imgHeight/2;sharedValues[IMG_MIN_MOVE_Y].value=screenHeight-imgHeight/2-viewHeight/2;}else{sharedValues[IMG_MAX_MOVE_Y].value=sharedValues[IMG_MIN_MOVE_Y].value=(screenHeight-imgHeight)/2;}}}",e.__workletHash=5407579956085,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (128:6)",e.__worklet=!0,e}();this.calcImgLimit=u,(0,a.getRunOnUI)(this.renderer)(function(){var e=function(){var e=r[20].value;function c(a){var o=a.moveX,s=void 0===o?null:o,n=a.moveY,c=void 0===n?null:n,m=a.scale,h=void 0===m?null:m,_=a.centerX,g=void 0===_?null:_,d=a.centerY,M=void 0===d?null:d,E=a.withAnimation,p=void 0!==E&&E;if(null!==s&&null!==c){if(!s&&!c)return;var T=r[0].value,I=r[1].value,V=T+s,f=I+c,S=r[7].value,X=r[8].value,Y=r[9].value,w=r[10].value,b=V<=S||V>=X,x=f<=Y||f>=w,A=r[2].value-r[17].value>.001,G=Math.abs(c)-Math.abs(s);if(!r[11].value&&b&&G<0)globalThis.eventBus.emit("".concat(v,"Toggle"),a);else if(!r[11].value&&x&&G>0&&c>0)globalThis.eventBus.emit("".concat(v,"Back"),a);else{var O=r[12].value||T,y=r[13].value||I;if(b){var k=O-T,R=.52*Math.pow(1-Math.min(Math.abs(k)/t,1),2);V=T+Math.ceil(s*R)}if(x&&A){var N=y-I,H=.52*Math.pow(1-Math.min(Math.abs(N)/l,1),2);f=I+Math.ceil(c*H)}if(3===r[11].value){var L=Math.min(Math.max(V,S),X);r[0].value=L,r[12].value=L;var j=Math.min(Math.max(f,Y),w);r[1].value=j,r[13].value=j}else{r[0].value=V;var C=O+s;if(r[12].value=Math.min(Math.max(C,S),X),A){r[1].value=f;var D=y+c;r[13].value=Math.min(Math.max(D,Y),w)}else{var B=Math.min(Math.max(f,Y),w);r[1].value=B,r[13].value=B}r[11].value=1,globalThis.eventBus.emit("".concat(v,"Moving"))}}}else if(null!==h&&null!==g&&null!==M){var W=r[0].value,U=r[1].value,P=r[2].value,$=P*h,K=Math.min(Math.max($,r[6].value),r[5].value),J=K/P,Z=r[3].value,q=r[4].value,z=g-Z/2,F=z-(z-W)*J,Q=M-q/2,ee=Q-(Q-U)*J;if(u(K,Z,q),F=Math.min(Math.max(F,r[7].value),r[8].value),ee=Math.min(Math.max(ee,r[9].value),r[10].value),r[0].value=p?i(F,e):F,r[1].value=p?i(ee,e):ee,p)r[2].value=i(K,e,(function(){r[11].value=0})),r[14].value=K;else{var ae=$;if(Math.abs($-K)>.001){var te=$-P,le=te<0?$/K:K/$;ae=P+te*((te<0?.3:.6)*Math.pow(Math.min(le,1),2))}r[2].value=ae,r[14].value=K}r[12].value=F,r[13].value=ee,r[11].value=2,globalThis.eventBus.emit("".concat(v,"Moving"))}}globalThis.temp["".concat(v).concat(n,"ImgMove")]||(globalThis.temp["".concat(v).concat(n,"ImgMove")]=function(e){return c(e)},globalThis.eventBus.on("".concat(v).concat(n,"Move"),globalThis.temp["".concat(v).concat(n,"ImgMove")])),globalThis.temp["".concat(v).concat(n,"ImgScale")]||(globalThis.temp["".concat(v).concat(n,"ImgScale")]=function(e){return c(e)},globalThis.eventBus.on("".concat(v).concat(n,"Scale"),globalThis.temp["".concat(v).concat(n,"ImgScale")])),globalThis.temp["".concat(v).concat(n,"ImgEnd")]||(globalThis.temp["".concat(v).concat(n,"ImgEnd")]=function(t){r[11].value=0;var l=r[0].value,i=r[12].value,v=Math.abs(l-i)>.001,n=r[1].value,u=r[13].value,m=Math.abs(n-u)>.001,h=r[2].value,_=r[14].value,g=Math.abs(h-_)>.001,d=r[2].value-r[17].value>.001,M=t.velocityX,E=t.velocityY,p=Math.min(Math.abs(M),700),T=Math.min(Math.abs(E),700);if(v||m||g)v&&(r[0].value=o(i,e)),m&&(r[1].value=o(u,e)),g&&(r[2].value=o(_,e),(0,a.getRunOnJS)(r[20].value)(s)());else if(d&&(p>50||T>50)){r[11].value=3;var I=-.0015,V=Math.sign(M),f=Math.sign(E),S=p/1e3,X=T/1e3,Y=16,w=function(){var e=function(){if(3===r[11].value){var e=0,a=0;if(S>0){var t=I*Y+S;if(t>0)e=(S*Y+I*Math.pow(Y,2)/2)*V,S=t;else S=0}if(X>0){var l=I*Y+X;if(l>0)a=(X*Y+I*Math.pow(Y,2)/2)*f,X=l;else X=0}e||a?(c({moveX:e,moveY:a}),setTimeout(w,Y)):r[11].value=0}};return e._closure={sharedValues:r,GESTURE_STATE:11,vx0:S,a:I,t:Y,directionX:V,vy0:X,directionY:f,adjustImg:c,nextTick:w},e.asString="function _f(){const{sharedValues,GESTURE_STATE,vx0,a,t,directionX,vy0,directionY,adjustImg,nextTick}=jsThis._closure;{if(sharedValues[GESTURE_STATE].value!==3)return;var moveX=0;var moveY=0;if(vx0>0){var vx1=a*t+vx0;if(vx1>0){var s=vx0*t+a*Math.pow(t,2)/2;moveX=s*directionX;vx0=vx1;}else{vx0=0;}}if(vy0>0){var vy1=a*t+vy0;if(vy1>0){var _s=vy0*t+a*Math.pow(t,2)/2;moveY=_s*directionY;vy0=vy1;}else{vy0=0;}}if(moveX||moveY){adjustImg({moveX:moveX,moveY:moveY});setTimeout(nextTick,t);}else{sharedValues[GESTURE_STATE].value=0;}}}",e.__workletHash=0xe8b1cec0441,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (340:31)",e.__worklet=!0,e}();setTimeout(w,Y)}},globalThis.eventBus.on("".concat(v).concat(n,"End"),globalThis.temp["".concat(v).concat(n,"ImgEnd")])),globalThis.temp["".concat(v).concat(n,"ImgDoubleTap")]||(globalThis.temp["".concat(v).concat(n,"ImgDoubleTap")]=function(e){return c(e)},globalThis.eventBus.on("".concat(v).concat(n,"DoubleTap"),globalThis.temp["".concat(v).concat(n,"ImgDoubleTap")]))};return e._closure={sharedValues:r,RENDERER:20,MOVE_X:0,MOVE_Y:1,IMG_MIN_MOVE_X:7,IMG_MAX_MOVE_X:8,IMG_MIN_MOVE_Y:9,IMG_MAX_MOVE_Y:10,SCALE:2,INIT_SCALE:17,GESTURE_STATE:11,pageId:v,TEMP_MOVE_X:12,TEMP_MOVE_Y:13,screenWidth:t,screenHeight:l,IMG_MIN_SCALE:6,IMG_MAX_SCALE:5,IMG_WIDTH:3,IMG_HEIGHT:4,calcImgLimit:u,adjustTiming:i,TEMP_SCALE:14,id:n,recoverTiming:o,getRunOnJS:a.getRunOnJS,vibrateShort:s},e.asString='function _f(){const{sharedValues,RENDERER,MOVE_X,MOVE_Y,IMG_MIN_MOVE_X,IMG_MAX_MOVE_X,IMG_MIN_MOVE_Y,IMG_MAX_MOVE_Y,SCALE,INIT_SCALE,GESTURE_STATE,pageId,TEMP_MOVE_X,TEMP_MOVE_Y,screenWidth,screenHeight,IMG_MIN_SCALE,IMG_MAX_SCALE,IMG_WIDTH,IMG_HEIGHT,calcImgLimit,adjustTiming,TEMP_SCALE,id,recoverTiming,getRunOnJS,vibrateShort}=jsThis._closure;{var renderer=sharedValues[RENDERER].value;function adjustImg(args){var _args$moveX=args.moveX,moveX=_args$moveX===void 0?null:_args$moveX,_args$moveY=args.moveY,moveY=_args$moveY===void 0?null:_args$moveY,_args$scale=args.scale,scale=_args$scale===void 0?null:_args$scale,_args$centerX=args.centerX,centerX=_args$centerX===void 0?null:_args$centerX,_args$centerY=args.centerY,centerY=_args$centerY===void 0?null:_args$centerY,_args$withAnimation=args.withAnimation,withAnimation=_args$withAnimation===void 0?false:_args$withAnimation;if(moveX!==null&&moveY!==null){if(!moveX&&!moveY)return;var oldMoveX=sharedValues[MOVE_X].value;var oldMoveY=sharedValues[MOVE_Y].value;var newMoveX=oldMoveX+moveX;var newMoveY=oldMoveY+moveY;var minMoveX=sharedValues[IMG_MIN_MOVE_X].value;var maxMoveX=sharedValues[IMG_MAX_MOVE_X].value;var minMoveY=sharedValues[IMG_MIN_MOVE_Y].value;var maxMoveY=sharedValues[IMG_MAX_MOVE_Y].value;var isReachXEdge=newMoveX<=minMoveX||newMoveX>=maxMoveX;var isReachYEdge=newMoveY<=minMoveY||newMoveY>=maxMoveY;var isScaleBigger=sharedValues[SCALE].value-sharedValues[INIT_SCALE].value>0.001;var moveGap=Math.abs(moveY)-Math.abs(moveX);if(!sharedValues[GESTURE_STATE].value&&isReachXEdge&&moveGap<0){globalThis.eventBus.emit("".concat(pageId,"Toggle"),args);}else if(!sharedValues[GESTURE_STATE].value&&isReachYEdge&&moveGap>0&&moveY>0){globalThis.eventBus.emit("".concat(pageId,"Back"),args);}else{var tempOldMoveX=sharedValues[TEMP_MOVE_X].value||oldMoveX;var tempOldMoveY=sharedValues[TEMP_MOVE_Y].value||oldMoveY;if(isReachXEdge){var offset=tempOldMoveX-oldMoveX;var f=0.52*Math.pow(1-Math.min(Math.abs(offset)/screenWidth,1),2);newMoveX=oldMoveX+Math.ceil(moveX*f);}if(isReachYEdge&&isScaleBigger){var _offset=tempOldMoveY-oldMoveY;var _f2=0.52*Math.pow(1-Math.min(Math.abs(_offset)/screenHeight,1),2);newMoveY=oldMoveY+Math.ceil(moveY*_f2);}if(sharedValues[GESTURE_STATE].value===3){var tempNewMoveX=Math.min(Math.max(newMoveX,minMoveX),maxMoveX);sharedValues[MOVE_X].value=tempNewMoveX;sharedValues[TEMP_MOVE_X].value=tempNewMoveX;var tempNewMoveY=Math.min(Math.max(newMoveY,minMoveY),maxMoveY);sharedValues[MOVE_Y].value=tempNewMoveY;sharedValues[TEMP_MOVE_Y].value=tempNewMoveY;}else{sharedValues[MOVE_X].value=newMoveX;var _tempNewMoveX=tempOldMoveX+moveX;sharedValues[TEMP_MOVE_X].value=Math.min(Math.max(_tempNewMoveX,minMoveX),maxMoveX);if(isScaleBigger){sharedValues[MOVE_Y].value=newMoveY;var _tempNewMoveY=tempOldMoveY+moveY;sharedValues[TEMP_MOVE_Y].value=Math.min(Math.max(_tempNewMoveY,minMoveY),maxMoveY);}else{var _tempNewMoveY2=Math.min(Math.max(newMoveY,minMoveY),maxMoveY);sharedValues[MOVE_Y].value=_tempNewMoveY2;sharedValues[TEMP_MOVE_Y].value=_tempNewMoveY2;}sharedValues[GESTURE_STATE].value=1;globalThis.eventBus.emit("".concat(pageId,"Moving"));}}}else if(scale!==null&&centerX!==null&&centerY!==null){var _oldMoveX=sharedValues[MOVE_X].value;var _oldMoveY=sharedValues[MOVE_Y].value;var oldScale=sharedValues[SCALE].value;var newScale=oldScale*scale;var tempNewScale=Math.min(Math.max(newScale,sharedValues[IMG_MIN_SCALE].value),sharedValues[IMG_MAX_SCALE].value);var realScale=tempNewScale/oldScale;var imgWidth=sharedValues[IMG_WIDTH].value;var imgHeight=sharedValues[IMG_HEIGHT].value;var gapX=centerX-imgWidth/2;var _newMoveX=gapX-(gapX-_oldMoveX)*realScale;var gapY=centerY-imgHeight/2;var _newMoveY=gapY-(gapY-_oldMoveY)*realScale;calcImgLimit(tempNewScale,imgWidth,imgHeight);_newMoveX=Math.min(Math.max(_newMoveX,sharedValues[IMG_MIN_MOVE_X].value),sharedValues[IMG_MAX_MOVE_X].value);_newMoveY=Math.min(Math.max(_newMoveY,sharedValues[IMG_MIN_MOVE_Y].value),sharedValues[IMG_MAX_MOVE_Y].value);sharedValues[MOVE_X].value=withAnimation?adjustTiming(_newMoveX,renderer):_newMoveX;sharedValues[MOVE_Y].value=withAnimation?adjustTiming(_newMoveY,renderer):_newMoveY;if(withAnimation){sharedValues[SCALE].value=adjustTiming(tempNewScale,renderer,function(){sharedValues[GESTURE_STATE].value=0;});sharedValues[TEMP_SCALE].value=tempNewScale;}else{var calcNewScale=newScale;if(Math.abs(newScale-tempNewScale)>0.001){var gap=newScale-oldScale;var dampingLimit=gap<0?newScale/tempNewScale:tempNewScale/newScale;var _f3=(gap<0?0.3:0.6)*Math.pow(Math.min(dampingLimit,1),2);calcNewScale=oldScale+gap*_f3;}sharedValues[SCALE].value=calcNewScale;sharedValues[TEMP_SCALE].value=tempNewScale;}sharedValues[TEMP_MOVE_X].value=_newMoveX;sharedValues[TEMP_MOVE_Y].value=_newMoveY;sharedValues[GESTURE_STATE].value=2;globalThis.eventBus.emit("".concat(pageId,"Moving"));}}if(!globalThis.temp["".concat(pageId).concat(id,"ImgMove")]){globalThis.temp["".concat(pageId).concat(id,"ImgMove")]=function(args){return adjustImg(args);};globalThis.eventBus.on("".concat(pageId).concat(id,"Move"),globalThis.temp["".concat(pageId).concat(id,"ImgMove")]);}if(!globalThis.temp["".concat(pageId).concat(id,"ImgScale")]){globalThis.temp["".concat(pageId).concat(id,"ImgScale")]=function(args){return adjustImg(args);};globalThis.eventBus.on("".concat(pageId).concat(id,"Scale"),globalThis.temp["".concat(pageId).concat(id,"ImgScale")]);}if(!globalThis.temp["".concat(pageId).concat(id,"ImgEnd")]){globalThis.temp["".concat(pageId).concat(id,"ImgEnd")]=function(args){sharedValues[GESTURE_STATE].value=0;var moveX=sharedValues[MOVE_X].value;var targetMoveX=sharedValues[TEMP_MOVE_X].value;var needRecoverX=Math.abs(moveX-targetMoveX)>0.001;var moveY=sharedValues[MOVE_Y].value;var targetMoveY=sharedValues[TEMP_MOVE_Y].value;var needRecoverY=Math.abs(moveY-targetMoveY)>0.001;var scale=sharedValues[SCALE].value;var targetScale=sharedValues[TEMP_SCALE].value;var needRecoverScale=Math.abs(scale-targetScale)>0.001;var isScaleBigger=sharedValues[SCALE].value-sharedValues[INIT_SCALE].value>0.001;var velocityX=args.velocityX,velocityY=args.velocityY;var vx=Math.min(Math.abs(velocityX),700);var vy=Math.min(Math.abs(velocityY),700);if(needRecoverX||needRecoverY||needRecoverScale){if(needRecoverX)sharedValues[MOVE_X].value=recoverTiming(targetMoveX,renderer);if(needRecoverY)sharedValues[MOVE_Y].value=recoverTiming(targetMoveY,renderer);if(needRecoverScale){sharedValues[SCALE].value=recoverTiming(targetScale,renderer);getRunOnJS(sharedValues[RENDERER].value)(vibrateShort)();}}else if(isScaleBigger&&(vx>50||vy>50)){sharedValues[GESTURE_STATE].value=3;var a=-0.0015;var directionX=Math.sign(velocityX);var directionY=Math.sign(velocityY);var vx0=vx/1000;var vy0=vy/1000;var t=16;var nextTick=function(){var _f=function _f(){if(sharedValues[GESTURE_STATE].value!==3)return;var moveX=0;var moveY=0;if(vx0>0){var vx1=a*t+vx0;if(vx1>0){var s=vx0*t+a*Math.pow(t,2)/2;moveX=s*directionX;vx0=vx1;}else{vx0=0;}}if(vy0>0){var vy1=a*t+vy0;if(vy1>0){var _s=vy0*t+a*Math.pow(t,2)/2;moveY=_s*directionY;vy0=vy1;}else{vy0=0;}}if(moveX||moveY){adjustImg({moveX:moveX,moveY:moveY});setTimeout(nextTick,t);}else{sharedValues[GESTURE_STATE].value=0;}};_f._closure={sharedValues:sharedValues,GESTURE_STATE:GESTURE_STATE,vx0:vx0,a:a,t:t,directionX:directionX,vy0:vy0,directionY:directionY,adjustImg:adjustImg,nextTick:nextTick};_f.asString="function _f(){const{sharedValues,GESTURE_STATE,vx0,a,t,directionX,vy0,directionY,adjustImg,nextTick}=jsThis._closure;{if(sharedValues[GESTURE_STATE].value!==3)return;var moveX=0;var moveY=0;if(vx0>0){var vx1=a*t+vx0;if(vx1>0){var s=vx0*t+a*Math.pow(t,2)/2;moveX=s*directionX;vx0=vx1;}else{vx0=0;}}if(vy0>0){var vy1=a*t+vy0;if(vy1>0){var _s=vy0*t+a*Math.pow(t,2)/2;moveY=_s*directionY;vy0=vy1;}else{vy0=0;}}if(moveX||moveY){adjustImg({moveX:moveX,moveY:moveY});setTimeout(nextTick,t);}else{sharedValues[GESTURE_STATE].value=0;}}}";_f.__workletHash=15990648472641;_f.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (340:31)";_f.__worklet=true;return _f;}();setTimeout(nextTick,t);}};globalThis.eventBus.on("".concat(pageId).concat(id,"End"),globalThis.temp["".concat(pageId).concat(id,"ImgEnd")]);}if(!globalThis.temp["".concat(pageId).concat(id,"ImgDoubleTap")]){globalThis.temp["".concat(pageId).concat(id,"ImgDoubleTap")]=function(args){return adjustImg(args);};globalThis.eventBus.on("".concat(pageId).concat(id,"DoubleTap"),globalThis.temp["".concat(pageId).concat(id,"ImgDoubleTap")]);}}}',e.__workletHash=2227153900162,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (150:32)",e.__worklet=!0,e}())()},detached:function(){this.isAttached=!1;var e=this.data.image.id,t=this.getPageId();(0,a.getRunOnUI)(this.renderer)(function(){var a=function(){["Move","Scale","End","DoubleTap"].forEach(function(){var a=function(a){var l="".concat(t).concat(e,"Img").concat(a);globalThis.temp[l]&&(globalThis.eventBus.off("".concat(t).concat(e).concat(a),globalThis.temp[l]),delete globalThis.temp[l])};return a._closure={pageId:t,id:e},a.asString='function _f(item){const{pageId,id}=jsThis._closure;{var globalKey="".concat(pageId).concat(id,"Img").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(id).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}',a.__workletHash=0xa0dc876bade,a.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (403:27)",a.__worklet=!0,a}())};return a._closure={pageId:t,id:e},a.asString='function _f(){const{pageId,id}=jsThis._closure;{var removeList=[\'Move\',\'Scale\',\'End\',\'DoubleTap\'];removeList.forEach(function(){var _f=function _f(item){var globalKey="".concat(pageId).concat(id,"Img").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(id).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}};_f._closure={pageId:pageId,id:id};_f.asString="function _f(item){const{pageId,id}=jsThis._closure;{var globalKey=\\"\\".concat(pageId).concat(id,\\"Img\\").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off(\\"\\".concat(pageId).concat(id).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}";_f.__workletHash=11054314076894;_f.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (403:27)";_f.__worklet=true;return _f;}());}}',a.__workletHash=9872916859513,a.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (400:32)",a.__worklet=!0,a}())()}},methods:{resetImg:function(){var e,a=null!==(e=this.sharedValues)&&void 0!==e?e:[],t=a[15].value,l=a[16].value,i=a[17].value;this.calcImgLimit(i,a[3].value,a[4].value),a[0].value=t,a[1].value=l,a[12].value=t,a[13].value=l,a[2].value=i,a[14].value=i},onImgLoad:function(e){var a,i=e.detail,o=i.width,s=i.height,v=null!==(a=this.sharedValues)&&void 0!==a?a:[];if(!t||!l){var n=wx.getSystemInfoSync();t=n.screenWidth,l=n.screenHeight}var r=t/l;if(v[3].value=o,v[4].value=s,o&&s){var c=1,u=0,m=0;if(o/s>r){u=(t-o)/2;var h=s*(c=t/o);m=(l-h)/2-(s-h)/2,v[5].value=o>t?2:10,v[6].value=o>t?t/o:1}else{m=(l-s)/2;var _=o*(c=l/s);u=(t-_)/2-(o-_)/2,v[5].value=s>l?2:10,v[6].value=s>l?l/s:1}this.calcImgLimit(c,o,s),v[0].value=u,v[1].value=m,v[12].value=u,v[13].value=m,v[2].value=c,v[14].value=c,v[15].value=u,v[16].value=m,v[17].value=c,this.isImgLoaded=!0,1===this.data.status&&this.triggerEvent("render",this.data.image)}},onDoubleTap:function(e){var a,t=null!==(a=this.sharedValues)&&void 0!==a?a:[],l=t[2].value,i=t[6].value;globalThis.eventBus.emit("".concat(t[19].value).concat(t[18].value,"DoubleTap"),{scale:l<=i?2:1e-4,centerX:e.absoluteX,centerY:e.absoluteY,withAnimation:!0})},_onDoubleTap_worklet_factory_:function(){var e=this;return function(){var a=function(a){var t,l=null!==(t=e.sharedValues)&&void 0!==t?t:[],i=l[2].value,o=l[6].value;globalThis.eventBus.emit("".concat(l[19].value).concat(l[18].value,"DoubleTap"),{scale:i<=o?2:1e-4,centerX:a.absoluteX,centerY:a.absoluteY,withAnimation:!0})};return a._closure={_this:{sharedValues:e.sharedValues},SCALE:2,IMG_MIN_SCALE:6,PAGE_ID:19,CURRENT_ID:18},a.asString='function _f(evt){const{_this,SCALE,IMG_MIN_SCALE,PAGE_ID,CURRENT_ID}=jsThis._closure;{var _this$sharedValues4;var sharedValues=(_this$sharedValues4=_this.sharedValues)!==null&&_this$sharedValues4!==void 0?_this$sharedValues4:[];var currentScale=sharedValues[SCALE].value;var minScale=sharedValues[IMG_MIN_SCALE].value;globalThis.eventBus.emit("".concat(sharedValues[PAGE_ID].value).concat(sharedValues[CURRENT_ID].value,"DoubleTap"),{scale:currentScale<=minScale?2:0.0001,centerX:evt.absoluteX,centerY:evt.absoluteY,withAnimation:true});}}',a.__workletHash=0xdb01fa57bd0,a.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js",a.__worklet=!0,a}()}}});
},{isPage:false,isComponent:true,currentFile:'packageSkylineExamples/examples/album/components/previewer/preview-image/index.js'});require("packageSkylineExamples/examples/album/components/previewer/preview-image/index.js");;__wxRoute = "packageSkylineExamples/examples/album/components/previewer/preview-list/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js";define("packageSkylineExamples/examples/album/components/previewer/preview-list/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../../../../../@babel/runtime/helpers/regeneratorRuntime"),a=require("../../../../../../@babel/runtime/helpers/asyncToGenerator"),t=require("../../../utils/worklet"),n=1,r=2,o=3;Component({properties:{index:{type:Number,value:0},list:{type:Array,value:[]}},data:{currentIndex:-99,needSwiperAnimation:!0},observers:{list:function(e){var a,t=this.data.index,n=e[t];n&&((null!==(a=this.sharedValues)&&void 0!==a?a:[])[1].value=n.id,this.toggleImage(t,!0))},index:function(e){var a=this.data.list.length;if(a)if(e!==this.data.currentIndex&&e>=0&&e<a)this.toggleImage(e,!0);else{var t=this.data.list[e];t&&t.id===this.currentRenderImage&&this.onImageRender({detail:t})}}},lifetimes:{created:function(){var e=(0,t.getShared)(this.renderer);this.sharedValues=[e(0),e(""),e(this.renderer)]},attached:function(){var i=this;return a(e().mark((function a(){var l,s,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=i.getPageId(),c=null!==(l=i.sharedValues)&&void 0!==l?l:[],(0,t.getRunOnUI)(i.renderer)((a=void 0,(a=function(){globalThis.temp["".concat(s,"PreviewerBack")]||(globalThis.temp["".concat(s,"PreviewerBack")]=function(){return c[0].value=o},globalThis.eventBus.on("".concat(s,"Back"),globalThis.temp["".concat(s,"PreviewerBack")])),globalThis.temp["".concat(s,"PreviewerToggle")]||(globalThis.temp["".concat(s,"PreviewerToggle")]=function(){return c[0].value=r},globalThis.eventBus.on("".concat(s,"Toggle"),globalThis.temp["".concat(s,"PreviewerToggle")])),globalThis.temp["".concat(s,"PreviewerMoving")]||(globalThis.temp["".concat(s,"PreviewerMoving")]=function(){return c[0].value=n},globalThis.eventBus.on("".concat(s,"Moving"),globalThis.temp["".concat(s,"PreviewerMoving")])),globalThis.temp["".concat(s,"PreviewerMove")]||(globalThis.temp["".concat(s,"PreviewerMove")]=function(e){var a=c[1].value;globalThis.eventBus.emit("".concat(s).concat(a,"Move"),e)},globalThis.eventBus.on("".concat(s,"Move"),globalThis.temp["".concat(s,"PreviewerMove")])),globalThis.temp["".concat(s,"PreviewerScale")]||(globalThis.temp["".concat(s,"PreviewerScale")]=function(e){var a=c[1].value;globalThis.eventBus.emit("".concat(s).concat(a,"Scale"),e)},globalThis.eventBus.on("".concat(s,"Scale"),globalThis.temp["".concat(s,"PreviewerScale")])),globalThis.temp["".concat(s,"PreviewerEnd")]||(globalThis.temp["".concat(s,"PreviewerEnd")]=function(e){var a=c[1].value;globalThis.eventBus.emit("".concat(s).concat(a,"End"),e)},globalThis.eventBus.on("".concat(s,"End"),globalThis.temp["".concat(s,"PreviewerEnd")]))})._closure={pageId:s,sharedValues:c,GESTURE_STATE:0,PreviewerGesture:{Back:o,Toggle:r,Moving:n},CURRENT_ID:1},a.asString='function _f(){const{pageId,sharedValues,GESTURE_STATE,PreviewerGesture,CURRENT_ID}=jsThis._closure;{if(!globalThis.temp["".concat(pageId,"PreviewerBack")]){globalThis.temp["".concat(pageId,"PreviewerBack")]=function(){return sharedValues[GESTURE_STATE].value=PreviewerGesture.Back;};globalThis.eventBus.on("".concat(pageId,"Back"),globalThis.temp["".concat(pageId,"PreviewerBack")]);}if(!globalThis.temp["".concat(pageId,"PreviewerToggle")]){globalThis.temp["".concat(pageId,"PreviewerToggle")]=function(){return sharedValues[GESTURE_STATE].value=PreviewerGesture.Toggle;};globalThis.eventBus.on("".concat(pageId,"Toggle"),globalThis.temp["".concat(pageId,"PreviewerToggle")]);}if(!globalThis.temp["".concat(pageId,"PreviewerMoving")]){globalThis.temp["".concat(pageId,"PreviewerMoving")]=function(){return sharedValues[GESTURE_STATE].value=PreviewerGesture.Moving;};globalThis.eventBus.on("".concat(pageId,"Moving"),globalThis.temp["".concat(pageId,"PreviewerMoving")]);}if(!globalThis.temp["".concat(pageId,"PreviewerMove")]){globalThis.temp["".concat(pageId,"PreviewerMove")]=function(args){var currentId=sharedValues[CURRENT_ID].value;globalThis.eventBus.emit("".concat(pageId).concat(currentId,"Move"),args);};globalThis.eventBus.on("".concat(pageId,"Move"),globalThis.temp["".concat(pageId,"PreviewerMove")]);}if(!globalThis.temp["".concat(pageId,"PreviewerScale")]){globalThis.temp["".concat(pageId,"PreviewerScale")]=function(args){var currentId=sharedValues[CURRENT_ID].value;globalThis.eventBus.emit("".concat(pageId).concat(currentId,"Scale"),args);};globalThis.eventBus.on("".concat(pageId,"Scale"),globalThis.temp["".concat(pageId,"PreviewerScale")]);}if(!globalThis.temp["".concat(pageId,"PreviewerEnd")]){globalThis.temp["".concat(pageId,"PreviewerEnd")]=function(args){var currentId=sharedValues[CURRENT_ID].value;globalThis.eventBus.emit("".concat(pageId).concat(currentId,"End"),args);};globalThis.eventBus.on("".concat(pageId,"End"),globalThis.temp["".concat(pageId,"PreviewerEnd")]);}}}',a.__workletHash=7819198461238,a.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js (76:32)",a.__worklet=!0,a))();case 3:case"end":return e.stop()}var a}),a)})))()},detached:function(){var e,a=this.getPageId();(0,t.getRunOnUI)(this.renderer)(((e=function(){["Back","Toggle","Moving","Move","Scale","End"].forEach(function(){var e=function(e){var t="".concat(a,"Previewer").concat(e);globalThis.temp[t]&&(globalThis.eventBus.off("".concat(a).concat(e),globalThis.temp[t]),delete globalThis.temp[t])};return e._closure={pageId:a},e.asString='function _f(item){const{pageId}=jsThis._closure;{var globalKey="".concat(pageId,"Previewer").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}',e.__workletHash=0xe3509632361,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js (133:27)",e.__worklet=!0,e}())})._closure={pageId:a},e.asString='function _f(){const{pageId}=jsThis._closure;{var removeList=[\'Back\',\'Toggle\',\'Moving\',\'Move\',\'Scale\',\'End\'];removeList.forEach(function(){var _f=function _f(item){var globalKey="".concat(pageId,"Previewer").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}};_f._closure={pageId:pageId};_f.asString="function _f(item){const{pageId}=jsThis._closure;{var globalKey=\\"\\".concat(pageId,\\"Previewer\\").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off(\\"\\".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}";_f.__workletHash=15620953547617;_f.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js (133:27)";_f.__worklet=true;return _f;}());}}',e.__workletHash=0xb17a266291b,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js (130:32)",e.__worklet=!0,e))()}},methods:{toggleImage:function(t){var n=arguments,r=this;return a(e().mark((function a(){var o,i,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.length>1&&void 0!==n[1]&&n[1],l=r.data.list[t]){e.next=4;break}return e.abrupt("return");case 4:(null!==(o=r.sharedValues)&&void 0!==o?o:[])[1].value=l.id,r.setData({currentIndex:t,needSwiperAnimation:!i}),r.data.index=t,r.triggerEvent("beforerender",{index:t,image:l});case 9:case"end":return e.stop()}}),a)})))()},onImageRender:function(e){var a=this.data.list[this.data.currentIndex]||{};e.detail.id===a.id&&(this.currentRenderImage=a.id)},onTapImage:function(){(0,t.getRunOnJS)(this.sharedValues[2].value)(this.triggerEvent.bind(this))("tapimage")},_onTapImage_worklet_factory_:function(){var e,a=this,n=this.triggerEvent.bind(this);return(e=function(){(0,t.getRunOnJS)(a.sharedValues[2].value)(n)("tapimage")})._closure={getRunOnJS:t.getRunOnJS,_this3:{sharedValues:a.sharedValues},RENDERER:2,_triggerEvent_:n},e.asString="function _f(){const{getRunOnJS,_this3,RENDERER,_triggerEvent_}=jsThis._closure;{getRunOnJS(_this3.sharedValues[RENDERER].value)(_triggerEvent_)('tapimage');}}",e.__workletHash=0xf774f2662af,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js",e.__worklet=!0,e},shouldResponseOnMove:function(){var e;return(null!==(e=this.sharedValues)&&void 0!==e?e:[])[0].value===r},_shouldResponseOnMove_worklet_factory_:function(){var e,a=this;return(e=function(){var e;return(null!==(e=a.sharedValues)&&void 0!==e?e:[])[0].value===r})._closure={_this4:{sharedValues:a.sharedValues},GESTURE_STATE:0,PreviewerGesture:{Toggle:r}},e.asString="function _f(){const{_this4,GESTURE_STATE,PreviewerGesture}=jsThis._closure;{var _this$sharedValues3;var sharedValues=(_this$sharedValues3=_this4.sharedValues)!==null&&_this$sharedValues3!==void 0?_this$sharedValues3:[];return sharedValues[GESTURE_STATE].value===PreviewerGesture.Toggle;}}",e.__workletHash=8655524540342,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js",e.__worklet=!0,e},onSwiperChange:function(e){var a=e.detail,t=a.current;"touch"===a.source&&this.toggleImage(t,!1)}}});
},{isPage:false,isComponent:true,currentFile:'packageSkylineExamples/examples/album/components/previewer/preview-list/index.js'});require("packageSkylineExamples/examples/album/components/previewer/preview-list/index.js");;__wxRoute = "packageSkylineExamples/examples/album/pages/preview/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/album/pages/preview/index.js";define("packageSkylineExamples/examples/album/pages/preview/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../../utils/store");Component({properties:{imageid:{type:String,value:""},sourcepageid:{type:String,value:""}},data:{imageId:"",sourcePageId:"",list:[]},lifetimes:{attached:function(){var t=this.data,i=decodeURIComponent(t.imageid||""),a=decodeURIComponent(t.sourcepageid||""),d=(0,e.getAlbum)();this.setData({imageId:i,sourcePageId:a,list:d})}}});
},{isPage:true,isComponent:true,currentFile:'packageSkylineExamples/examples/album/pages/preview/index.js'});require("packageSkylineExamples/examples/album/pages/preview/index.js");