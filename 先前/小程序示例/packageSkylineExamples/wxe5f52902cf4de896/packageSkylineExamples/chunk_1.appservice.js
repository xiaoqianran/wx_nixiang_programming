__wxCodeSpace__.batchAddCompiledTemplate(function(G,R,D,Q,gdc,X,Y,Z,RG={}){var P=RG.P||function(a){return typeof a==='function'?a:()=>{}};return {'packageSkylineExamples/examples/album/components/album/album-image/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"src":new Array(1),"image":new Array(1)},K=U===true,d=(C)=>{},c=(C,T,E)=>{E("image",{},(N,C)=>{if(C)L(N,"img");if(C||K||U.src)O(N,"src",D.src);A["src"][0]=(D,E,T)=>{O(N,"src",D.src);E(N)};if(C)O(N,"mode","aspectFill");if(C)O(N,"bindload","onImageLoad")},d)},b=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"img-cut-cnt")},c)},a=(C,T,E)=>{E("share-element",{},(N,C)=>{if(C)L(N,"share-element");if(C||K||Z(U.image,"id"))O(N,"key",X(D.image).id);A["image"][0]=(D,E,T)=>{O(N,"key",X(D.image).id);E(N)};if(C)O(N,"rect-tween-type","cubic-bezier(0.4, 0, 0.2, 1.0)");if(C)R.wl(N,"onframe","onFrame")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),'packageSkylineExamples/examples/album/components/album/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"scrollIntoView":new Array(1)},K=U===true,c,d,e,f,g,j,k,l,m,n,q=(C)=>{},p=(C,T,E)=>{E("album-image",{},(N,C)=>{if(C)L(N,"album-image");if(C||K||l)O(N,"image",j);if(C||K||Z(l,"src"))O(N,"src",X(j).src);if(C||K||U.imageWidth)O(N,"width",D.imageWidth);if(C||K||U.imageWidth)O(N,"height",D.imageWidth);if(C||K||Z(l,"index"))R.d(N,"index",X(j).index);if(C)O(N,"bindtap","onTapImage")},q)},o=(C,$A,$B,$C,$D,$E,T,E)=>{j=$A,k=$B,l=$C,m=$D,n=$E;E("view",{},(N,C)=>{if(C||K||!!(U.imageWidth||U.imageWidth||U.imageMargin)||undefined)R.y(N,"width: "+Y(D.imageWidth)+"px; height: "+Y(D.imageWidth)+"px; margin-left: "+Y(D.imageMargin)+"px;")},p)},i=(C,T,E,B,F)=>{F(X(c).list,"id",U?Z(e,"list"):undefined,[...g,"list"],o)},h=(C,$A,$B,$C,$D,$E,T,E)=>{c=$A,d=$B,e=$C,f=$D,g=$E;E("view",{},(N,C)=>{if(C||K||!!f||undefined)R.i(N,"line-"+Y(d));if(C)L(N,"line");if(C||K||!!U.imageMargin||undefined)R.y(N,"padding-bottom: "+Y(D.imageMargin)+"px;")},i)},b=(C,T,E,B,F)=>{F(D.showList,"index",U?U.showList:undefined,[0,"showList"],h)},a=(C,T,E)=>{E("scroll-view",{},(N,C)=>{if(C)L(N,"scroll-list");if(C||K||!!U.imageMargin||undefined)R.y(N,"padding-top: "+Y(D.imageMargin)+"px;");if(C||K||undefined)O(N,"scroll-y",true);if(C)O(N,"type","list");if(C||K||U.scrollIntoView)O(N,"scroll-into-view",D.scrollIntoView);A["scrollIntoView"][0]=(D,E,T)=>{O(N,"scroll-into-view",D.scrollIntoView);E(N)};if(C)O(N,"scroll-into-view-alignment","nearest")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),'packageSkylineExamples/examples/album/pages/album/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"imageMargin":new Array(1),"lineLimit":new Array(1),"list":new Array(1),"imageWidth":new Array(1)},K=U===true,d=(C)=>{},c=(C,T,E)=>{E("navigation-bar",{},(N,C)=>{if(C)O(N,"title","相册图片预览");if(C||K||undefined)O(N,"back",true)},d)},e=(C)=>{},f=(C)=>{},b=(C,T,E)=>{E("share-element",{},(N,C)=>{if(C)O(N,"key","navigation-bar")},c);E("album",{},(N,C)=>{if(C)L(N,"album");if(C||K||U.list)O(N,"list",D.list);A["list"][0]=(D,E,T)=>{O(N,"list",D.list);E(N)};if(C||K||U.imageWidth)O(N,"imageWidth",D.imageWidth);A["imageWidth"][0]=(D,E,T)=>{O(N,"imageWidth",D.imageWidth);E(N)};if(C||K||U.imageMargin)O(N,"imageMargin",D.imageMargin);A["imageMargin"][0]=(D,E,T)=>{O(N,"imageMargin",D.imageMargin);E(N)};if(C||K||U.lineLimit)O(N,"lineLimit",D.lineLimit);A["lineLimit"][0]=(D,E,T)=>{O(N,"lineLimit",D.lineLimit);E(N)}},e);E("view",{},(N,C)=>{if(C)L(N,"safe-area-inset-bottom")},f)},a=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"cnt")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),}});;__wxRoute = "packageSkylineExamples/examples/album/components/album/album-image/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/album/components/album/album-image/index.js";define("packageSkylineExamples/examples/album/components/album/album-image/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,a=(e=require("../../../utils/event-bus"))&&e.__esModule?e:{default:e},t=require("../../../utils/worklet");var i=0,s=0;Component({properties:{image:{type:Object,value:{}},src:{type:String,value:""},width:{type:Number,value:0},height:{type:Number,value:0}},observers:{"width, height":function(){this.renderImage()}},lifetimes:{created:function(){var e=(0,t.getShared)(this.renderer);this.sharedValues=[e(0),e(0),e(0),e(0),e(0),e(0),e(0),e(!1)]},attached:function(){var e,i,s=this,u=this.getPageId(),r="".concat(u,"-").concat(this.data.image.id),o=null!==(e=this.sharedValues)&&void 0!==e?e:[];this.uniqueId=r,(0,t.getRunOnUI)(this.renderer)(((i=function(){globalThis.temp["".concat(r,"CustomRouteBack")]||(globalThis.temp["".concat(r,"CustomRouteBack")]=function(e){if(o[7].value){var a=o[4].value,t=o[5].value,i=e.scale;o[2].value=a*i,o[3].value=t*i}},globalThis.eventBus.on("".concat(u,"CustomRouteBack"),globalThis.temp["".concat(r,"CustomRouteBack")]))})._closure={uniqueId:r,sharedValues:o,IN_PREVIEW:7,IMAGE_TARGET_WIDTH:4,IMAGE_TARGET_HEIGHT:5,IMAGE_WIDTH:2,IMAGE_HEIGHT:3,pageId:u},i.asString='function _f(){const{uniqueId,sharedValues,IN_PREVIEW,IMAGE_TARGET_WIDTH,IMAGE_TARGET_HEIGHT,IMAGE_WIDTH,IMAGE_HEIGHT,pageId}=jsThis._closure;{if(!globalThis.temp["".concat(uniqueId,"CustomRouteBack")]){globalThis.temp["".concat(uniqueId,"CustomRouteBack")]=function(args){if(!sharedValues[IN_PREVIEW].value)return;var targetImageWidth=sharedValues[IMAGE_TARGET_WIDTH].value;var targetImageHeight=sharedValues[IMAGE_TARGET_HEIGHT].value;var scale=args.scale;sharedValues[IMAGE_WIDTH].value=targetImageWidth*scale;sharedValues[IMAGE_HEIGHT].value=targetImageHeight*scale;};globalThis.eventBus.on("".concat(pageId,"CustomRouteBack"),globalThis.temp["".concat(uniqueId,"CustomRouteBack")]);}}}',i.__workletHash=0xd5316d3a22a,i.__location="packageSkylineExamples/examples/album/components/album/album-image/index.js (64:32)",i.__worklet=!0,i))(),this.applyAnimatedStyle(".img",function(){var e=function(){return{width:"".concat(o[2].value,"px"),height:"".concat(o[3].value,"px")}};return e._closure={sharedValues:o,IMAGE_WIDTH:2,IMAGE_HEIGHT:3},e.asString='function _f(){const{sharedValues,IMAGE_WIDTH,IMAGE_HEIGHT}=jsThis._closure;{return{width:"".concat(sharedValues[IMAGE_WIDTH].value,"px"),height:"".concat(sharedValues[IMAGE_HEIGHT].value,"px")};}}',e.__workletHash=3951488010356,e.__location="packageSkylineExamples/examples/album/components/album/album-image/index.js (81:38)",e.__worklet=!0,e}());var l=function(){o[2].value=o[0].value,o[3].value=o[1].value,o[7].value=!1};this._onPreviewerChange=function(e){e.id===s.data.image.id?o[7].value=!0:l()},a.default.on("".concat(u,"PreviewerChange"),this._onPreviewerChange),this._onPreviewerHide=function(){setTimeout(l,500)},a.default.on("".concat(u,"PreviewerDestroy"),this._onPreviewerHide)},detached:function(){var e,i=this.getPageId(),s=this.uniqueId;(0,t.getRunOnUI)(this.renderer)(((e=function(){globalThis.temp["".concat(s,"CustomRouteBack")]&&(globalThis.eventBus.off("".concat(i,"CustomRouteBack"),globalThis.temp["".concat(s,"CustomRouteBack")]),delete globalThis.temp["".concat(s,"CustomRouteBack")])})._closure={uniqueId:s,pageId:i},e.asString='function _f(){const{uniqueId,pageId}=jsThis._closure;{if(globalThis.temp["".concat(uniqueId,"CustomRouteBack")]){globalThis.eventBus.off("".concat(pageId,"CustomRouteBack"),globalThis.temp["".concat(uniqueId,"CustomRouteBack")]);delete globalThis.temp["".concat(uniqueId,"CustomRouteBack")];}}}',e.__workletHash=3999281897108,e.__location="packageSkylineExamples/examples/album/components/album/album-image/index.js (118:32)",e.__worklet=!0,e))(),a.default.off("".concat(i,"PreviewerChange"),this._onPreviewerChange),a.default.off("".concat(i,"PreviewerDestroy"),this._onPreviewerHide)}},methods:{onFrame:function(e){var a;console.log("worklet onFrame",e);var t=e.current,i=null!==(a=this.sharedValues)&&void 0!==a?a:[],s=t.width,u=t.height,r=e.progress,o=i[6].value,l=1===e.direction,n=s,h=u;if(o){var c=s/u;c>o?h=s/o:c<=o&&(n=u*o);var I=i[0].value,g=i[1].value,d=i[4].value,v=i[5].value;I&&g&&d&&v&&(l?(n=d-(d-I)*r,h=v-(v-g)*r):(n=I+(d-I)*r,h=g+(v-g)*r))}i[2].value=n,i[3].value=h},_onFrame_worklet_factory_:function(){var e,a=this;return(e=function(e){var t;console.log("worklet onFrame",e);var i=e.current,s=null!==(t=a.sharedValues)&&void 0!==t?t:[],u=i.width,r=i.height,o=e.progress,l=s[6].value,n=1===e.direction,h=u,c=r;if(l){var I=u/r;I>l?c=u/l:I<=l&&(h=r*l);var g=s[0].value,d=s[1].value,v=s[4].value,_=s[5].value;g&&d&&v&&_&&(n?(h=v-(v-g)*o,c=_-(_-d)*o):(h=g+(v-g)*o,c=d+(_-d)*o))}s[2].value=h,s[3].value=c})._closure={_this2:{sharedValues:a.sharedValues},IMAGE_RATIO:6,IMAGE_INIT_WIDTH:0,IMAGE_INIT_HEIGHT:1,IMAGE_TARGET_WIDTH:4,IMAGE_TARGET_HEIGHT:5,IMAGE_WIDTH:2,IMAGE_HEIGHT:3},e.asString="function _f(evt){const{_this2,IMAGE_RATIO,IMAGE_INIT_WIDTH,IMAGE_INIT_HEIGHT,IMAGE_TARGET_WIDTH,IMAGE_TARGET_HEIGHT,IMAGE_WIDTH,IMAGE_HEIGHT}=jsThis._closure;{var _this$sharedValues2;console.log('worklet onFrame',evt);var rect=evt.current;var sharedValues=(_this$sharedValues2=_this2.sharedValues)!==null&&_this$sharedValues2!==void 0?_this$sharedValues2:[];var cntWidth=rect.width;var cntHeight=rect.height;var progress=evt.progress;var imageRatio=sharedValues[IMAGE_RATIO].value;var isPop=evt.direction===1;var width=cntWidth;var height=cntHeight;if(imageRatio){var cntRatio=cntWidth/cntHeight;if(cntRatio>imageRatio)height=cntWidth/imageRatio;else if(cntRatio<=imageRatio)width=cntHeight*imageRatio;var initImageWidth=sharedValues[IMAGE_INIT_WIDTH].value;var initImageHeight=sharedValues[IMAGE_INIT_HEIGHT].value;var targetImageWidth=sharedValues[IMAGE_TARGET_WIDTH].value;var targetImageHeight=sharedValues[IMAGE_TARGET_HEIGHT].value;if(initImageWidth&&initImageHeight&&targetImageWidth&&targetImageHeight){if(isPop){width=targetImageWidth-(targetImageWidth-initImageWidth)*progress;height=targetImageHeight-(targetImageHeight-initImageHeight)*progress;}else{width=initImageWidth+(targetImageWidth-initImageWidth)*progress;height=initImageHeight+(targetImageHeight-initImageHeight)*progress;}}}sharedValues[IMAGE_WIDTH].value=width;sharedValues[IMAGE_HEIGHT].value=height;}}",e.__workletHash=1570348417256,e.__location="packageSkylineExamples/examples/album/components/album/album-image/index.js",e.__worklet=!0,e},onImageLoad:function(e){var a,t=e.detail,i=t.width,s=t.height,u=null!==(a=this.sharedValues)&&void 0!==a?a:[],r=i/s;this.imageRatio=r,u[6].value=r,this.renderImage()},renderImage:function(){var e,a=null!==(e=this.sharedValues)&&void 0!==e?e:[],t=this.data,u=t.width,r=t.height,o=this.imageRatio;if(!i||!s){var l=wx.getSystemInfoSync();i=l.screenWidth,s=l.screenHeight}if(u&&r&&o){var n=u,h=r,c=i,I=s,g=u/r,d=i/s;g>o?h=u/o:g<o&&(n=r*o),d>o?c=I*o:d<o&&(I=c/o),a[0].value=n,a[1].value=h,a[2].value=n,a[3].value=h,a[4].value=c,a[5].value=I}}}});
},{isPage:false,isComponent:true,currentFile:'packageSkylineExamples/examples/album/components/album/album-image/index.js'});require("packageSkylineExamples/examples/album/components/album/album-image/index.js");;__wxRoute = "packageSkylineExamples/examples/album/components/album/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/album/components/album/index.js";define("packageSkylineExamples/examples/album/components/album/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e,t=require("../../../../../@babel/runtime/helpers/objectSpread2"),i=(e=require("../../utils/event-bus"))&&e.__esModule?e:{default:e},a=require("./route");function r(e,i){for(var a=[],r=0,n=e.length;r<n;r+=i){for(var o={index:Math.floor(r/i),list:[]},s=0;s<i;s++){var u=r+s,l=e[u];l&&o.list.push(t(t({},l),{},{index:u}))}a.push(o)}return a}Component({properties:{list:{type:Array,value:[]},imageWidth:{type:Number,value:0},imageMargin:{type:Number,value:0},lineLimit:{type:Number,value:3}},data:{showList:[],scrollIntoView:""},observers:{"list, lineLimit":function(e,t){e.length&&t&&this.setData({showList:r(e,t)})}},lifetimes:{created:function(){i.default.initWorkletEventBus(this.renderer),(0,a.initRoute)()},attached:function(){var e=this,t=this.getPageId(),a=null;this._onPreviewerChange=function(t){var i=e.data.list.findIndex((function(e){return e.id===t.id}));-1!==i&&(a&&clearTimeout(a),a=setTimeout((function(){var t=Math.floor(i/e.data.lineLimit);e.setData({scrollIntoView:"line-".concat(t)})}),500))},i.default.on("".concat(t,"PreviewerChange"),this._onPreviewerChange)},detached:function(){var e=this.getPageId();i.default.off("".concat(e,"PreviewerChange"),this._onPreviewerChange)}},methods:{onTapImage:function(e){var t=(e.currentTarget.dataset||{}).index,i=this.data.list[t];i&&wx.navigateTo({url:"../../pages/preview/index?imageid=".concat(i.id,"&sourcepageid=").concat(this.getPageId()),routeType:"fadeToggle"})}}});
},{isPage:false,isComponent:true,currentFile:'packageSkylineExamples/examples/album/components/album/index.js'});require("packageSkylineExamples/examples/album/components/album/index.js");;__wxRoute = "packageSkylineExamples/examples/album/pages/album/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/album/pages/album/index.js";define("packageSkylineExamples/examples/album/pages/album/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var i=require("../../utils/store");Page({data:{imageWidth:0,imageMargin:12,lineLimit:3,list:[]},onLoad:function(){var t=this.data,e=t.imageMargin,a=t.lineLimit,s=wx.getSystemInfoSync().screenWidth;this.setData({imageWidth:(s-4*e)/a,list:(0,i.getAlbum)()})}});
},{isPage:true,isComponent:true,currentFile:'packageSkylineExamples/examples/album/pages/album/index.js'});require("packageSkylineExamples/examples/album/pages/album/index.js");