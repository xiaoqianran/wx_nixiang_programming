Object.defineProperty(exports,"__esModule",{value:!0}),exports.RefreshStatus=void 0;var e,t=require("../util"),r=exports.RefreshStatus=function(e){return e[e.Idle=0]="Idle",e[e.CanRefresh=1]="CanRefresh",e[e.Refreshing=2]="Refreshing",e[e.Completed=3]="Completed",e[e.Failed=4]="Failed",e[e.CanTwoLevel=5]="CanTwoLevel",e[e.TwoLevelOpening=6]="TwoLevelOpening",e[e.TwoLeveling=7]="TwoLeveling",e[e.TwoLevelClosing=8]="TwoLevelClosing",e}({}),n=wx.getSystemInfoSync(),a=wx.worklet,o=a.shared,i=a.Easing.cubicBezier(.4,0,.2,1),s=((e=function(e,t,r){return e+(t-e)*r})._closure={},e.asString="function _f(begin,end,t){return begin+(end-begin)*t;}",e.__workletHash=9953309036832,e.__location="packageSkylineExamples/examples/refresher-two-level/index/index.ts (21:13)",e.__worklet=!0,e),l=function(){var e=function(e,t,r){return e>r?r:e<t?t:e};return e._closure={},e.asString="function _f(cur,lowerBound,upperBound){if(cur>upperBound)return upperBound;if(cur<lowerBound)return lowerBound;return cur;}",e.__workletHash=0xd5c5dbbc9a9,e.__location="packageSkylineExamples/examples/refresher-two-level/index/index.ts (26:14)",e.__worklet=!0,e}();Component({data:{goods:(0,t.getGoods)(30),categorySet:[{page:0,categorys:(0,t.getCategory)()},{page:1,categorys:(0,t.getCategory)().reverse()}],paddingTop:44,renderer:"skyline",vipCategorys:(0,t.getVIPCategory)(),categoryItemWidth:0,intoView:"",selected:0,padding:[0,16,0,16],triggered:!1,twoLevelTriggered:!1,isTwoLevel:!1,refreshStatus:"下拉刷新",secondFloorCover:"https://res.wx.qq.com/op_res/cgyy76UKHo3KhkAvZN0WW8YtThK1-Kf4a21kiEQxNAvea-eN8S8tcbsLcdAIISVQeFM_E7sR-wtDb2VP5_Cy1w",goodsData:{expSelected:0,expCategorys:(0,t.getExpCategory)(),videoList:(0,t.getVideoList)(20),hasRouteDone:!0}},lifetimes:{created:function(){this.searchBarWidth=o(100),this.navBarOpactiy=o(1)},attached:function(){var e=this,t=(n.windowWidth-20)/5;this.setData({categoryItemWidth:t,paddingTop:n.statusBarHeight,renderer:this.renderer}),this.applyAnimatedStyle(".nav-bar",function(){var t=function(){return{opacity:e.navBarOpactiy.value}};return t._closure={_this:{navBarOpactiy:e.navBarOpactiy}},t.asString="function _f(){const{_this}=jsThis._closure;{return{opacity:_this.navBarOpactiy.value};}}",t.__workletHash=8445903283305,t.__location="packageSkylineExamples/examples/refresher-two-level/index/index.ts (76:42)",t.__worklet=!0,t}()),this.applyAnimatedStyle(".search",function(){var t=function(){return{width:"".concat(e.searchBarWidth.value,"%")}};return t._closure={_this:{searchBarWidth:e.searchBarWidth}},t.asString='function _f(){const{_this}=jsThis._closure;{return{width:"".concat(_this.searchBarWidth.value,"%")};}}',t.__workletHash=0xf3915a0142c,t.__location="packageSkylineExamples/examples/refresher-two-level/index/index.ts (83:41)",t.__worklet=!0,t}()),this.applyAnimatedStyle(".search-container",function(){var t=function(){return console.log("111",e.renderer),{backgroundColor:e.navBarOpactiy.value>0&&"skyline"==e.renderer?"transparent":"#fff"}};return t._closure={_this:{renderer:e.renderer,navBarOpactiy:e.navBarOpactiy}},t.asString="function _f(){const{_this}=jsThis._closure;{console.log('111',_this.renderer);return{backgroundColor:_this.navBarOpactiy.value>0&&_this.renderer=='skyline'?'transparent':'#fff'};}}",t.__workletHash=0xa580ab4fe5e,t.__location="packageSkylineExamples/examples/refresher-two-level/index/index.ts (90:51)",t.__worklet=!0,t}()),wx.createSelectorQuery().select("#scrollview").node().exec((function(t){console.info("@@@ createSelectorQuery ",t),e.scrollContext=t[0].node}))}},methods:{chooseVipCategory:function(e){var t=e.currentTarget.dataset.id;this.setData({intoView:"vip-category-".concat(t),selected:parseInt(t,10)})},handleScrollStart:function(e){},_handleScrollStart_worklet_factory_:function(){return function(){var e=function(e){};return e._closure={},e.asString="function _f(evt){}",e.__workletHash=4246897246300,e.__location="packageSkylineExamples/examples/refresher-two-level/index/index.ts",e.__worklet=!0,e}()},handleScrollUpdate:function(e){var t=l(e.detail.scrollTop,0,60),r=i(t/60);this.searchBarWidth.value=s(100,70,r),this.navBarOpactiy.value=s(1,0,r)},_handleScrollUpdate_worklet_factory_:function(){var e=this;return function(){var t=function(t){var r=l(t.detail.scrollTop,0,60),n=i(r/60);e.searchBarWidth.value=s(100,70,n),e.navBarOpactiy.value=s(1,0,n)};return t._closure={clamp:l,EasingFn:i,_this2:{searchBarWidth:e.searchBarWidth,navBarOpactiy:e.navBarOpactiy},lerp:s},t.asString="function _f(evt){const{clamp,EasingFn,_this2,lerp}=jsThis._closure;{var maxDistance=60;var scrollTop=clamp(evt.detail.scrollTop,0,maxDistance);var progress=EasingFn(scrollTop/maxDistance);_this2.searchBarWidth.value=lerp(100,70,progress);_this2.navBarOpactiy.value=lerp(1,0,progress);}}",t.__workletHash=4682794505139,t.__location="packageSkylineExamples/examples/refresher-two-level/index/index.ts",t.__worklet=!0,t}()},handleScrollEnd:function(e){},_handleScrollEnd_worklet_factory_:function(){return function(){var e=function(e){};return e._closure={},e.asString="function _f(evt){}",e.__workletHash=4246897246300,e.__location="packageSkylineExamples/examples/refresher-two-level/index/index.ts",e.__worklet=!0,e}()},onPulling:function(e){},onRefresh:function(){var e=this;console.info("@@@ onRefresh"),this._freshing||(this._freshing=!0,setTimeout((function(){e.setData({triggered:!1}),e._freshing=!1}),2e3))},onRestore:function(e){console.log("onRestore:",e)},onAbort:function(e){console.log("onAbort",e)},closeTwoLevel:function(){this.setData({twoLevelTriggered:!1})},onStatusChange:function(e){var t=e.detail.status,n=[r.TwoLevelOpening,r.TwoLeveling,r.TwoLevelClosing].indexOf(t)>=0,a=this.buildText(t);if(this.setData({isTwoLevel:n,refreshStatus:a}),t===r.TwoLeveling){var o=this;wx.navigateTo({url:"../goods/index",events:{nextPageRouteDone:function(e){console.info("@@@ next page has routeDone"),o.scrollContext.closeTwoLevel({duration:1})}},success:function(e){}})}},buildText:function(e){switch(e){case r.Idle:return"下拉刷新";case r.CanRefresh:return"松手刷新，下拉进入二楼";case r.Refreshing:return"正在刷新";case r.Completed:return"刷新成功";case r.Failed:return"刷新失败";case r.CanTwoLevel:return"松手进入二楼";default:return"进入二楼"}}}});