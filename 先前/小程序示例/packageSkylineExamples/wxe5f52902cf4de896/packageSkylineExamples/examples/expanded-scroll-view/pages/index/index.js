var t,a=require("../../util"),e=wx.worklet,n=e.shared,i=e.timing,s=e.decay,r=e.derived,l=(e.runOnUI,e.runOnJS),o=(0,a.getCategory)(),_=(0,a.getProducts)(),c=1,u=2,v=3,p=4,S=0,h=1,d=2,f=3,x=4,I=((t=function(t,a,e){return Math.min(Math.max(t,a),e)})._closure={},t.asString="function _f(num,min,max){return Math.min(Math.max(num,min),max);}",t.__workletHash=0xc68d47cdb34,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (24:14)",t.__worklet=!0,t);Component({data:{statusBarHeight:0,categories:o,selected:0,list:o.map((function(t){return{header:t,data:_}})),expand:!1},lifetimes:{created:function(){this._interactionState=n(0),this._tabsTop=n(0),this._mainHeight=n(700),this._startY=n(0),this._translY=n(0),this._deltaY=n(0),this._scrollTop=n(0),this._canPan=n(!0)},attached:function(){var t=this,a=wx.getWindowInfo();this.setData({statusBarHeight:a.statusBarHeight});var e=this.updateNavBackColor.bind(this);this._listenTranslY=r(function(){var a=function(){var a=t._translY.value<-t._tabsTop.value/2;l(e)(a)};return a._closure={_this:{_translY:t._translY,_tabsTop:t._tabsTop},runOnJS:l,updateNavBackColor:e},a.asString="function _f(){const{_this,runOnJS,updateNavBackColor}=jsThis._closure;{var expand=_this._translY.value<-_this._tabsTop.value/2;runOnJS(updateNavBackColor)(expand);}}",a.__workletHash=5629134734250,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (60:36)",a.__worklet=!0,a}())}},methods:{onBannerLoaded:function(){var t=this;this.createSelectorQuery().select(".tabs").boundingClientRect((function(a){t.createSelectorQuery().select(".navigation-bar").boundingClientRect((function(e){t._tabsTop.value=a.top-e.height,t.bindAnimatedStyle()})).exec()})).exec(),this.createSelectorQuery().select(".main").boundingClientRect((function(a){t._mainHeight.value=a.height})).exec()},updateNavBackColor:function(t){this.setData({expand:t})},bindAnimatedStyle:function(){var t=this;this.applyAnimatedStyle(".page",function(){var a=function(){var a=I(t._translY.value,-t._tabsTop.value,0);return{transform:"translateY(".concat(a,"px)")}};return a._closure={clamp:I,_this3:{_translY:t._translY,_tabsTop:t._tabsTop}},a.asString='function _f(){const{clamp,_this3}=jsThis._closure;{var translY=clamp(_this3._translY.value,-_this3._tabsTop.value,0);return{transform:"translateY(".concat(translY,"px)")};}}',a.__workletHash=0xfc26c4af7de,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (84:39)",a.__worklet=!0,a}()),this.applyAnimatedStyle(".navigation-bar",function(){var a=function(){var a=I(t._translY.value,-t._tabsTop.value,0)/-t._tabsTop.value;return{backgroundColor:"rgba(255, 255, 255, ".concat(a,")")}};return a._closure={clamp:I,_this3:{_translY:t._translY,_tabsTop:t._tabsTop}},a.asString='function _f(){const{clamp,_this3}=jsThis._closure;{var translY=clamp(_this3._translY.value,-_this3._tabsTop.value,0);var opacity=translY/-_this3._tabsTop.value;return{backgroundColor:"rgba(255, 255, 255, ".concat(opacity,")")};}}',a.__workletHash=0xfef2cd7862e,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (91:49)",a.__worklet=!0,a}()),this.applyAnimatedStyle(".search-input",function(){var a=function(){var a=I(t._translY.value,-t._tabsTop.value,0)/-t._tabsTop.value;return{width:"".concat(60*a+40,"%"),opacity:a}};return a._closure={clamp:I,_this3:{_translY:t._translY,_tabsTop:t._tabsTop}},a.asString='function _f(){const{clamp,_this3}=jsThis._closure;{var translY=clamp(_this3._translY.value,-_this3._tabsTop.value,0);var percentage=translY/-_this3._tabsTop.value;return{width:"".concat(percentage*60+40,"%"),opacity:percentage};}}',a.__workletHash=5724828901283,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (108:47)",a.__worklet=!0,a}()),this.applyAnimatedStyle(".main",function(){var a=function(){var a=I(t._translY.value,0,Number.MAX_VALUE);return{transform:"translateY(".concat(a,"px)")}};return a._closure={clamp:I,_this3:{_translY:t._translY}},a.asString='function _f(){const{clamp,_this3}=jsThis._closure;{var translY=clamp(_this3._translY.value,0,Number.MAX_VALUE);return{transform:"translateY(".concat(translY,"px)")};}}',a.__workletHash=0xed39032aa0f,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (119:39)",a.__worklet=!0,a}()),this.applyAnimatedStyle(".header-shop-info-simple",function(){var a=function(){return{opacity:1-(I(t._translY.value,50,100)-50)/50}};return a._closure={clamp:I,_this3:{_translY:t._translY}},a.asString="function _f(){const{clamp,_this3}=jsThis._closure;{var min=50;var max=100;var translY=clamp(_this3._translY.value,min,max)-min;return{opacity:1-translY/(max-min)};}}",a.__workletHash=2576540394644,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (126:58)",a.__worklet=!0,a}()),this.applyAnimatedStyle(".header-shop-info-detail",function(){var a=function(){return{opacity:(I(t._translY.value,100,150)-100)/50}};return a._closure={clamp:I,_this3:{_translY:t._translY}},a.asString="function _f(){const{clamp,_this3}=jsThis._closure;{var min=100;var max=150;var translY=clamp(_this3._translY.value,min,max)-min;return{opacity:translY/(max-min)};}}",a.__workletHash=4778249595417,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (135:58)",a.__worklet=!0,a}())},handlePan:function(t){var a=this._interactionState;if(this._interactionState.value!==h)if(this._interactionState.value!==x){if(t.state===c){var e=I(this._translY.value,-this._tabsTop.value,0);this._startY.value=t.absoluteY-e}t.state===u&&(this._interactionState.value===d?t.absoluteY-this._startY.value<0&&(this._interactionState.value=h,this._translY.value=i(0,{duration:250},function(){var t=function(){a.value=x};return t._closure={_interactionState:a,InteractionState:{RESET:x}},t.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.RESET;}}",t.__workletHash=345122500339,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (169:65)",t.__worklet=!0,t}())):this._translY.value=t.absoluteY-this._startY.value),t.state!==v&&t.state!==p||(this._translY.value>100?(this._interactionState.value=h,this._translY.value=i(this._mainHeight.value,{duration:250},function(){var t=function(){a.value=d};return t._closure={_interactionState:a,InteractionState:{UNFOLD:d}},t.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.UNFOLD;}}",t.__workletHash=8063055439132,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (184:82)",t.__worklet=!0,t}())):this._translY.value>0?(this._interactionState.value=h,this._translY.value=i(0,{duration:250},function(){var t=function(){a.value=S};return t._closure={_interactionState:a,InteractionState:{INITIAL:S}},t.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.INITIAL;}}",t.__workletHash=0x95c0e6cdd18,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (191:63)",t.__worklet=!0,t}())):this._translY.value>-this._tabsTop.value&&(this._interactionState.value=f,this._translY.value=s({velocity:t.velocityY,clamp:[-this._tabsTop.value,0]})))}else t.state!==v&&t.state!==p||(this._interactionState.value=S)},_handlePan_worklet_factory_:function(){var t=this;return function(){var a=function(a){var e=t._interactionState;if(t._interactionState.value!==h)if(t._interactionState.value!==x){if(a.state===c){var n=I(t._translY.value,-t._tabsTop.value,0);t._startY.value=a.absoluteY-n}a.state===u&&(t._interactionState.value===d?a.absoluteY-t._startY.value<0&&(t._interactionState.value=h,t._translY.value=i(0,{duration:250},function(){var t=function(){e.value=x};return t._closure={_interactionState:e,InteractionState:{RESET:x}},t.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.RESET;}}",t.__workletHash=345122500339,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (169:65)",t.__worklet=!0,t}())):t._translY.value=a.absoluteY-t._startY.value),a.state!==v&&a.state!==p||(t._translY.value>100?(t._interactionState.value=h,t._translY.value=i(t._mainHeight.value,{duration:250},function(){var t=function(){e.value=d};return t._closure={_interactionState:e,InteractionState:{UNFOLD:d}},t.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.UNFOLD;}}",t.__workletHash=8063055439132,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (184:82)",t.__worklet=!0,t}())):t._translY.value>0?(t._interactionState.value=h,t._translY.value=i(0,{duration:250},function(){var t=function(){e.value=S};return t._closure={_interactionState:e,InteractionState:{INITIAL:S}},t.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.INITIAL;}}",t.__workletHash=0x95c0e6cdd18,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (191:63)",t.__worklet=!0,t}())):t._translY.value>-t._tabsTop.value&&(t._interactionState.value=f,t._translY.value=s({velocity:a.velocityY,clamp:[-t._tabsTop.value,0]})))}else a.state!==v&&a.state!==p||(t._interactionState.value=S)};return a._closure={_this4:{_interactionState:t._interactionState,_translY:t._translY,_tabsTop:t._tabsTop,_startY:t._startY,_mainHeight:t._mainHeight},InteractionState:{ANIMATING:h,RESET:x,INITIAL:S,UNFOLD:d,SCROLL:f},GestureState:{END:v,CANCELLED:p,BEGIN:c,ACTIVE:u},clamp:I,timing:i,decay:s},a.asString='function _f(e){const{_this4,InteractionState,GestureState,clamp,timing,decay}=jsThis._closure;{var _interactionState=_this4._interactionState;if(_this4._interactionState.value===InteractionState.ANIMATING){return;}if(_this4._interactionState.value===InteractionState.RESET){if(e.state===GestureState.END||e.state===GestureState.CANCELLED){_this4._interactionState.value=InteractionState.INITIAL;}return;}if(e.state===GestureState.BEGIN){var lastTranslY=clamp(_this4._translY.value,-_this4._tabsTop.value,0);_this4._startY.value=e.absoluteY-lastTranslY;}if(e.state===GestureState.ACTIVE){if(_this4._interactionState.value===InteractionState.UNFOLD){if(e.absoluteY-_this4._startY.value<0){_this4._interactionState.value=InteractionState.ANIMATING;_this4._translY.value=timing(0.0,{duration:250},function(){var _f=function _f(){_interactionState.value=InteractionState.RESET;};_f._closure={_interactionState:_interactionState,InteractionState:{RESET:InteractionState.RESET}};_f.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.RESET;}}";_f.__workletHash=345122500339;_f.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (169:65)";_f.__worklet=true;return _f;}());}}else{_this4._translY.value=e.absoluteY-_this4._startY.value;}}if(e.state===GestureState.END||e.state===GestureState.CANCELLED){if(_this4._translY.value>100){_this4._interactionState.value=InteractionState.ANIMATING;_this4._translY.value=timing(_this4._mainHeight.value,{duration:250},function(){var _f=function _f(){_interactionState.value=InteractionState.UNFOLD;};_f._closure={_interactionState:_interactionState,InteractionState:{UNFOLD:InteractionState.UNFOLD}};_f.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.UNFOLD;}}";_f.__workletHash=8063055439132;_f.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (184:82)";_f.__worklet=true;return _f;}());}else if(_this4._translY.value>0){_this4._interactionState.value=InteractionState.ANIMATING;_this4._translY.value=timing(0.0,{duration:250},function(){var _f=function _f(){_interactionState.value=InteractionState.INITIAL;};_f._closure={_interactionState:_interactionState,InteractionState:{INITIAL:InteractionState.INITIAL}};_f.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.INITIAL;}}";_f.__workletHash=10290983656728;_f.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (191:63)";_f.__worklet=true;return _f;}());}else if(_this4._translY.value>-_this4._tabsTop.value){_this4._interactionState.value=InteractionState.SCROLL;_this4._translY.value=decay({velocity:e.velocityY,clamp:[-_this4._tabsTop.value,0]});}}}}',a.__workletHash=4349615919605,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js",a.__worklet=!0,a}()},shouldPanResponse:function(){return this._canPan.value},_shouldPanResponse_worklet_factory_:function(){var t=this;return function(){var a=function(){return t._canPan.value};return a._closure={_this5:{_canPan:t._canPan}},a.asString="function _f(){const{_this5}=jsThis._closure;{return _this5._canPan.value;}}",a.__workletHash=6978219566417,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js",a.__worklet=!0,a}()},handleScroll:function(t){var a=this._interactionState;this._scrollTop.value=t.detail.scrollTop,this._scrollTop.value<0&&!t.detail.isDrag&&!this._canPan.value&&this._interactionState.value!==h&&(this._interactionState.value=h,this._translY.value=i(0,{duration:250},function(){var t=function(){a.value=S};return t._closure={_interactionState:a,InteractionState:{INITIAL:S}},t.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.INITIAL;}}",t.__workletHash=0x95c0e6cdd18,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (212:61)",t.__worklet=!0,t}()))},_handleScroll_worklet_factory_:function(){var t=this;return function(){var a=function(a){var e=t._interactionState;t._scrollTop.value=a.detail.scrollTop,t._scrollTop.value<0&&!a.detail.isDrag&&!t._canPan.value&&t._interactionState.value!==h&&(t._interactionState.value=h,t._translY.value=i(0,{duration:250},function(){var t=function(){e.value=S};return t._closure={_interactionState:e,InteractionState:{INITIAL:S}},t.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.INITIAL;}}",t.__workletHash=0x95c0e6cdd18,t.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (212:61)",t.__worklet=!0,t}()))};return a._closure={_this6:{_interactionState:t._interactionState,_scrollTop:t._scrollTop,_canPan:t._canPan,_translY:t._translY},InteractionState:{ANIMATING:h,INITIAL:S},timing:i},a.asString='function _f(e){const{_this6,InteractionState,timing}=jsThis._closure;{var _interactionState=_this6._interactionState;_this6._scrollTop.value=e.detail.scrollTop;if(_this6._scrollTop.value<0&&!e.detail.isDrag&&!_this6._canPan.value&&_this6._interactionState.value!==InteractionState.ANIMATING){_this6._interactionState.value=InteractionState.ANIMATING;_this6._translY.value=timing(0.0,{duration:250},function(){var _f=function _f(){_interactionState.value=InteractionState.INITIAL;};_f._closure={_interactionState:_interactionState,InteractionState:{INITIAL:InteractionState.INITIAL}};_f.asString="function _f(){const{_interactionState,InteractionState}=jsThis._closure;{_interactionState.value=InteractionState.INITIAL;}}";_f.__workletHash=10290983656728;_f.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js (212:61)";_f.__worklet=true;return _f;}());}}}',a.__workletHash=0xeb0541f002c,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js",a.__worklet=!0,a}()},shouldScrollViewResponse:function(t){return this._translY.value>-this._tabsTop.value?this._canPan.value=!0:this._canPan.value=this._scrollTop.value<=0&&t.deltaY>0,!this._canPan.value},_shouldScrollViewResponse_worklet_factory_:function(){var t=this;return function(){var a=function(a){return t._translY.value>-t._tabsTop.value?t._canPan.value=!0:t._canPan.value=t._scrollTop.value<=0&&a.deltaY>0,!t._canPan.value};return a._closure={_this7:{_translY:t._translY,_tabsTop:t._tabsTop,_canPan:t._canPan,_scrollTop:t._scrollTop}},a.asString="function _f(e){const{_this7}=jsThis._closure;{if(_this7._translY.value>-_this7._tabsTop.value){_this7._canPan.value=true;}else{_this7._canPan.value=_this7._scrollTop.value<=0&&e.deltaY>0;}return!_this7._canPan.value;}}",a.__workletHash=3725985623784,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js",a.__worklet=!0,a}()},adjustDeceleration:function(t){return this._scrollTop.value<=0?0:t},_adjustDeceleration_worklet_factory_:function(){var t=this;return function(){var a=function(a){return t._scrollTop.value<=0?0:a};return a._closure={_this8:{_scrollTop:t._scrollTop}},a.asString="function _f(velocity){const{_this8}=jsThis._closure;{var scrollTop=_this8._scrollTop.value;return scrollTop<=0?0:velocity;}}",a.__workletHash=0xf40d5eef4c3,a.__location="packageSkylineExamples/examples/expanded-scroll-view/pages/index/index.js",a.__worklet=!0,a}()}}});