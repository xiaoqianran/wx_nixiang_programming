var e,a=require("../../../utils/worklet"),t=0,l=0,i=((e=function(e,t,l){return(0,a.getTiming)(t)(e,{duration:300},l)})._closure={getTiming:a.getTiming},e.asString="function adjustTiming(target,renderer,callback){const{getTiming}=jsThis._closure;{return getTiming(renderer)(target,{duration:300},callback);}}",e.__workletHash=3148052746259,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (31:0)",e.__worklet=!0,e),o=function(){var e=function(e,t,l){return(0,a.getTiming)(t)(e,{duration:200},l)};return e._closure={getTiming:a.getTiming},e.asString="function recoverTiming(target,renderer,callback){const{getTiming}=jsThis._closure;{return getTiming(renderer)(target,{duration:200},callback);}}",e.__workletHash=3600410011445,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (36:0)",e.__worklet=!0,e}();function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";wx.vibrateShort({type:e})}Component({properties:{status:{type:Number,value:0},image:{type:Object,value:{}}},observers:{status:function(e){this.isAttached&&(e!==this.oldStatus&&(this.oldStatus=e,1===e?this.isImgLoaded&&this.triggerEvent("render",this.data.image):this.resetImg()))}},lifetimes:{created:function(){var e=(0,a.getShared)(this.renderer);this.sharedValues=[e(0),e(0),e(1),e(0),e(0),e(1),e(1),e(0),e(0),e(0),e(0),e(0),e(0),e(0),e(1),e(0),e(0),e(1),e(""),e(""),e(this.renderer)]},attached:function(){var e;this.isAttached=!0;var v=this.getPageId(),n=this.data.image.id,r=null!==(e=this.sharedValues)&&void 0!==e?e:[];if(!t||!l){var c=wx.getSystemInfoSync();t=c.screenWidth,l=c.screenHeight}r[19].value=v,r[18].value=n,this.applyAnimatedStyle("#image",function(){var e=function(){return{width:"".concat(r[3].value,"px"),height:"".concat(r[4].value,"px"),transform:"translateX(".concat(r[0].value,"px) translateY(").concat(r[1].value,"px) translateZ(0px) scale(").concat(r[2].value,")")}};return e._closure={sharedValues:r,IMG_WIDTH:3,IMG_HEIGHT:4,MOVE_X:0,MOVE_Y:1,SCALE:2},e.asString='function _f(){const{sharedValues,IMG_WIDTH,IMG_HEIGHT,MOVE_X,MOVE_Y,SCALE}=jsThis._closure;{return{width:"".concat(sharedValues[IMG_WIDTH].value,"px"),height:"".concat(sharedValues[IMG_HEIGHT].value,"px"),transform:"translateX(".concat(sharedValues[MOVE_X].value,"px) translateY(").concat(sharedValues[MOVE_Y].value,"px) translateZ(0px) scale(").concat(sharedValues[SCALE].value,")")};}}',e.__workletHash=5973689107770,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (118:40)",e.__worklet=!0,e}());var u=function(){var e=function(e,a,i){var o=a*e,s=i*e;o>t?(r[8].value=o/2-a/2,r[7].value=t-a/2-o/2):r[8].value=r[7].value=(t-a)/2,s>l?(r[10].value=s/2-i/2,r[9].value=l-i/2-s/2):r[10].value=r[9].value=(l-i)/2};return e._closure={screenWidth:t,sharedValues:r,IMG_MAX_MOVE_X:8,IMG_MIN_MOVE_X:7,screenHeight:l,IMG_MAX_MOVE_Y:10,IMG_MIN_MOVE_Y:9},e.asString="function calcImgLimit(scale,imgWidth,imgHeight){const{screenWidth,sharedValues,IMG_MAX_MOVE_X,IMG_MIN_MOVE_X,screenHeight,IMG_MAX_MOVE_Y,IMG_MIN_MOVE_Y}=jsThis._closure;{var viewWidth=imgWidth*scale;var viewHeight=imgHeight*scale;if(viewWidth>screenWidth){sharedValues[IMG_MAX_MOVE_X].value=viewWidth/2-imgWidth/2;sharedValues[IMG_MIN_MOVE_X].value=screenWidth-imgWidth/2-viewWidth/2;}else{sharedValues[IMG_MAX_MOVE_X].value=sharedValues[IMG_MIN_MOVE_X].value=(screenWidth-imgWidth)/2;}if(viewHeight>screenHeight){sharedValues[IMG_MAX_MOVE_Y].value=viewHeight/2-imgHeight/2;sharedValues[IMG_MIN_MOVE_Y].value=screenHeight-imgHeight/2-viewHeight/2;}else{sharedValues[IMG_MAX_MOVE_Y].value=sharedValues[IMG_MIN_MOVE_Y].value=(screenHeight-imgHeight)/2;}}}",e.__workletHash=5407579956085,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (128:6)",e.__worklet=!0,e}();this.calcImgLimit=u,(0,a.getRunOnUI)(this.renderer)(function(){var e=function(){var e=r[20].value;function c(a){var o=a.moveX,s=void 0===o?null:o,n=a.moveY,c=void 0===n?null:n,m=a.scale,h=void 0===m?null:m,_=a.centerX,g=void 0===_?null:_,d=a.centerY,M=void 0===d?null:d,E=a.withAnimation,p=void 0!==E&&E;if(null!==s&&null!==c){if(!s&&!c)return;var T=r[0].value,I=r[1].value,V=T+s,f=I+c,S=r[7].value,X=r[8].value,Y=r[9].value,w=r[10].value,b=V<=S||V>=X,x=f<=Y||f>=w,A=r[2].value-r[17].value>.001,G=Math.abs(c)-Math.abs(s);if(!r[11].value&&b&&G<0)globalThis.eventBus.emit("".concat(v,"Toggle"),a);else if(!r[11].value&&x&&G>0&&c>0)globalThis.eventBus.emit("".concat(v,"Back"),a);else{var O=r[12].value||T,y=r[13].value||I;if(b){var k=O-T,R=.52*Math.pow(1-Math.min(Math.abs(k)/t,1),2);V=T+Math.ceil(s*R)}if(x&&A){var N=y-I,H=.52*Math.pow(1-Math.min(Math.abs(N)/l,1),2);f=I+Math.ceil(c*H)}if(3===r[11].value){var L=Math.min(Math.max(V,S),X);r[0].value=L,r[12].value=L;var j=Math.min(Math.max(f,Y),w);r[1].value=j,r[13].value=j}else{r[0].value=V;var C=O+s;if(r[12].value=Math.min(Math.max(C,S),X),A){r[1].value=f;var D=y+c;r[13].value=Math.min(Math.max(D,Y),w)}else{var B=Math.min(Math.max(f,Y),w);r[1].value=B,r[13].value=B}r[11].value=1,globalThis.eventBus.emit("".concat(v,"Moving"))}}}else if(null!==h&&null!==g&&null!==M){var W=r[0].value,U=r[1].value,P=r[2].value,$=P*h,K=Math.min(Math.max($,r[6].value),r[5].value),J=K/P,Z=r[3].value,q=r[4].value,z=g-Z/2,F=z-(z-W)*J,Q=M-q/2,ee=Q-(Q-U)*J;if(u(K,Z,q),F=Math.min(Math.max(F,r[7].value),r[8].value),ee=Math.min(Math.max(ee,r[9].value),r[10].value),r[0].value=p?i(F,e):F,r[1].value=p?i(ee,e):ee,p)r[2].value=i(K,e,(function(){r[11].value=0})),r[14].value=K;else{var ae=$;if(Math.abs($-K)>.001){var te=$-P,le=te<0?$/K:K/$;ae=P+te*((te<0?.3:.6)*Math.pow(Math.min(le,1),2))}r[2].value=ae,r[14].value=K}r[12].value=F,r[13].value=ee,r[11].value=2,globalThis.eventBus.emit("".concat(v,"Moving"))}}globalThis.temp["".concat(v).concat(n,"ImgMove")]||(globalThis.temp["".concat(v).concat(n,"ImgMove")]=function(e){return c(e)},globalThis.eventBus.on("".concat(v).concat(n,"Move"),globalThis.temp["".concat(v).concat(n,"ImgMove")])),globalThis.temp["".concat(v).concat(n,"ImgScale")]||(globalThis.temp["".concat(v).concat(n,"ImgScale")]=function(e){return c(e)},globalThis.eventBus.on("".concat(v).concat(n,"Scale"),globalThis.temp["".concat(v).concat(n,"ImgScale")])),globalThis.temp["".concat(v).concat(n,"ImgEnd")]||(globalThis.temp["".concat(v).concat(n,"ImgEnd")]=function(t){r[11].value=0;var l=r[0].value,i=r[12].value,v=Math.abs(l-i)>.001,n=r[1].value,u=r[13].value,m=Math.abs(n-u)>.001,h=r[2].value,_=r[14].value,g=Math.abs(h-_)>.001,d=r[2].value-r[17].value>.001,M=t.velocityX,E=t.velocityY,p=Math.min(Math.abs(M),700),T=Math.min(Math.abs(E),700);if(v||m||g)v&&(r[0].value=o(i,e)),m&&(r[1].value=o(u,e)),g&&(r[2].value=o(_,e),(0,a.getRunOnJS)(r[20].value)(s)());else if(d&&(p>50||T>50)){r[11].value=3;var I=-.0015,V=Math.sign(M),f=Math.sign(E),S=p/1e3,X=T/1e3,Y=16,w=function(){var e=function(){if(3===r[11].value){var e=0,a=0;if(S>0){var t=I*Y+S;if(t>0)e=(S*Y+I*Math.pow(Y,2)/2)*V,S=t;else S=0}if(X>0){var l=I*Y+X;if(l>0)a=(X*Y+I*Math.pow(Y,2)/2)*f,X=l;else X=0}e||a?(c({moveX:e,moveY:a}),setTimeout(w,Y)):r[11].value=0}};return e._closure={sharedValues:r,GESTURE_STATE:11,vx0:S,a:I,t:Y,directionX:V,vy0:X,directionY:f,adjustImg:c,nextTick:w},e.asString="function _f(){const{sharedValues,GESTURE_STATE,vx0,a,t,directionX,vy0,directionY,adjustImg,nextTick}=jsThis._closure;{if(sharedValues[GESTURE_STATE].value!==3)return;var moveX=0;var moveY=0;if(vx0>0){var vx1=a*t+vx0;if(vx1>0){var s=vx0*t+a*Math.pow(t,2)/2;moveX=s*directionX;vx0=vx1;}else{vx0=0;}}if(vy0>0){var vy1=a*t+vy0;if(vy1>0){var _s=vy0*t+a*Math.pow(t,2)/2;moveY=_s*directionY;vy0=vy1;}else{vy0=0;}}if(moveX||moveY){adjustImg({moveX:moveX,moveY:moveY});setTimeout(nextTick,t);}else{sharedValues[GESTURE_STATE].value=0;}}}",e.__workletHash=0xe8b1cec0441,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (340:31)",e.__worklet=!0,e}();setTimeout(w,Y)}},globalThis.eventBus.on("".concat(v).concat(n,"End"),globalThis.temp["".concat(v).concat(n,"ImgEnd")])),globalThis.temp["".concat(v).concat(n,"ImgDoubleTap")]||(globalThis.temp["".concat(v).concat(n,"ImgDoubleTap")]=function(e){return c(e)},globalThis.eventBus.on("".concat(v).concat(n,"DoubleTap"),globalThis.temp["".concat(v).concat(n,"ImgDoubleTap")]))};return e._closure={sharedValues:r,RENDERER:20,MOVE_X:0,MOVE_Y:1,IMG_MIN_MOVE_X:7,IMG_MAX_MOVE_X:8,IMG_MIN_MOVE_Y:9,IMG_MAX_MOVE_Y:10,SCALE:2,INIT_SCALE:17,GESTURE_STATE:11,pageId:v,TEMP_MOVE_X:12,TEMP_MOVE_Y:13,screenWidth:t,screenHeight:l,IMG_MIN_SCALE:6,IMG_MAX_SCALE:5,IMG_WIDTH:3,IMG_HEIGHT:4,calcImgLimit:u,adjustTiming:i,TEMP_SCALE:14,id:n,recoverTiming:o,getRunOnJS:a.getRunOnJS,vibrateShort:s},e.asString='function _f(){const{sharedValues,RENDERER,MOVE_X,MOVE_Y,IMG_MIN_MOVE_X,IMG_MAX_MOVE_X,IMG_MIN_MOVE_Y,IMG_MAX_MOVE_Y,SCALE,INIT_SCALE,GESTURE_STATE,pageId,TEMP_MOVE_X,TEMP_MOVE_Y,screenWidth,screenHeight,IMG_MIN_SCALE,IMG_MAX_SCALE,IMG_WIDTH,IMG_HEIGHT,calcImgLimit,adjustTiming,TEMP_SCALE,id,recoverTiming,getRunOnJS,vibrateShort}=jsThis._closure;{var renderer=sharedValues[RENDERER].value;function adjustImg(args){var _args$moveX=args.moveX,moveX=_args$moveX===void 0?null:_args$moveX,_args$moveY=args.moveY,moveY=_args$moveY===void 0?null:_args$moveY,_args$scale=args.scale,scale=_args$scale===void 0?null:_args$scale,_args$centerX=args.centerX,centerX=_args$centerX===void 0?null:_args$centerX,_args$centerY=args.centerY,centerY=_args$centerY===void 0?null:_args$centerY,_args$withAnimation=args.withAnimation,withAnimation=_args$withAnimation===void 0?false:_args$withAnimation;if(moveX!==null&&moveY!==null){if(!moveX&&!moveY)return;var oldMoveX=sharedValues[MOVE_X].value;var oldMoveY=sharedValues[MOVE_Y].value;var newMoveX=oldMoveX+moveX;var newMoveY=oldMoveY+moveY;var minMoveX=sharedValues[IMG_MIN_MOVE_X].value;var maxMoveX=sharedValues[IMG_MAX_MOVE_X].value;var minMoveY=sharedValues[IMG_MIN_MOVE_Y].value;var maxMoveY=sharedValues[IMG_MAX_MOVE_Y].value;var isReachXEdge=newMoveX<=minMoveX||newMoveX>=maxMoveX;var isReachYEdge=newMoveY<=minMoveY||newMoveY>=maxMoveY;var isScaleBigger=sharedValues[SCALE].value-sharedValues[INIT_SCALE].value>0.001;var moveGap=Math.abs(moveY)-Math.abs(moveX);if(!sharedValues[GESTURE_STATE].value&&isReachXEdge&&moveGap<0){globalThis.eventBus.emit("".concat(pageId,"Toggle"),args);}else if(!sharedValues[GESTURE_STATE].value&&isReachYEdge&&moveGap>0&&moveY>0){globalThis.eventBus.emit("".concat(pageId,"Back"),args);}else{var tempOldMoveX=sharedValues[TEMP_MOVE_X].value||oldMoveX;var tempOldMoveY=sharedValues[TEMP_MOVE_Y].value||oldMoveY;if(isReachXEdge){var offset=tempOldMoveX-oldMoveX;var f=0.52*Math.pow(1-Math.min(Math.abs(offset)/screenWidth,1),2);newMoveX=oldMoveX+Math.ceil(moveX*f);}if(isReachYEdge&&isScaleBigger){var _offset=tempOldMoveY-oldMoveY;var _f2=0.52*Math.pow(1-Math.min(Math.abs(_offset)/screenHeight,1),2);newMoveY=oldMoveY+Math.ceil(moveY*_f2);}if(sharedValues[GESTURE_STATE].value===3){var tempNewMoveX=Math.min(Math.max(newMoveX,minMoveX),maxMoveX);sharedValues[MOVE_X].value=tempNewMoveX;sharedValues[TEMP_MOVE_X].value=tempNewMoveX;var tempNewMoveY=Math.min(Math.max(newMoveY,minMoveY),maxMoveY);sharedValues[MOVE_Y].value=tempNewMoveY;sharedValues[TEMP_MOVE_Y].value=tempNewMoveY;}else{sharedValues[MOVE_X].value=newMoveX;var _tempNewMoveX=tempOldMoveX+moveX;sharedValues[TEMP_MOVE_X].value=Math.min(Math.max(_tempNewMoveX,minMoveX),maxMoveX);if(isScaleBigger){sharedValues[MOVE_Y].value=newMoveY;var _tempNewMoveY=tempOldMoveY+moveY;sharedValues[TEMP_MOVE_Y].value=Math.min(Math.max(_tempNewMoveY,minMoveY),maxMoveY);}else{var _tempNewMoveY2=Math.min(Math.max(newMoveY,minMoveY),maxMoveY);sharedValues[MOVE_Y].value=_tempNewMoveY2;sharedValues[TEMP_MOVE_Y].value=_tempNewMoveY2;}sharedValues[GESTURE_STATE].value=1;globalThis.eventBus.emit("".concat(pageId,"Moving"));}}}else if(scale!==null&&centerX!==null&&centerY!==null){var _oldMoveX=sharedValues[MOVE_X].value;var _oldMoveY=sharedValues[MOVE_Y].value;var oldScale=sharedValues[SCALE].value;var newScale=oldScale*scale;var tempNewScale=Math.min(Math.max(newScale,sharedValues[IMG_MIN_SCALE].value),sharedValues[IMG_MAX_SCALE].value);var realScale=tempNewScale/oldScale;var imgWidth=sharedValues[IMG_WIDTH].value;var imgHeight=sharedValues[IMG_HEIGHT].value;var gapX=centerX-imgWidth/2;var _newMoveX=gapX-(gapX-_oldMoveX)*realScale;var gapY=centerY-imgHeight/2;var _newMoveY=gapY-(gapY-_oldMoveY)*realScale;calcImgLimit(tempNewScale,imgWidth,imgHeight);_newMoveX=Math.min(Math.max(_newMoveX,sharedValues[IMG_MIN_MOVE_X].value),sharedValues[IMG_MAX_MOVE_X].value);_newMoveY=Math.min(Math.max(_newMoveY,sharedValues[IMG_MIN_MOVE_Y].value),sharedValues[IMG_MAX_MOVE_Y].value);sharedValues[MOVE_X].value=withAnimation?adjustTiming(_newMoveX,renderer):_newMoveX;sharedValues[MOVE_Y].value=withAnimation?adjustTiming(_newMoveY,renderer):_newMoveY;if(withAnimation){sharedValues[SCALE].value=adjustTiming(tempNewScale,renderer,function(){sharedValues[GESTURE_STATE].value=0;});sharedValues[TEMP_SCALE].value=tempNewScale;}else{var calcNewScale=newScale;if(Math.abs(newScale-tempNewScale)>0.001){var gap=newScale-oldScale;var dampingLimit=gap<0?newScale/tempNewScale:tempNewScale/newScale;var _f3=(gap<0?0.3:0.6)*Math.pow(Math.min(dampingLimit,1),2);calcNewScale=oldScale+gap*_f3;}sharedValues[SCALE].value=calcNewScale;sharedValues[TEMP_SCALE].value=tempNewScale;}sharedValues[TEMP_MOVE_X].value=_newMoveX;sharedValues[TEMP_MOVE_Y].value=_newMoveY;sharedValues[GESTURE_STATE].value=2;globalThis.eventBus.emit("".concat(pageId,"Moving"));}}if(!globalThis.temp["".concat(pageId).concat(id,"ImgMove")]){globalThis.temp["".concat(pageId).concat(id,"ImgMove")]=function(args){return adjustImg(args);};globalThis.eventBus.on("".concat(pageId).concat(id,"Move"),globalThis.temp["".concat(pageId).concat(id,"ImgMove")]);}if(!globalThis.temp["".concat(pageId).concat(id,"ImgScale")]){globalThis.temp["".concat(pageId).concat(id,"ImgScale")]=function(args){return adjustImg(args);};globalThis.eventBus.on("".concat(pageId).concat(id,"Scale"),globalThis.temp["".concat(pageId).concat(id,"ImgScale")]);}if(!globalThis.temp["".concat(pageId).concat(id,"ImgEnd")]){globalThis.temp["".concat(pageId).concat(id,"ImgEnd")]=function(args){sharedValues[GESTURE_STATE].value=0;var moveX=sharedValues[MOVE_X].value;var targetMoveX=sharedValues[TEMP_MOVE_X].value;var needRecoverX=Math.abs(moveX-targetMoveX)>0.001;var moveY=sharedValues[MOVE_Y].value;var targetMoveY=sharedValues[TEMP_MOVE_Y].value;var needRecoverY=Math.abs(moveY-targetMoveY)>0.001;var scale=sharedValues[SCALE].value;var targetScale=sharedValues[TEMP_SCALE].value;var needRecoverScale=Math.abs(scale-targetScale)>0.001;var isScaleBigger=sharedValues[SCALE].value-sharedValues[INIT_SCALE].value>0.001;var velocityX=args.velocityX,velocityY=args.velocityY;var vx=Math.min(Math.abs(velocityX),700);var vy=Math.min(Math.abs(velocityY),700);if(needRecoverX||needRecoverY||needRecoverScale){if(needRecoverX)sharedValues[MOVE_X].value=recoverTiming(targetMoveX,renderer);if(needRecoverY)sharedValues[MOVE_Y].value=recoverTiming(targetMoveY,renderer);if(needRecoverScale){sharedValues[SCALE].value=recoverTiming(targetScale,renderer);getRunOnJS(sharedValues[RENDERER].value)(vibrateShort)();}}else if(isScaleBigger&&(vx>50||vy>50)){sharedValues[GESTURE_STATE].value=3;var a=-0.0015;var directionX=Math.sign(velocityX);var directionY=Math.sign(velocityY);var vx0=vx/1000;var vy0=vy/1000;var t=16;var nextTick=function(){var _f=function _f(){if(sharedValues[GESTURE_STATE].value!==3)return;var moveX=0;var moveY=0;if(vx0>0){var vx1=a*t+vx0;if(vx1>0){var s=vx0*t+a*Math.pow(t,2)/2;moveX=s*directionX;vx0=vx1;}else{vx0=0;}}if(vy0>0){var vy1=a*t+vy0;if(vy1>0){var _s=vy0*t+a*Math.pow(t,2)/2;moveY=_s*directionY;vy0=vy1;}else{vy0=0;}}if(moveX||moveY){adjustImg({moveX:moveX,moveY:moveY});setTimeout(nextTick,t);}else{sharedValues[GESTURE_STATE].value=0;}};_f._closure={sharedValues:sharedValues,GESTURE_STATE:GESTURE_STATE,vx0:vx0,a:a,t:t,directionX:directionX,vy0:vy0,directionY:directionY,adjustImg:adjustImg,nextTick:nextTick};_f.asString="function _f(){const{sharedValues,GESTURE_STATE,vx0,a,t,directionX,vy0,directionY,adjustImg,nextTick}=jsThis._closure;{if(sharedValues[GESTURE_STATE].value!==3)return;var moveX=0;var moveY=0;if(vx0>0){var vx1=a*t+vx0;if(vx1>0){var s=vx0*t+a*Math.pow(t,2)/2;moveX=s*directionX;vx0=vx1;}else{vx0=0;}}if(vy0>0){var vy1=a*t+vy0;if(vy1>0){var _s=vy0*t+a*Math.pow(t,2)/2;moveY=_s*directionY;vy0=vy1;}else{vy0=0;}}if(moveX||moveY){adjustImg({moveX:moveX,moveY:moveY});setTimeout(nextTick,t);}else{sharedValues[GESTURE_STATE].value=0;}}}";_f.__workletHash=15990648472641;_f.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (340:31)";_f.__worklet=true;return _f;}();setTimeout(nextTick,t);}};globalThis.eventBus.on("".concat(pageId).concat(id,"End"),globalThis.temp["".concat(pageId).concat(id,"ImgEnd")]);}if(!globalThis.temp["".concat(pageId).concat(id,"ImgDoubleTap")]){globalThis.temp["".concat(pageId).concat(id,"ImgDoubleTap")]=function(args){return adjustImg(args);};globalThis.eventBus.on("".concat(pageId).concat(id,"DoubleTap"),globalThis.temp["".concat(pageId).concat(id,"ImgDoubleTap")]);}}}',e.__workletHash=2227153900162,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (150:32)",e.__worklet=!0,e}())()},detached:function(){this.isAttached=!1;var e=this.data.image.id,t=this.getPageId();(0,a.getRunOnUI)(this.renderer)(function(){var a=function(){["Move","Scale","End","DoubleTap"].forEach(function(){var a=function(a){var l="".concat(t).concat(e,"Img").concat(a);globalThis.temp[l]&&(globalThis.eventBus.off("".concat(t).concat(e).concat(a),globalThis.temp[l]),delete globalThis.temp[l])};return a._closure={pageId:t,id:e},a.asString='function _f(item){const{pageId,id}=jsThis._closure;{var globalKey="".concat(pageId).concat(id,"Img").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(id).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}',a.__workletHash=0xa0dc876bade,a.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (403:27)",a.__worklet=!0,a}())};return a._closure={pageId:t,id:e},a.asString='function _f(){const{pageId,id}=jsThis._closure;{var removeList=[\'Move\',\'Scale\',\'End\',\'DoubleTap\'];removeList.forEach(function(){var _f=function _f(item){var globalKey="".concat(pageId).concat(id,"Img").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(id).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}};_f._closure={pageId:pageId,id:id};_f.asString="function _f(item){const{pageId,id}=jsThis._closure;{var globalKey=\\"\\".concat(pageId).concat(id,\\"Img\\").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off(\\"\\".concat(pageId).concat(id).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}";_f.__workletHash=11054314076894;_f.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (403:27)";_f.__worklet=true;return _f;}());}}',a.__workletHash=9872916859513,a.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js (400:32)",a.__worklet=!0,a}())()}},methods:{resetImg:function(){var e,a=null!==(e=this.sharedValues)&&void 0!==e?e:[],t=a[15].value,l=a[16].value,i=a[17].value;this.calcImgLimit(i,a[3].value,a[4].value),a[0].value=t,a[1].value=l,a[12].value=t,a[13].value=l,a[2].value=i,a[14].value=i},onImgLoad:function(e){var a,i=e.detail,o=i.width,s=i.height,v=null!==(a=this.sharedValues)&&void 0!==a?a:[];if(!t||!l){var n=wx.getSystemInfoSync();t=n.screenWidth,l=n.screenHeight}var r=t/l;if(v[3].value=o,v[4].value=s,o&&s){var c=1,u=0,m=0;if(o/s>r){u=(t-o)/2;var h=s*(c=t/o);m=(l-h)/2-(s-h)/2,v[5].value=o>t?2:10,v[6].value=o>t?t/o:1}else{m=(l-s)/2;var _=o*(c=l/s);u=(t-_)/2-(o-_)/2,v[5].value=s>l?2:10,v[6].value=s>l?l/s:1}this.calcImgLimit(c,o,s),v[0].value=u,v[1].value=m,v[12].value=u,v[13].value=m,v[2].value=c,v[14].value=c,v[15].value=u,v[16].value=m,v[17].value=c,this.isImgLoaded=!0,1===this.data.status&&this.triggerEvent("render",this.data.image)}},onDoubleTap:function(e){var a,t=null!==(a=this.sharedValues)&&void 0!==a?a:[],l=t[2].value,i=t[6].value;globalThis.eventBus.emit("".concat(t[19].value).concat(t[18].value,"DoubleTap"),{scale:l<=i?2:1e-4,centerX:e.absoluteX,centerY:e.absoluteY,withAnimation:!0})},_onDoubleTap_worklet_factory_:function(){var e=this;return function(){var a=function(a){var t,l=null!==(t=e.sharedValues)&&void 0!==t?t:[],i=l[2].value,o=l[6].value;globalThis.eventBus.emit("".concat(l[19].value).concat(l[18].value,"DoubleTap"),{scale:i<=o?2:1e-4,centerX:a.absoluteX,centerY:a.absoluteY,withAnimation:!0})};return a._closure={_this:{sharedValues:e.sharedValues},SCALE:2,IMG_MIN_SCALE:6,PAGE_ID:19,CURRENT_ID:18},a.asString='function _f(evt){const{_this,SCALE,IMG_MIN_SCALE,PAGE_ID,CURRENT_ID}=jsThis._closure;{var _this$sharedValues4;var sharedValues=(_this$sharedValues4=_this.sharedValues)!==null&&_this$sharedValues4!==void 0?_this$sharedValues4:[];var currentScale=sharedValues[SCALE].value;var minScale=sharedValues[IMG_MIN_SCALE].value;globalThis.eventBus.emit("".concat(sharedValues[PAGE_ID].value).concat(sharedValues[CURRENT_ID].value,"DoubleTap"),{scale:currentScale<=minScale?2:0.0001,centerX:evt.absoluteX,centerY:evt.absoluteY,withAnimation:true});}}',a.__workletHash=0xdb01fa57bd0,a.__location="packageSkylineExamples/examples/album/components/previewer/preview-image/index.js",a.__worklet=!0,a}()}}});