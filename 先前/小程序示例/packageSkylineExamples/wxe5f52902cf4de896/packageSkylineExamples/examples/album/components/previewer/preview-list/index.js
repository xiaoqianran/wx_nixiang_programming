var e=require("../../../../../../@babel/runtime/helpers/regeneratorRuntime"),a=require("../../../../../../@babel/runtime/helpers/asyncToGenerator"),t=require("../../../utils/worklet"),n=1,r=2,o=3;Component({properties:{index:{type:Number,value:0},list:{type:Array,value:[]}},data:{currentIndex:-99,needSwiperAnimation:!0},observers:{list:function(e){var a,t=this.data.index,n=e[t];n&&((null!==(a=this.sharedValues)&&void 0!==a?a:[])[1].value=n.id,this.toggleImage(t,!0))},index:function(e){var a=this.data.list.length;if(a)if(e!==this.data.currentIndex&&e>=0&&e<a)this.toggleImage(e,!0);else{var t=this.data.list[e];t&&t.id===this.currentRenderImage&&this.onImageRender({detail:t})}}},lifetimes:{created:function(){var e=(0,t.getShared)(this.renderer);this.sharedValues=[e(0),e(""),e(this.renderer)]},attached:function(){var i=this;return a(e().mark((function a(){var l,s,c;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=i.getPageId(),c=null!==(l=i.sharedValues)&&void 0!==l?l:[],(0,t.getRunOnUI)(i.renderer)((a=void 0,(a=function(){globalThis.temp["".concat(s,"PreviewerBack")]||(globalThis.temp["".concat(s,"PreviewerBack")]=function(){return c[0].value=o},globalThis.eventBus.on("".concat(s,"Back"),globalThis.temp["".concat(s,"PreviewerBack")])),globalThis.temp["".concat(s,"PreviewerToggle")]||(globalThis.temp["".concat(s,"PreviewerToggle")]=function(){return c[0].value=r},globalThis.eventBus.on("".concat(s,"Toggle"),globalThis.temp["".concat(s,"PreviewerToggle")])),globalThis.temp["".concat(s,"PreviewerMoving")]||(globalThis.temp["".concat(s,"PreviewerMoving")]=function(){return c[0].value=n},globalThis.eventBus.on("".concat(s,"Moving"),globalThis.temp["".concat(s,"PreviewerMoving")])),globalThis.temp["".concat(s,"PreviewerMove")]||(globalThis.temp["".concat(s,"PreviewerMove")]=function(e){var a=c[1].value;globalThis.eventBus.emit("".concat(s).concat(a,"Move"),e)},globalThis.eventBus.on("".concat(s,"Move"),globalThis.temp["".concat(s,"PreviewerMove")])),globalThis.temp["".concat(s,"PreviewerScale")]||(globalThis.temp["".concat(s,"PreviewerScale")]=function(e){var a=c[1].value;globalThis.eventBus.emit("".concat(s).concat(a,"Scale"),e)},globalThis.eventBus.on("".concat(s,"Scale"),globalThis.temp["".concat(s,"PreviewerScale")])),globalThis.temp["".concat(s,"PreviewerEnd")]||(globalThis.temp["".concat(s,"PreviewerEnd")]=function(e){var a=c[1].value;globalThis.eventBus.emit("".concat(s).concat(a,"End"),e)},globalThis.eventBus.on("".concat(s,"End"),globalThis.temp["".concat(s,"PreviewerEnd")]))})._closure={pageId:s,sharedValues:c,GESTURE_STATE:0,PreviewerGesture:{Back:o,Toggle:r,Moving:n},CURRENT_ID:1},a.asString='function _f(){const{pageId,sharedValues,GESTURE_STATE,PreviewerGesture,CURRENT_ID}=jsThis._closure;{if(!globalThis.temp["".concat(pageId,"PreviewerBack")]){globalThis.temp["".concat(pageId,"PreviewerBack")]=function(){return sharedValues[GESTURE_STATE].value=PreviewerGesture.Back;};globalThis.eventBus.on("".concat(pageId,"Back"),globalThis.temp["".concat(pageId,"PreviewerBack")]);}if(!globalThis.temp["".concat(pageId,"PreviewerToggle")]){globalThis.temp["".concat(pageId,"PreviewerToggle")]=function(){return sharedValues[GESTURE_STATE].value=PreviewerGesture.Toggle;};globalThis.eventBus.on("".concat(pageId,"Toggle"),globalThis.temp["".concat(pageId,"PreviewerToggle")]);}if(!globalThis.temp["".concat(pageId,"PreviewerMoving")]){globalThis.temp["".concat(pageId,"PreviewerMoving")]=function(){return sharedValues[GESTURE_STATE].value=PreviewerGesture.Moving;};globalThis.eventBus.on("".concat(pageId,"Moving"),globalThis.temp["".concat(pageId,"PreviewerMoving")]);}if(!globalThis.temp["".concat(pageId,"PreviewerMove")]){globalThis.temp["".concat(pageId,"PreviewerMove")]=function(args){var currentId=sharedValues[CURRENT_ID].value;globalThis.eventBus.emit("".concat(pageId).concat(currentId,"Move"),args);};globalThis.eventBus.on("".concat(pageId,"Move"),globalThis.temp["".concat(pageId,"PreviewerMove")]);}if(!globalThis.temp["".concat(pageId,"PreviewerScale")]){globalThis.temp["".concat(pageId,"PreviewerScale")]=function(args){var currentId=sharedValues[CURRENT_ID].value;globalThis.eventBus.emit("".concat(pageId).concat(currentId,"Scale"),args);};globalThis.eventBus.on("".concat(pageId,"Scale"),globalThis.temp["".concat(pageId,"PreviewerScale")]);}if(!globalThis.temp["".concat(pageId,"PreviewerEnd")]){globalThis.temp["".concat(pageId,"PreviewerEnd")]=function(args){var currentId=sharedValues[CURRENT_ID].value;globalThis.eventBus.emit("".concat(pageId).concat(currentId,"End"),args);};globalThis.eventBus.on("".concat(pageId,"End"),globalThis.temp["".concat(pageId,"PreviewerEnd")]);}}}',a.__workletHash=7819198461238,a.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js (76:32)",a.__worklet=!0,a))();case 3:case"end":return e.stop()}var a}),a)})))()},detached:function(){var e,a=this.getPageId();(0,t.getRunOnUI)(this.renderer)(((e=function(){["Back","Toggle","Moving","Move","Scale","End"].forEach(function(){var e=function(e){var t="".concat(a,"Previewer").concat(e);globalThis.temp[t]&&(globalThis.eventBus.off("".concat(a).concat(e),globalThis.temp[t]),delete globalThis.temp[t])};return e._closure={pageId:a},e.asString='function _f(item){const{pageId}=jsThis._closure;{var globalKey="".concat(pageId,"Previewer").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}',e.__workletHash=0xe3509632361,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js (133:27)",e.__worklet=!0,e}())})._closure={pageId:a},e.asString='function _f(){const{pageId}=jsThis._closure;{var removeList=[\'Back\',\'Toggle\',\'Moving\',\'Move\',\'Scale\',\'End\'];removeList.forEach(function(){var _f=function _f(item){var globalKey="".concat(pageId,"Previewer").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off("".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}};_f._closure={pageId:pageId};_f.asString="function _f(item){const{pageId}=jsThis._closure;{var globalKey=\\"\\".concat(pageId,\\"Previewer\\").concat(item);if(globalThis.temp[globalKey]){globalThis.eventBus.off(\\"\\".concat(pageId).concat(item),globalThis.temp[globalKey]);delete globalThis.temp[globalKey];}}}";_f.__workletHash=15620953547617;_f.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js (133:27)";_f.__worklet=true;return _f;}());}}',e.__workletHash=0xb17a266291b,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js (130:32)",e.__worklet=!0,e))()}},methods:{toggleImage:function(t){var n=arguments,r=this;return a(e().mark((function a(){var o,i,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.length>1&&void 0!==n[1]&&n[1],l=r.data.list[t]){e.next=4;break}return e.abrupt("return");case 4:(null!==(o=r.sharedValues)&&void 0!==o?o:[])[1].value=l.id,r.setData({currentIndex:t,needSwiperAnimation:!i}),r.data.index=t,r.triggerEvent("beforerender",{index:t,image:l});case 9:case"end":return e.stop()}}),a)})))()},onImageRender:function(e){var a=this.data.list[this.data.currentIndex]||{};e.detail.id===a.id&&(this.currentRenderImage=a.id)},onTapImage:function(){(0,t.getRunOnJS)(this.sharedValues[2].value)(this.triggerEvent.bind(this))("tapimage")},_onTapImage_worklet_factory_:function(){var e,a=this,n=this.triggerEvent.bind(this);return(e=function(){(0,t.getRunOnJS)(a.sharedValues[2].value)(n)("tapimage")})._closure={getRunOnJS:t.getRunOnJS,_this3:{sharedValues:a.sharedValues},RENDERER:2,_triggerEvent_:n},e.asString="function _f(){const{getRunOnJS,_this3,RENDERER,_triggerEvent_}=jsThis._closure;{getRunOnJS(_this3.sharedValues[RENDERER].value)(_triggerEvent_)('tapimage');}}",e.__workletHash=0xf774f2662af,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js",e.__worklet=!0,e},shouldResponseOnMove:function(){var e;return(null!==(e=this.sharedValues)&&void 0!==e?e:[])[0].value===r},_shouldResponseOnMove_worklet_factory_:function(){var e,a=this;return(e=function(){var e;return(null!==(e=a.sharedValues)&&void 0!==e?e:[])[0].value===r})._closure={_this4:{sharedValues:a.sharedValues},GESTURE_STATE:0,PreviewerGesture:{Toggle:r}},e.asString="function _f(){const{_this4,GESTURE_STATE,PreviewerGesture}=jsThis._closure;{var _this$sharedValues3;var sharedValues=(_this$sharedValues3=_this4.sharedValues)!==null&&_this$sharedValues3!==void 0?_this$sharedValues3:[];return sharedValues[GESTURE_STATE].value===PreviewerGesture.Toggle;}}",e.__workletHash=8655524540342,e.__location="packageSkylineExamples/examples/album/components/previewer/preview-list/index.js",e.__worklet=!0,e},onSwiperChange:function(e){var a=e.detail,t=a.current;"touch"===a.source&&this.toggleImage(t,!1)}}});