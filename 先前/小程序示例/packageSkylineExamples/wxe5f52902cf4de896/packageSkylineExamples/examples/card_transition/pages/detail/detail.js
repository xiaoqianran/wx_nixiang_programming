var t=require("../list/route"),e=require("../list/utils"),a=wx.getSystemInfoSync().screenWidth,s=wx.worklet,r=s.shared,i=s.timing,n=s.Easing,o=1,l=2,u=3,c=4,p=-1/3*a,v=2/3*a;Component({properties:{index:{type:Number,value:-1},url:{type:String,value:""},content:{type:String,value:""},ratio:{type:Number,value:1},nickname:{type:String,value:""}},data:{swiperHeight:0,imageList:["https://res.wx.qq.com/op_res/BqgN85sXxTbk1kynEEihr7lTnuuiwGJPwwjxDVYbDolj05sAxd5cOESVZt4_nl1KwzkiDWTvG56LuhE45xAaZA","https://res.wx.qq.com/op_res/Ak_VAL-nLvq6laAMVJA86rf3NAZ2vY86v757dfja16Z95xtoxk4BWWDuTCPT-pD1SjGGIddUsH0l6C8Yu5LJlw"]},lifetimes:{created:function(){this.startX=r(0),this.startY=r(0),this.transX=r(0),this.transY=r(0),this.isInteracting=r(!1)},attached:function(){var s,r=this;this.setData({swiperHeight:a/this.data.ratio}),this.customRouteContext=null===(s=wx.router)||void 0===s?void 0:s.getRouteContext(this);var i,o=this.customRouteContext||{},l=o.primaryAnimation,u=o.primaryAnimationStatus,c=o.userGestureInProgress,p=o.shareEleTop,v=(0,t.CurveAnimation)({animation:l,animationStatus:u,curve:n.in(t.Curves.fastOutSlowIn),reverseCurve:n.out(t.Curves.fastOutSlowIn)});this.applyAnimatedStyle(".detail-content",((i=function(){return{opacity:v.value}})._closure={_curvePrimaryAnimation:v},i.asString="function _f(){const{_curvePrimaryAnimation}=jsThis._closure;{return{opacity:_curvePrimaryAnimation.value};}}",i.__workletHash=719989909814,i.__location="packageSkylineExamples/examples/card_transition/pages/detail/detail.js (76:49)",i.__worklet=!0,i)),this.applyAnimatedStyle("#fake-host",function(){var s=function(){if(c.value&&globalThis.RouteCardSrcRect&&null!=globalThis.RouteCardSrcRect.value){var s=globalThis.RouteCardSrcRect.value,i=globalThis.RouteCardDestRect.value,n=1-v.value,o=(0,t.lerp)(s.left,i.left,n),l=(0,t.lerp)(s.top,i.top,n),u=(0,t.lerp)(s.width,i.width,n)/a,d=o,h=l-p.value*u;return{transform:"translateX(".concat(d,"px) translateY(").concat(h,"px) scale(").concat(u,")"),transformOrigin:"0 0"}}var _=r.transX.value,m=r.transY.value,g=(0,e.clamp)(1-_/a*.5,0,1);return{transform:"translateX(".concat(_,"px) translateY(").concat(m,"px) scale(").concat(g,")"),transformOrigin:"50% 50%"}};return s._closure={userGestureInProgress:c,_curvePrimaryAnimation:v,lerp:t.lerp,screenWidth:a,shareEleTop:p,_this:{transX:r.transX,transY:r.transY},clamp:e.clamp},s.asString='function _f(){const{userGestureInProgress,_curvePrimaryAnimation,lerp,screenWidth,shareEleTop,_this,clamp}=jsThis._closure;{if(userGestureInProgress.value&&globalThis[\'RouteCardSrcRect\']&&globalThis[\'RouteCardSrcRect\'].value!=undefined){var begin=globalThis[\'RouteCardSrcRect\'].value;var end=globalThis[\'RouteCardDestRect\'].value;var t=1-_curvePrimaryAnimation.value;var shareEleX=lerp(begin.left,end.left,t);var shareEleY=lerp(begin.top,end.top,t);var shareEleW=lerp(begin.width,end.width,t);var _scale=shareEleW/screenWidth;var _transX=shareEleX;var _transY=shareEleY-shareEleTop.value*_scale;return{transform:"translateX(".concat(_transX,"px) translateY(").concat(_transY,"px) scale(").concat(_scale,")"),transformOrigin:\'0 0\'};}var transX=_this.transX.value;var transY=_this.transY.value;var scale=clamp(1-transX/screenWidth*0.5,0,1);return{transform:"translateX(".concat(transX,"px) translateY(").concat(transY,"px) scale(").concat(scale,")"),transformOrigin:\'50% 50%\'};}}',s.__workletHash=0xbe8d321eddd,s.__location="packageSkylineExamples/examples/card_transition/pages/detail/detail.js (83:44)",s.__worklet=!0,s}(),{immediate:!1})}},methods:{handlePanGesture:function(t){var s,r=this.customRouteContext,d=r.startUserGesture,h=r.stopUserGesture,_=r.primaryAnimation,m=r.didPop;if(t.state===o)this.startX.value=t.absoluteX,this.startY.value=t.absoluteY;else if(t.state===l){if(t.deltaX>0&&!this.isInteracting.value&&(this.isInteracting.value=!0),!this.isInteracting.value)return;var g=t.absoluteX-this.startX.value;this.transX.value=(0,e.clamp)(g,p,v),this.transY.value=t.absoluteY-this.startY.value}else if(t.state===u||t.state===c){if(!this.isInteracting.value)return;this.isInteracting.value=!1;var f=!1;(t.velocityX>500||this.transX.value/a>.25)&&(f=!0),f?(d(),_.value=i(0,{duration:180,easing:n.linear},((s=function(){h(),m()})._closure={stopUserGesture:h,didPop:m},s.asString="function _f(){const{stopUserGesture,didPop}=jsThis._closure;{stopUserGesture();didPop();}}",s.__workletHash=1563168231467,s.__location="packageSkylineExamples/examples/card_transition/pages/detail/detail.js (158:13)",s.__worklet=!0,s))):(this.transX.value=i(0,{duration:100}),this.transY.value=i(0,{duration:100}))}},_handlePanGesture_worklet_factory_:function(){var t,s=this;return(t=function(t){var r=s.customRouteContext,d=r.startUserGesture,h=r.stopUserGesture,_=r.primaryAnimation,m=r.didPop;if(t.state===o)s.startX.value=t.absoluteX,s.startY.value=t.absoluteY;else if(t.state===l){if(t.deltaX>0&&!s.isInteracting.value&&(s.isInteracting.value=!0),!s.isInteracting.value)return;var g=t.absoluteX-s.startX.value;s.transX.value=(0,e.clamp)(g,p,v),s.transY.value=t.absoluteY-s.startY.value}else if(t.state===u||t.state===c){if(!s.isInteracting.value)return;s.isInteracting.value=!1;var f=!1;(t.velocityX>500||s.transX.value/a>.25)&&(f=!0),f?(d(),_.value=i(0,{duration:180,easing:n.linear},function(){var t=function(){h(),m()};return t._closure={stopUserGesture:h,didPop:m},t.asString="function _f(){const{stopUserGesture,didPop}=jsThis._closure;{stopUserGesture();didPop();}}",t.__workletHash=1563168231467,t.__location="packageSkylineExamples/examples/card_transition/pages/detail/detail.js (158:13)",t.__worklet=!0,t}())):(s.transX.value=i(0,{duration:100}),s.transY.value=i(0,{duration:100}))}})._closure={_this2:{customRouteContext:s.customRouteContext,startX:s.startX,startY:s.startY,isInteracting:s.isInteracting,transX:s.transX,transY:s.transY},GestureState:{BEGIN:o,ACTIVE:l,END:u,CANCELLED:c},clamp:e.clamp,transLowerBound:p,transUpperBound:v,screenWidth:a,timing:i,Easing:{linear:n.linear}},t.asString='function _f(e){const{_this2,GestureState,clamp,transLowerBound,transUpperBound,screenWidth,timing,Easing}=jsThis._closure;{var _this$customRouteCont=_this2.customRouteContext,startUserGesture=_this$customRouteCont.startUserGesture,stopUserGesture=_this$customRouteCont.stopUserGesture,primaryAnimation=_this$customRouteCont.primaryAnimation,didPop=_this$customRouteCont.didPop;if(e.state===GestureState.BEGIN){_this2.startX.value=e.absoluteX;_this2.startY.value=e.absoluteY;}else if(e.state===GestureState.ACTIVE){if(e.deltaX>0&&!_this2.isInteracting.value){_this2.isInteracting.value=true;}if(!_this2.isInteracting.value)return;var transX=e.absoluteX-_this2.startX.value;_this2.transX.value=clamp(transX,transLowerBound,transUpperBound);_this2.transY.value=e.absoluteY-_this2.startY.value;}else if(e.state===GestureState.END||e.state===GestureState.CANCELLED){if(!_this2.isInteracting.value)return;_this2.isInteracting.value=false;var shouldFinish=false;if(e.velocityX>500||_this2.transX.value/screenWidth>0.25){shouldFinish=true;}if(shouldFinish){startUserGesture();primaryAnimation.value=timing(0.0,{duration:180,easing:Easing.linear},function(){var _f=function _f(){stopUserGesture();didPop();};_f._closure={stopUserGesture:stopUserGesture,didPop:didPop};_f.asString="function _f(){const{stopUserGesture,didPop}=jsThis._closure;{stopUserGesture();didPop();}}";_f.__workletHash=1563168231467;_f.__location="packageSkylineExamples/examples/card_transition/pages/detail/detail.js (158:13)";_f.__worklet=true;return _f;}());}else{_this2.transX.value=timing(0.0,{duration:100});_this2.transY.value=timing(0.0,{duration:100});}}}}',t.__workletHash=0xc5f5934a3c4,t.__location="packageSkylineExamples/examples/card_transition/pages/detail/detail.js",t.__worklet=!0,t}}});