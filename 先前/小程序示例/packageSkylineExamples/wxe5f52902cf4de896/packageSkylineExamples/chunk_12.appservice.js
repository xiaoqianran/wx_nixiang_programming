__wxCodeSpace__.batchAddCompiledTemplate(function(G,R,D,Q,gdc,X,Y,Z,RG={}){var P=RG.P||function(a){return typeof a==='function'?a:()=>{}};return {'packageSkylineExamples/examples/half-screen/pages/index/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={},K=U===true,c=(C)=>{},b=(C,T,E)=>{E("image",{},(N,C)=>{if(C)O(N,"src","https://res.wx.qq.com/op_res/FAyreGAUWqLJv09oZqfNbsZz1a4HO_JEUy5rIcjJrlKaGrOcbjL6i6BvGd8snx2csU2JI0UwcVZGE48Tzvf9aQ");if(C)O(N,"mode","widthFix")},c)},e=(C,T)=>{C?T("打开留言"):T()},f=(C)=>{},d=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"open-comment-wording")},e);E("view",{},(N,C)=>{if(C)L(N,"safe-area-inset-bottom")},f)},j=(C,T)=>{C?T("∨"):T()},i=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"close-comment");if(C)R.v(N,"tap","onTapCloseComment",!1,!1,!1,!1)},j);C?T(" 留言 "):T()},h=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"comment-header")},i)},n,o,p,q,r,v=(C)=>{},x=(C,T)=>{C||K||Z(p,"userName")?T(Y(X(n).userName)):T()},y=(C,T)=>{C||K||Z(p,"comment")?T(Y(X(n).comment)):T()},w=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"user-name")},x);E("text",{},(N,C)=>{if(C)L(N,"content")},y)},u=(C,T,E)=>{E("image",{},(N,C)=>{if(C||K||undefined)O(N,"fade-in",true);if(C)L(N,"user-head-img");if(C||K||Z(p,"userHeadImg"))O(N,"src",X(n).userHeadImg)},v);E("view",{},(N,C)=>{if(C)L(N,"others")},w)},z,A0,B0,C0,D0,G0=(C)=>{},I0=(C,T)=>{C||K||!!(Z(B0,"userName")||Z(B0,"replyUserName"))||undefined?T(Y(Y(X(z).userName)+" 回复 "+Y(X(z).replyUserName))):T()},J0=(C,T)=>{C||K||Z(B0,"comment")?T(Y(X(z).comment)):T()},H0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"user-name")},I0);E("text",{},(N,C)=>{if(C)L(N,"content")},J0)},F0=(C,T,E)=>{E("image",{},(N,C)=>{if(C||K||undefined)O(N,"fade-in",true);if(C)L(N,"user-head-img");if(C||K||Z(B0,"userHeadImg"))O(N,"src",X(z).userHeadImg)},G0);E("view",{},(N,C)=>{if(C)L(N,"others")},H0)},E0=(C,$A,$B,$C,$D,$E,T,E)=>{z=$A,A0=$B,B0=$C,C0=$D,D0=$E;E("view",{},(N,C)=>{if(C)L(N,"sub-comment")},F0)},t=(C,T,E,B,F)=>{E("view",{},(N,C)=>{if(C)L(N,"main-comment")},u);F(X(n).subCommentList,"comment",U?Z(p,"subCommentList"):undefined,[...r,"subCommentList"],E0)},s=(C,$A,$B,$C,$D,$E,T,E)=>{n=$A,o=$B,p=$C,q=$D,r=$E;E("view",{},(N,C)=>{if(C)L(N,"comment-item")},t)},K0=(C)=>{},m=(C,T,E,B,F)=>{F(D.list,"comment",U?U.list:undefined,[0,"list"],s);E("view",{},(N,C)=>{if(C)L(N,"safe-area-inset-bottom")},K0)},l=(C,T,E)=>{E("scroll-view",{},(N,C)=>{if(C)L(N,"comment-list");if(C||K||undefined)O(N,"scroll-y",true);if(C)R.wl(N,"adjustDecelerationVelocity","adjustDecelerationVelocity");if(C)R.wl(N,"onscrollupdate","handleScroll");if(C)O(N,"type","list");if(C||K||undefined)O(N,"show-scrollbar",false)},m)},k=(C,T,E)=>{E("vertical-drag-gesture-handler",{},(N,C)=>{if(C)R.i(N,"scroll");if(C)O(N,"native-view","scroll-view");if(C)R.wl(N,"shouldResponseOnMove","shouldScrollViewResponse");if(C||K||[])O(N,"simultaneous-handlers",["pan"])},l)},g=(C,T,E)=>{E("pan-gesture-handler",{},(N,C)=>{if(C)R.wl(N,"ongesture","handlePan");if(C)R.y(N,"flex-shrink: 0;")},h);E("pan-gesture-handler",{},(N,C)=>{if(C)R.i(N,"pan");if(C)R.wl(N,"shouldResponseOnMove","shouldPanResponse");if(C||K||[])O(N,"simultaneous-handlers",["scroll"]);if(C)R.wl(N,"ongesture","handlePan")},k)},a=(C,T,E)=>{E("scroll-view",{},(N,C)=>{if(C)L(N,"container");if(C||K||undefined)O(N,"scroll-y",true);if(C)O(N,"type","list")},b);E("view",{},(N,C)=>{if(C)L(N,"open-comment");if(C)R.v(N,"tap","onTapOpenComment",!1,!1,!1,!1)},d);E("view",{},(N,C)=>{if(C)L(N,"comment-container")},g)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),}});;__wxRoute = "packageSkylineExamples/examples/half-screen/pages/index/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkylineExamples/examples/half-screen/pages/index/index.js";define("packageSkylineExamples/examples/half-screen/pages/index/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("./comment-data"),e=wx.worklet,n=e.shared,s=e.timing,a=2,o=3,r=4;Component({data:{list:(0,t.getCommentList)()},lifetimes:{created:function(){this.transY=n(1e3),this.scrollTop=n(0),this.startPan=n(!0),this.commentHeight=n(1e3)},ready:function(){var t,e=this,n=this.createSelectorQuery();n.select(".comment-container").boundingClientRect(),n.exec((function(t){e.transY.value=e.commentHeight.value=t[0].height})),this.applyAnimatedStyle(".comment-container",((t=function(){return{transform:"translateY(".concat(e.transY.value,"px)")}})._closure={_this:{transY:e.transY}},t.asString='function _f(){const{_this}=jsThis._closure;{return{transform:"translateY(".concat(_this.transY.value,"px)")};}}',t.__workletHash=2721270280079,t.__location="packageSkylineExamples/examples/half-screen/pages/index/index.js (32:52)",t.__worklet=!0,t))}},methods:{onTapOpenComment:function(){this.openComment(300)},openComment:function(t){this.transY.value=s(0,{duration:t})},_openComment_worklet_factory_:function(){var t,e=this;return(t=function(t){e.transY.value=s(0,{duration:t})})._closure={_this2:{transY:e.transY},timing:s},t.asString="function _f(duration){const{_this2,timing}=jsThis._closure;{_this2.transY.value=timing(0,{duration:duration});}}",t.__workletHash=8677300395290,t.__location="packageSkylineExamples/examples/half-screen/pages/index/index.js",t.__worklet=!0,t},onTapCloseComment:function(){this.closeComment()},closeComment:function(){this.transY.value=s(this.commentHeight.value,{duration:200})},_closeComment_worklet_factory_:function(){var t,e=this;return(t=function(){e.transY.value=s(e.commentHeight.value,{duration:200})})._closure={_this3:{transY:e.transY,commentHeight:e.commentHeight},timing:s},t.asString="function _f(){const{_this3,timing}=jsThis._closure;{_this3.transY.value=timing(_this3.commentHeight.value,{duration:200});}}",t.__workletHash=8626706230229,t.__location="packageSkylineExamples/examples/half-screen/pages/index/index.js",t.__worklet=!0,t},shouldPanResponse:function(){return this.startPan.value},_shouldPanResponse_worklet_factory_:function(){var t,e=this;return(t=function(){return e.startPan.value})._closure={_this4:{startPan:e.startPan}},t.asString="function _f(){const{_this4}=jsThis._closure;{return _this4.startPan.value;}}",t.__workletHash=0xa29eabcea02,t.__location="packageSkylineExamples/examples/half-screen/pages/index/index.js",t.__worklet=!0,t},shouldScrollViewResponse:function(t){if(this.transY.value>0)return!1;var e=this.scrollTop.value,n=t.deltaY,s=e<=0&&n>0;return this.startPan.value=s,!s},_shouldScrollViewResponse_worklet_factory_:function(){var t,e=this;return(t=function(t){if(e.transY.value>0)return!1;var n=e.scrollTop.value,s=t.deltaY,a=n<=0&&s>0;return e.startPan.value=a,!a})._closure={_this5:{transY:e.transY,scrollTop:e.scrollTop,startPan:e.startPan}},t.asString="function _f(pointerEvent){const{_this5}=jsThis._closure;{if(_this5.transY.value>0)return false;var scrollTop=_this5.scrollTop.value;var deltaY=pointerEvent.deltaY;var result=scrollTop<=0&&deltaY>0;_this5.startPan.value=result;return!result;}}",t.__workletHash=7341218106870,t.__location="packageSkylineExamples/examples/half-screen/pages/index/index.js",t.__worklet=!0,t},handlePan:function(t){if(t.state===a){var e=this.transY.value,n=Math.max(0,e+t.deltaY);if(e===n)return;this.transY.value=n}t.state!==o&&t.state!==r||(t.velocityY>500&&this.transY.value>50||this.transY.value>this.commentHeight.value/2?this.closeComment():this.openComment(100))},_handlePan_worklet_factory_:function(){var t,e=this,n=this._closeComment_worklet_factory_(),s=this._openComment_worklet_factory_();return(t=function(t){if(t.state===a){var l=e.transY.value,i=Math.max(0,l+t.deltaY);if(l===i)return;e.transY.value=i}t.state!==o&&t.state!==r||(t.velocityY>500&&e.transY.value>50||e.transY.value>e.commentHeight.value/2?n():s(100))})._closure={GestureState:{ACTIVE:a,END:o,CANCELLED:r},_this6:{transY:e.transY,commentHeight:e.commentHeight},closeComment:n,openComment:s},t.asString="function _f(gestureEvent){const{GestureState,_this6,closeComment,openComment}=jsThis._closure;{if(gestureEvent.state===GestureState.ACTIVE){var curPosition=_this6.transY.value;var destination=Math.max(0,curPosition+gestureEvent.deltaY);if(curPosition===destination)return;_this6.transY.value=destination;}if(gestureEvent.state===GestureState.END||gestureEvent.state===GestureState.CANCELLED){if(gestureEvent.velocityY>500&&_this6.transY.value>50){closeComment();}else if(_this6.transY.value>_this6.commentHeight.value/2){closeComment();}else{openComment(100);}}}}",t.__workletHash=9391561281443,t.__location="packageSkylineExamples/examples/half-screen/pages/index/index.js",t.__worklet=!0,t},adjustDecelerationVelocity:function(t){return this.scrollTop.value<=0?0:t},_adjustDecelerationVelocity_worklet_factory_:function(){var t,e=this;return(t=function(t){return e.scrollTop.value<=0?0:t})._closure={_this7:{scrollTop:e.scrollTop}},t.asString="function _f(velocity){const{_this7}=jsThis._closure;{var scrollTop=_this7.scrollTop.value;return scrollTop<=0?0:velocity;}}",t.__workletHash=0xb13c5e2f25c,t.__location="packageSkylineExamples/examples/half-screen/pages/index/index.js",t.__worklet=!0,t},handleScroll:function(t){this.scrollTop.value=t.detail.scrollTop},_handleScroll_worklet_factory_:function(){var t,e=this;return(t=function(t){e.scrollTop.value=t.detail.scrollTop})._closure={_this8:{scrollTop:e.scrollTop}},t.asString="function _f(evt){const{_this8}=jsThis._closure;{_this8.scrollTop.value=evt.detail.scrollTop;}}",t.__workletHash=0xe6cb5574fbb,t.__location="packageSkylineExamples/examples/half-screen/pages/index/index.js",t.__worklet=!0,t}}});
},{isPage:true,isComponent:true,currentFile:'packageSkylineExamples/examples/half-screen/pages/index/index.js'});require("packageSkylineExamples/examples/half-screen/pages/index/index.js");