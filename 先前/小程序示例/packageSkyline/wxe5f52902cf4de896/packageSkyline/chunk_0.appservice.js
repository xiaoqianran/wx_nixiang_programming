__wxCodeSpace__.batchAddCompiledTemplate(function(G,R,D,Q,gdc,X,Y,Z,RG={}){var P=RG.P||function(a){return typeof a==='function'?a:()=>{}};return {'packageSkyline/pages/half-page/half-page/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={},K=U===true,g=(C)=>{},f=(C,T,E)=>{E("image",{},(N,C)=>{if(C)L(N,"icon");if(C)O(N,"src","../../../resources/icon_down_arrow.svg");if(C)O(N,"mode","aspectFit")},g)},e=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"btn")},f)},h=(C,T)=>{C?T("评论列表"):T()},d=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"btn-wrp");if(C)R.v(N,"tap","back",!1,!1,!1,!1)},e);E("view",{},(N,C)=>{if(C)L(N,"title")},h)},k,l,m,n,o,s=(C)=>{},u=(C,T)=>{C||K||Z(m,"userName")?T(Y(X(k).userName)):T()},v=(C,T)=>{C||K||Z(m,"comment")?T(Y(X(k).comment)):T()},t=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"user-name")},u);E("text",{},(N,C)=>{if(C)L(N,"content")},v)},r=(C,T,E)=>{E("image",{},(N,C)=>{if(C)L(N,"user-head-img");if(C||K||Z(m,"userHeadImg"))O(N,"src",X(k).userHeadImg)},s);E("view",{},(N,C)=>{if(C)L(N,"others")},t)},w,z,A0,B0,C0,D0,G0=(C)=>{},I0=(C,T)=>{C||K||!!(Z(B0,"userName")||Z(B0,"replyUserName"))||undefined?T(Y(Y(X(z).userName)+" 回复 "+Y(X(z).replyUserName))):T()},J0=(C,T)=>{C||K||Z(B0,"comment")?T(Y(X(z).comment)):T()},H0=(C,T,E)=>{E("text",{},(N,C)=>{if(C)L(N,"user-name")},I0);E("text",{},(N,C)=>{if(C)L(N,"content")},J0)},F0=(C,T,E)=>{E("image",{},(N,C)=>{if(C)L(N,"user-head-img");if(C||K||Z(B0,"userHeadImg"))O(N,"src",X(z).userHeadImg)},G0);E("view",{},(N,C)=>{if(C)L(N,"others")},H0)},E0=(C,$A,$B,$C,$D,$E,T,E)=>{z=$A,A0=$B,B0=$C,C0=$D,D0=$E;E("view",{},(N,C)=>{if(C)L(N,"sub-comment")},F0)},y=(C,T,E,B,F)=>{F(X(k).subCommentList,"id",U?Z(m,"subCommentList"):undefined,[...o,"subCommentList"],E0)},x=(C,T,E)=>{if(w===1){E("view",{},(N,C)=>{if(C)L(N,"sub-comment-list")},y)}},q=(C,T,E,B)=>{E("view",{},(N,C)=>{if(C)L(N,"main-comment")},r);w=X(X(k).subCommentList).length?1:0;B(w,x)},p=(C,$A,$B,$C,$D,$E,T,E)=>{k=$A,l=$B,m=$C,n=$D,o=$E;E("view",{},(N,C)=>{if(C)L(N,"comment-item comment")},q)},j=(C,T,E,B,F)=>{F(D.list,null,U?U.list:undefined,[0,"list"],p)},i=(C,T,E)=>{E("scroll-view",{},(N,C)=>{if(C)R.y(N,"flex: 1; overflow: auto; width: 100%;");if(C||K||undefined)O(N,"scroll-y",true);if(C)O(N,"bindscroll","handleScroll");if(C)R.wl(N,"adjustDecelerationVelocity","adjustDecelerationVelocity");if(C||K||undefined)O(N,"bounces",false);if(C||K||undefined)O(N,"refresher-enabled",false);if(C)O(N,"type","list")},j)},c=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"bottom-sheet")},d);E("vertical-drag-gesture-handler",{},(N,C)=>{if(C)R.i(N,"scroll");if(C)O(N,"native-view","scroll-view");if(C)R.wl(N,"shouldResponseOnMove","shouldScrollViewResponse");if(C||K||[])O(N,"simultaneousHandlers",["pan"])},i)},b=(C,T,E)=>{E("view",{},(N,C)=>{if(C)R.y(N,"width: 100%; height: 100%;padding-top: 40px;")},c)},a=(C,T,E)=>{E("vertical-drag-gesture-handler",{},(N,C)=>{if(C)R.i(N,"pan");if(C)R.wl(N,"shouldResponseOnMove","shouldPanResponse");if(C||K||[])O(N,"simultaneousHandlers",["scroll"]);if(C)R.wl(N,"ongesture","handleVerticalDrag");if(C)R.y(N,"flex: 1; overflow: auto;width: 100%;")},b)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),}});;__wxRoute = "packageSkyline/pages/half-page/half-page/index";__wxRouteBegin = true;__wxAppCurrentFile__="packageSkyline/pages/half-page/half-page/index.js";define("packageSkyline/pages/half-page/half-page/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var t=require("../../../common/custom-route/common"),e=require("../../../utils/comment"),a=getApp().globalData.windowHeight;Page({data:{list:(0,e.getCommentList)()},onLoad:function(){var t;(this.setData({renderer:this.renderer}),this._useWorklet="skyline"===this.renderer&&!!wx.worklet,this._useWorklet)&&(this.customRouteContext=null===(t=wx.router)||void 0===t?void 0:t.getRouteContext(this),this.scrollTop=wx.worklet.shared(0),this.startPan=wx.worklet.shared(!1),wx.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000",duration:300}))},onUnload:function(){wx.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#ffffff",duration:300})},back:function(){wx.navigateBack({delta:1})},shouldPanResponse:function(){return this.startPan.value},_shouldPanResponse_worklet_factory_:function(){var t,e=this;return(t=function(){return e.startPan.value})._closure={_this:{startPan:e.startPan}},t.asString="function _f(){const{_this}=jsThis._closure;{return _this.startPan.value;}}",t.__workletHash=0xbf7c728f6c2,t.__location="packageSkyline/pages/half-page/half-page/index.ts",t.__worklet=!0,t},shouldScrollViewResponse:function(t){if(this.customRouteContext.primaryAnimation.value<1)return!1;var e=this.scrollTop.value,a=t.deltaY,r=!(e<=0&&a>0);return this.startPan.value=!r,r},_shouldScrollViewResponse_worklet_factory_:function(){var t,e=this;return(t=function(t){if(e.customRouteContext.primaryAnimation.value<1)return!1;var a=e.scrollTop.value,r=t.deltaY,o=!(a<=0&&r>0);return e.startPan.value=!o,o})._closure={_this2:{customRouteContext:{primaryAnimation:e.customRouteContext.primaryAnimation},scrollTop:e.scrollTop,startPan:e.startPan}},t.asString="function _f(pointerEvent){const{_this2}=jsThis._closure;{var primaryAnimation=_this2.customRouteContext.primaryAnimation;if(primaryAnimation.value<1)return false;var scrollTop=_this2.scrollTop.value;var deltaY=pointerEvent.deltaY;var result=!(scrollTop<=0&&deltaY>0);_this2.startPan.value=!result;return result;}}",t.__workletHash=6344649734004,t.__location="packageSkyline/pages/half-page/half-page/index.ts",t.__worklet=!0,t},adjustDecelerationVelocity:function(t){return this.scrollTop.value<=0?0:t},_adjustDecelerationVelocity_worklet_factory_:function(){var t,e=this;return(t=function(t){return e.scrollTop.value<=0?0:t})._closure={_this3:{scrollTop:e.scrollTop}},t.asString="function _f(velocity){const{_this3}=jsThis._closure;{var scrollTop=_this3.scrollTop.value;return scrollTop<=0?0:velocity;}}",t.__workletHash=0xa3d0ea054dc,t.__location="packageSkyline/pages/half-page/half-page/index.ts",t.__worklet=!0,t},handleScroll:function(t){this._useWorklet&&(this.scrollTop.value=t.detail.scrollTop)},_handleScroll_worklet_factory_:function(){var t,e=this;return(t=function(t){e._useWorklet&&(e.scrollTop.value=t.detail.scrollTop)})._closure={_this4:{_useWorklet:e._useWorklet,scrollTop:e.scrollTop}},t.asString="function _f(event){const{_this4}=jsThis._closure;{if(!_this4._useWorklet)return;_this4.scrollTop.value=event.detail.scrollTop;}}",t.__workletHash=0x9efbdbad1a6,t.__location="packageSkyline/pages/half-page/half-page/index.ts",t.__worklet=!0,t},handleDragStart:function(){this.startPan.value=!0,(0,this.customRouteContext.startUserGesture)()},_handleDragStart_worklet_factory_:function(){var t,e=this;return(t=function(){e.startPan.value=!0,(0,e.customRouteContext.startUserGesture)()})._closure={_this5:{startPan:e.startPan,customRouteContext:{startUserGesture:e.customRouteContext.startUserGesture}}},t.asString="function _f(){const{_this5}=jsThis._closure;{_this5.startPan.value=true;var startUserGesture=_this5.customRouteContext.startUserGesture;startUserGesture();}}",t.__workletHash=8762590486741,t.__location="packageSkyline/pages/half-page/half-page/index.ts",t.__worklet=!0,t},handleDragUpdate:function(e){var a=this.customRouteContext.primaryAnimation,r=a.value-e;a.value=(0,t.clamp)(r,0,1)},_handleDragUpdate_worklet_factory_:function(){var e,a=this;return(e=function(e){var r=a.customRouteContext.primaryAnimation,o=r.value-e;r.value=(0,t.clamp)(o,0,1)})._closure={_this6:{customRouteContext:{primaryAnimation:a.customRouteContext.primaryAnimation}},clamp:t.clamp},e.asString="function _f(delta){const{_this6,clamp}=jsThis._closure;{var primaryAnimation=_this6.customRouteContext.primaryAnimation;var newVal=primaryAnimation.value-delta;primaryAnimation.value=clamp(newVal,0.0,1.0);}}",e.__workletHash=0x92313f31ed5,e.__location="packageSkyline/pages/half-page/half-page/index.ts",e.__worklet=!0,e},handleDragEnd:function(e){this.startPan.value=!1;var a=this.customRouteContext,r=a.primaryAnimation,o=a.stopUserGesture,s=a.didPop,n=!1;n=Math.abs(e)>=t._kMinFlingVelocity?e<=0:r.value>.7;var i,l=r.value,u=t.Curves.fastLinearToSlowEaseIn;if(n){var _=Math.min(Math.floor((0,t.lerp)(t._kMaxDroppedSwipePageForwardAnimationTime,0,l)),t._kMaxPageBackAnimationTime);r.value=(0,t.timing)(1,{duration:_,easing:u},((i=function(){o()})._closure={stopUserGesture:o},i.asString="function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}",i.__workletHash=0xe10405804fd,i.__location="packageSkyline/pages/half-page/half-page/index.ts (116:8)",i.__worklet=!0,i))}else{var c=Math.floor((0,t.lerp)(0,t._kMaxDroppedSwipePageForwardAnimationTime,l));r.value=(0,t.timing)(0,{duration:c,easing:u},function(){var t=function(){o(),s()};return t._closure={stopUserGesture:o,didPop:s},t.asString="function _f(){const{stopUserGesture,didPop}=jsThis._closure;{stopUserGesture();didPop();}}",t.__workletHash=1563168231467,t.__location="packageSkyline/pages/half-page/half-page/index.ts (129:8)",t.__worklet=!0,t}())}},_handleDragEnd_worklet_factory_:function(){var e,a=this;return(e=function(e){a.startPan.value=!1;var r=a.customRouteContext,o=r.primaryAnimation,s=r.stopUserGesture,n=r.didPop,i=!1;i=Math.abs(e)>=t._kMinFlingVelocity?e<=0:o.value>.7;var l=o.value,u=t.Curves.fastLinearToSlowEaseIn;if(i){var _=Math.min(Math.floor((0,t.lerp)(t._kMaxDroppedSwipePageForwardAnimationTime,0,l)),t._kMaxPageBackAnimationTime);o.value=(0,t.timing)(1,{duration:_,easing:u},function(){var t=function(){s()};return t._closure={stopUserGesture:s},t.asString="function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}",t.__workletHash=0xe10405804fd,t.__location="packageSkyline/pages/half-page/half-page/index.ts (116:8)",t.__worklet=!0,t}())}else{var c=Math.floor((0,t.lerp)(0,t._kMaxDroppedSwipePageForwardAnimationTime,l));o.value=(0,t.timing)(0,{duration:c,easing:u},function(){var t=function(){s(),n()};return t._closure={stopUserGesture:s,didPop:n},t.asString="function _f(){const{stopUserGesture,didPop}=jsThis._closure;{stopUserGesture();didPop();}}",t.__workletHash=1563168231467,t.__location="packageSkyline/pages/half-page/half-page/index.ts (129:8)",t.__worklet=!0,t}())}})._closure={_this7:{startPan:a.startPan,customRouteContext:a.customRouteContext},_kMinFlingVelocity:t._kMinFlingVelocity,Curves:{fastLinearToSlowEaseIn:t.Curves.fastLinearToSlowEaseIn},lerp:t.lerp,_kMaxDroppedSwipePageForwardAnimationTime:t._kMaxDroppedSwipePageForwardAnimationTime,_kMaxPageBackAnimationTime:t._kMaxPageBackAnimationTime,timing:t.timing},e.asString='function _f(velocity){const{_this7,_kMinFlingVelocity,Curves,lerp,_kMaxDroppedSwipePageForwardAnimationTime,_kMaxPageBackAnimationTime,timing}=jsThis._closure;{_this7.startPan.value=false;var _this$customRouteCont=_this7.customRouteContext,primaryAnimation=_this$customRouteCont.primaryAnimation,stopUserGesture=_this$customRouteCont.stopUserGesture,didPop=_this$customRouteCont.didPop;var animateForward=false;if(Math.abs(velocity)>=_kMinFlingVelocity){animateForward=velocity<=0;}else{animateForward=primaryAnimation.value>0.7;}var t=primaryAnimation.value;var animationCurve=Curves.fastLinearToSlowEaseIn;if(animateForward){var droppedPageForwardAnimationTime=Math.min(Math.floor(lerp(_kMaxDroppedSwipePageForwardAnimationTime,0,t)),_kMaxPageBackAnimationTime);primaryAnimation.value=timing(1.0,{duration:droppedPageForwardAnimationTime,easing:animationCurve},function(){var _f=function _f(){stopUserGesture();};_f._closure={stopUserGesture:stopUserGesture};_f.asString="function _f(){const{stopUserGesture}=jsThis._closure;{stopUserGesture();}}";_f.__workletHash=15462961775869;_f.__location="packageSkyline/pages/half-page/half-page/index.ts (116:8)";_f.__worklet=true;return _f;}());}else{var droppedPageBackAnimationTime=Math.floor(lerp(0,_kMaxDroppedSwipePageForwardAnimationTime,t));primaryAnimation.value=timing(0.0,{duration:droppedPageBackAnimationTime,easing:animationCurve},function(){var _f=function _f(){stopUserGesture();didPop();};_f._closure={stopUserGesture:stopUserGesture,didPop:didPop};_f.asString="function _f(){const{stopUserGesture,didPop}=jsThis._closure;{stopUserGesture();didPop();}}";_f.__workletHash=1563168231467;_f.__location="packageSkyline/pages/half-page/half-page/index.ts (129:8)";_f.__worklet=true;return _f;}());}}}',e.__workletHash=0xf45b2476de6,e.__location="packageSkyline/pages/half-page/half-page/index.ts",e.__worklet=!0,e},handleVerticalDrag:function(e){if(e.state===t.GestureState.BEGIN)this.handleDragStart();else if(e.state===t.GestureState.ACTIVE){var r=e.deltaY/a;this.handleDragUpdate(r)}else if(e.state===t.GestureState.END){var o=e.velocityY/a;this.handleDragEnd(o)}else e.state===t.GestureState.CANCELLED&&this.handleDragEnd(0)},_handleVerticalDrag_worklet_factory_:function(){var e,r=this._handleDragStart_worklet_factory_(),o=this._handleDragUpdate_worklet_factory_(),s=this._handleDragEnd_worklet_factory_();return(e=function(e){if(e.state===t.GestureState.BEGIN)r();else if(e.state===t.GestureState.ACTIVE){var n=e.deltaY/a;o(n)}else if(e.state===t.GestureState.END){var i=e.velocityY/a;s(i)}else e.state===t.GestureState.CANCELLED&&s(0)})._closure={GestureState:{BEGIN:t.GestureState.BEGIN,ACTIVE:t.GestureState.ACTIVE,END:t.GestureState.END,CANCELLED:t.GestureState.CANCELLED},handleDragStart:r,windowHeight:a,handleDragUpdate:o,handleDragEnd:s},e.asString="function _f(gestureEvent){const{GestureState,handleDragStart,windowHeight,handleDragUpdate,handleDragEnd}=jsThis._closure;{if(gestureEvent.state===GestureState.BEGIN){handleDragStart();}else if(gestureEvent.state===GestureState.ACTIVE){var delta=gestureEvent.deltaY/windowHeight;handleDragUpdate(delta);}else if(gestureEvent.state===GestureState.END){var velocity=gestureEvent.velocityY/windowHeight;handleDragEnd(velocity);}else if(gestureEvent.state===GestureState.CANCELLED){handleDragEnd(0.0);}}}",e.__workletHash=0xf0bccc6fd6b,e.__location="packageSkyline/pages/half-page/half-page/index.ts",e.__worklet=!0,e}});
},{isPage:true,isComponent:true,currentFile:'packageSkyline/pages/half-page/half-page/index.js'});require("packageSkyline/pages/half-page/half-page/index.js");