Page({onShareAppMessage:function(){return{title:"editor",path:"packageComponent/pages/form/editor/editor"}},data:{formats:{},readOnly:!1,placeholder:"开始输入...",editorHeight:300,keyboardHeight:0,isIOS:!1,safeHeight:0,toolBarHeight:50},readOnlyChange:function(){this.setData({readOnly:!this.data.readOnly})},onUnload:function(){wx.offThemeChange&&wx.offThemeChange()},onLoad:function(){var t=this;this.setData({theme:wx.getSystemInfoSync().theme||"light"}),wx.onThemeChange&&wx.onThemeChange((function(e){var i=e.theme;t.setData({theme:i})}));var e,i=wx.getSystemInfoSync(),o=i.platform,a=i.safeArea,n=i.screenHeight;e=a?n-a.bottom:32,this._safeHeight=e;var s="ios"===o;this.setData({isIOS:s,safeHeight:e,toolBarHeight:s?e+50:50});var r=this;this.updatePosition(0);var c=0;wx.onKeyboardHeightChange((function(t){if(t.height!==c){var e=t.height>0?1e3*t.duration:0;c=t.height,setTimeout((function(){wx.pageScrollTo({scrollTop:0,success:function(){r.updatePosition(c),r.editorCtx.scrollIntoView()}})}),e)}}))},updatePosition:function(t){var e=wx.getSystemInfoSync().windowHeight,i=e;t>0&&(i=e-t-50),0===t?this.setData({editorHeight:i,keyboardHeight:t,toolBarHeight:this.data.isIOS?50+this._safeHeight:50,safeHeight:this._safeHeight}):this.setData({editorHeight:i,keyboardHeight:t,toolBarHeight:50,safeHeight:0})},calNavigationBarAndStatusBar:function(){var t=wx.getSystemInfoSync();return t.statusBarHeight+("ios"===t.platform?44:48)},onEditorReady:function(){var t=this;wx.createSelectorQuery().select("#editor").context((function(e){t.editorCtx=e.context})).exec()},blur:function(){this.editorCtx.blur()},format:function(t){var e=t.target.dataset,i=e.name,o=e.value;i&&this.editorCtx.format(i,o)},onStatusChange:function(t){var e=t.detail;this.setData({formats:e})},insertDivider:function(){this.editorCtx.insertDivider({success:function(){console.log("insert divider success")}})},clear:function(){this.editorCtx.clear({success:function(){console.log("clear success")}})},removeFormat:function(){this.editorCtx.removeFormat()},insertDate:function(){var t=new Date,e="".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate());this.editorCtx.insertText({text:e})},insertImage:function(){var t=this;wx.chooseImage({count:1,success:function(e){t.editorCtx.insertImage({src:e.tempFilePaths[0],data:{id:"abcd",role:"god"},width:"80%",success:function(){console.log("insert image success")}})}})}});