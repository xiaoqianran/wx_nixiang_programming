Object.defineProperty(exports,"__esModule",{value:!0}),exports.FpsHelper=void 0;var e=require("../@babel/runtime/helpers/classCallCheck"),t=require("../@babel/runtime/helpers/createClass");exports.FpsHelper=function(){function r(){e(this,r),this.startTime=0,this.frameCount=0,this.endTime=0,this.tempFrameCount=0,this.tempStartTime=0}return t(r,[{key:"updateFPS",value:function(e){var t=Date.now();if(0==this.frameCount&&(this.startTime=t),this.frameCount++,this.endTime=t,this.tempFrameCount++,this.tempStartTime>0){var r=t-this.tempStartTime;if(r>1e3){var i=Math.round(1e3/(r/this.tempFrameCount));this.tempFrameCount=0,this.tempStartTime=t,e&&e(i)}}else this.tempStartTime=t,e&&e(0)}},{key:"getAverageFps",value:function(){var e=this.endTime-this.startTime;return e>1e3?Math.round(1e3*this.frameCount/e):0}},{key:"reset",value:function(){this.startTime=0,this.frameCount=0,this.endTime=0,this.tempFrameCount=0,this.tempStartTime=0}},{key:"doReport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.endTime-this.startTime;if(r>5e3){var i=Math.round(1e3*this.frameCount/r),s=wx.getSystemInfoSync();wx.report("skip_fps",{fps:i,duration:r,record:e?1:0,face:t?1:0,up_platform:s.platform,up_brand:s.brand,up_model:s.model,up_benchmark:s.benchmarkLevel}),this.reset()}}}]),r}();