Object.defineProperty(exports,"__esModule",{value:!0}),exports.lerp=exports.clamp=exports.GestureState=void 0;var e,t=wx.worklet,r=t.shared,a=t.timing,o=t.Easing,s=exports.GestureState={POSSIBLE:0,BEGIN:1,ACTIVE:2,END:3,CANCELLED:4},n=(exports.lerp=((e=function(e,t,r){return e+(t-e)*r})._closure={},e.asString="function _f(begin,end,t){return begin+(end-begin)*t;}",e.__workletHash=9953309036832,e.__location="components/app-bar-course/index.ts (13:20)",e.__worklet=!0,e),exports.clamp=function(){var e=function(e,t,r){return e>r?r:e<t?t:e};return e._closure={},e.asString="function _f(cur,lowerBound,upperBound){if(cur>upperBound)return upperBound;if(cur<lowerBound)return lowerBound;return cur;}",e.__workletHash=0xd5c5dbbc9a9,e.__location="components/app-bar-course/index.ts (18:21)",e.__worklet=!0,e}()),i=wx.getSystemInfoSync(),l=i.statusBarHeight,c=i.screenHeight,u=i.screenWidth,p=i.safeArea;console.info("@@@ systemInfo",i),Component({properties:{},data:{showAppbar:!1,maxCoverSize:0,statusBarHeight:0,musicCover:"https://res.wx.qq.com/op_res/Nu9XXzXcXnD1j5EgWQ2ElxNcl1yMvnKypRo4MTbjOv7FC3saigGoOBTZibyESC7EXaClnPYhB6pvfb-IRmso6g"},lifetimes:{attached:function(){var e=r(0),t=u-48,a=c-p.bottom,o=i.system.indexOf("iOS")>=0;this.setData({statusBarHeight:l,maxCoverSize:t}),console.log("attached: ",l,t),this.applyAnimatedStyle(".cover",function(){var r=function(){var r=60+(t-60)*e.value;return console.log("height: ",t,60,e.value),{width:"".concat(r,"px"),height:"".concat(r,"px")}};return r._closure={initCoverSize:60,maxCoverSize:t,progress:e},r.asString='function _f(){const{initCoverSize,maxCoverSize,progress}=jsThis._closure;{var height=initCoverSize+(maxCoverSize-initCoverSize)*progress.value;console.log(\'height: \',maxCoverSize,initCoverSize,progress.value);return{width:"".concat(height,"px"),height:"".concat(height,"px")};}}',r.__workletHash=7746530641595,r.__location="components/app-bar-course/index.ts (51:40)",r.__worklet=!0,r}()),this.applyAnimatedStyle(".expand-container",function(){var r=function(){console.log("expand-container: ",t,60,e.value);var r=e.value,s=o?30*r:0;return{top:"".concat((c-(76+a))*(1-r),"px"),borderRadius:"".concat(s,"px ").concat(s,"px 0px 0px")}};return r._closure={maxCoverSize:t,initCoverSize:60,progress:e,isIOS:o,safeAreaInsetBottom:a,screenHeight:c},r.asString='function _f(){const{maxCoverSize,initCoverSize,progress,isIOS,safeAreaInsetBottom,screenHeight}=jsThis._closure;{console.log(\'expand-container: \',maxCoverSize,initCoverSize,progress.value);var t=progress.value;var maxRadius=30;var radius=isIOS?maxRadius*t:0;var initBarHeight=initCoverSize+8*2+safeAreaInsetBottom;return{top:"".concat((screenHeight-initBarHeight)*(1-t),"px"),borderRadius:"".concat(radius,"px ").concat(radius,"px 0px 0px")};}}',r.__workletHash=0xade4b5ae049,r.__location="components/app-bar-course/index.ts (61:51)",r.__worklet=!0,r}()),this.applyAnimatedStyle(".title-wrap",function(){var r=function(){return console.log("title-wrap: ",t,60,e.value),{opacity:1-e.value}};return r._closure={maxCoverSize:t,initCoverSize:60,progress:e},r.asString="function _f(){const{maxCoverSize,initCoverSize,progress}=jsThis._closure;{console.log('title-wrap: ',maxCoverSize,initCoverSize,progress.value);return{opacity:1-progress.value};}}",r.__workletHash=6294798077466,r.__location="components/app-bar-course/index.ts (74:45)",r.__worklet=!0,r}());var s=l+(o?40:44);this.applyAnimatedStyle(".nav-bar",function(){var r=function(){console.log("nav-bar: ",t,60,e.value);var r=e.value;return{opacity:r<.8?0:(r-.8)/(1-.8),height:"".concat(s*e.value,"px")}};return r._closure={maxCoverSize:t,initCoverSize:60,progress:e,navBarHeight:s},r.asString='function _f(){const{maxCoverSize,initCoverSize,progress,navBarHeight}=jsThis._closure;{console.log(\'nav-bar: \',maxCoverSize,initCoverSize,progress.value);var t=progress.value;var threshold=0.8;var opacity=t<threshold?0:(t-threshold)/(1-threshold);return{opacity:opacity,height:"".concat(navBarHeight*progress.value,"px")};}}',r.__workletHash=7120517183924,r.__location="components/app-bar-course/index.ts (83:42)",r.__worklet=!0,r}()),this.progress=e}},methods:{close:function(){this.progress.value=a(0,{duration:250,easing:o.ease})},expand:function(){this.progress.value=a(1,{duration:250,easing:o.ease})},handleDragUpdate:function(e){var t=this.progress.value-e;this.progress.value=n(t,0,1)},_handleDragUpdate_worklet_factory_:function(){var e=this;return function(){var t=function(t){var r=e.progress.value-t;e.progress.value=n(r,0,1)};return t._closure={_this:{progress:e.progress},clamp:n},t.asString="function _f(delta){const{_this,clamp}=jsThis._closure;{var curValue=_this.progress.value;var newVal=curValue-delta;_this.progress.value=clamp(newVal,0.0,1.0);}}",t.__workletHash=0x96ef46143f9,t.__location="components/app-bar-course/index.ts",t.__worklet=!0,t}()},handleDragEnd:function(e){var t=this.progress.value,r=!1;r=Math.abs(e)>=1?e<=0:t>.7;var s=o.out(o.ease);this.progress.value=r?a(1,{duration:200,easing:s}):a(0,{duration:250,easing:s})},_handleDragEnd_worklet_factory_:function(){var e=this;return function(){var t=function(t){var r=e.progress.value,s=!1;s=Math.abs(t)>=1?t<=0:r>.7;var n=o.out(o.ease);e.progress.value=s?a(1,{duration:200,easing:n}):a(0,{duration:250,easing:n})};return t._closure={_this2:{progress:e.progress},Easing:{out:o.out,ease:o.ease},timing:a},t.asString="function _f(velocity){const{_this2,Easing,timing}=jsThis._closure;{var t=_this2.progress.value;var animateForward=false;if(Math.abs(velocity)>=1){animateForward=velocity<=0;}else{animateForward=t>0.7;}var animationCurve=Easing.out(Easing.ease);if(animateForward){_this2.progress.value=timing(1.0,{duration:200,easing:animationCurve});}else{_this2.progress.value=timing(0.0,{duration:250,easing:animationCurve});}}}",t.__workletHash=9348796581532,t.__location="components/app-bar-course/index.ts",t.__worklet=!0,t}()},handleVerticalDrag:function(e){if(e.state===s.ACTIVE){var t=e.deltaY/c;this.handleDragUpdate(t)}else if(e.state===s.END){var r=e.velocityY/c;this.handleDragEnd(r)}else e.state===s.CANCELLED&&this.handleDragEnd(0)},_handleVerticalDrag_worklet_factory_:function(){var e=this._handleDragUpdate_worklet_factory_(),t=this._handleDragEnd_worklet_factory_();return function(){var r=function(r){if(r.state===s.ACTIVE){var a=r.deltaY/c;e(a)}else if(r.state===s.END){var o=r.velocityY/c;t(o)}else r.state===s.CANCELLED&&t(0)};return r._closure={GestureState:{ACTIVE:s.ACTIVE,END:s.END,CANCELLED:s.CANCELLED},screenHeight:c,handleDragUpdate:e,handleDragEnd:t},r.asString="function _f(evt){const{GestureState,screenHeight,handleDragUpdate,handleDragEnd}=jsThis._closure;{if(evt.state===GestureState.ACTIVE){var delta=evt.deltaY/screenHeight;handleDragUpdate(delta);}else if(evt.state===GestureState.END){var velocity=evt.velocityY/screenHeight;handleDragEnd(velocity);}else if(evt.state===GestureState.CANCELLED){handleDragEnd(0.0);}}}",r.__workletHash=8010183302204,r.__location="components/app-bar-course/index.ts",r.__worklet=!0,r}()}}});