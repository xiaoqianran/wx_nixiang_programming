Page({data:{url:"",actId:"",type:"",shareConfig:{title:"",imgUrl:"",path:""},activityUrl:"https://crm.u1.netease.com/",dsToken:""},onLoad:function(t){if(console.log("刷新",t),t.scene){var a=decodeURIComponent(t.scene);console.log(a),this.data.actId=this.getParams("id",a),this.type=this.getParams("t",a)}else this.data.actId=t.id,this.type=t.t;var e="".concat(this.data.activityUrl,"template/").concat(this.type);this.data.url="".concat(e,"/?id=").concat(this.data.actId,"&appid=H15wGJvuhrB1aTqJmx").concat(this.filterParams(t)),this.setData({url:this.data.url}),null!=t&&t.from&&(console.log("埋点"),"siyu"==t.from?(console.log("siyu埋点"),wx.reportEvent("answer_activity_siyu",{})):"weibo"==t.from?(console.log("weibo埋点"),wx.reportEvent("answer_activity_weibo",{})):"weixin"==t.from?(console.log("weixin埋点"),wx.reportEvent("answer_activity_weixin",{})):"haibao"==t.from&&(console.log("haibao埋点"),wx.reportEvent("answer_activity_haibao",{}))),"50361273"==t.id&&wx.reportEvent("signin_active",{})},gotransit:function(){wx.navigateTo({url:"/pages/authorize/authorize"})},getParams:function(t,a){var e=new RegExp("(?:&|/?)"+t+"=([^&$]+)").exec(a);return e?e[1]:""},filterParams:function(t){if(t.scene){var a=decodeURIComponent(t.scene).split("&"),e="";return a.map((function(t){"id"!==t.split("=")[0]&&"appid"!==t.split("=")[0]&&(e="&".concat(t.split("=")[0],"=").concat(t.split("=")[1]))})),e}var i="";for(var n in t)"id"!=n&&"appid"!=n&&(i+="&".concat(n,"=").concat(t[n]));return i},handlePostMessage:function(t){console.log("分享",t);var a=t.detail.data[t.detail.data.length-1],e=this.data.shareConfig;e.title=a.shareTitle,e.imgUrl=a.shareCoverUrl,e.path=a.sharePathUrl,this.setData({shareConfig:e})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},buried:function(t){wx.request({url:"https://fuliyang.u1.netease.com/st/api/add",data:{appId:"J2XFsdUxkSD0",userId:this.data.dsToken,item:t,code:this.data.actId},header:{"content-type":"application/json"},method:"GET",dataType:"json",responseType:"text",success:function(t){},fail:function(){},complete:function(){}})},onShareAppMessage:function(){return this.buried("7"),{title:this.data.shareConfig.title,imageUrl:this.data.shareConfig.imgUrl,path:this.data.shareConfig.path}},onPageScroll:function(){},onTabItemTap:function(t){}});