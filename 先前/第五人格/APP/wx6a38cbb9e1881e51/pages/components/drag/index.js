Component({externalClasses:["item-wrap-class"],options:{multipleSlots:!0},properties:{extraNodes:{type:Array,value:[]},listData:{type:Array,value:[]},columns:{type:Number,value:1},topSize:{type:Number,value:0},bottomSize:{type:Number,value:0},itemHeight:{type:Number,value:0},scrollTop:{type:Number,value:0},liIndex:{type:Number,value:0}},data:{baseData:{},pageMetaSupport:!1,platform:"",listWxs:[],rows:0,wrapStyle:"",list:[],dragging:!1},methods:{vibrate:function(){"devtools"!==this.data.platform&&wx.vibrateShort()},pageScroll:function(t){this.data.pageMetaSupport?this.triggerEvent("scroll",{scrollTop:t.scrollTop}):wx.pageScrollTo({scrollTop:t.scrollTop,duration:300})},drag:function(t){this.setData({dragging:t.dragging})},listChange:function(t){this.data.listWxs=t.list},itemClick:function(t){var e=t.currentTarget.dataset.index,a=this.data.listWxs[e];this.triggerEvent("click",{key:a.realKey,data:a.data,extra:t.detail})},skindel:function(t){var e=t.currentTarget.dataset.index,a=this.data.listWxs[e];this.triggerEvent("del",{key:a.realKey,data:a.data,extra:t.detail})},initDom:function(){var t=this,e=wx.getSystemInfoSync(),a=e.windowWidth,i=e.windowHeight,r=e.platform,s=e.SDKVersion,o=(a||375)/375;this.data.pageMetaSupport=function(t,e){t=t.split("."),e=e.split(".");for(var a=Math.max(t.length,e.length);t.length<a;)t.push("0");for(;e.length<a;)e.push("0");for(var i=0;i<a;i++){var r=parseInt(t[i]),s=parseInt(e[i]);if(r>s)return 1;if(r<s)return-1}return 0}(s,"2.9.0")>=0,this.data.platform=r;var n={};n.windowHeight=i,n.realTopSize=this.data.topSize*o/2,n.realBottomSize=this.data.bottomSize*o/2,n.columns=this.data.columns,n.rows=this.data.rows;var l=this.createSelectorQuery();l.select(".item").boundingClientRect(),l.select(".item-wrap").boundingClientRect(),l.exec((function(e){n.itemWidth=e[0].width,n.itemHeight=e[0].height,n.wrapLeft=e[1].left,n.wrapTop=e[1].top+t.data.scrollTop,t.setData({dragging:!1,baseData:n})}))},columnChange:function(){this.setData({list:[]}),this.init()},init:function(){var t=this;this.setData({dragging:!0});var e=function(t,e){return{id:t.dragId,extraNode:e,fixed:t.fixed,slot:t.slot,data:t}},a=this.data,i=a.listData,r=a.extraNodes,s=[],o=[],n=[],l=[],h=[];r.forEach((function(t,a){"before"===t.type?o.push(e(t,!0)):"after"===t.type?n.push(e(t,!0)):"destBefore"===t.type?l.push(e(t,!0)):"destAfter"===t.type&&h.push(e(t,!0))})),i.forEach((function(t,a){l.forEach((function(t){t.data.destKey===a&&s.push(t)})),s.push(e(t,!1)),h.forEach((function(t){t.data.destKey===a&&s.push(t)}))}));var d=0,u=this.data.columns,p=(o.concat(s,n)||[]).map((function(t,e){return t.realKey=t.extraNode?-1:d++,t.sortKey=e,t.tranX="".concat(t.sortKey%u*100,"%"),t.tranY="".concat(100*Math.floor(t.sortKey/u),"%"),t}));this.data.rows=Math.ceil(p.length/u),this.setData({list:p,listWxs:p,wrapStyle:"height: ".concat(this.data.rows*this.data.itemHeight,"rpx")}),0!==p.length&&setTimeout((function(){return t.initDom()}),0)}},ready:function(){this.init()}});