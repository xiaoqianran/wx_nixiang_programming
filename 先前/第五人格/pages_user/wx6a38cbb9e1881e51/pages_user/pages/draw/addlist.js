var a=require("../../../@babel/runtime/helpers/toConsumableArray"),t=getApp();Page({data:{imgUrl:t.globalData.imgUrl,apiUrl:t.globalData.apiUrl,wxToken:t.globalData.wxToken,drawId:null,addressList:[],canJoin:!0,lotteryResultSize:16,showGetMoreluckyPeople:!1,addressListPageNo:1,addressListPageSize:20,addressListTotal:0},onLoad:function(a){var e=this;e.setData({wxToken:t.globalData.wxToken,drawId:a.id}),e.data.wxToken?e.getData():t.initOkCallback=function(a){e.setData({wxToken:t.globalData.wxToken}),e.getData()}},getData:function(){this.getMoreAddress()},atUlBottom:function(){this.data.addressListTotal>this.data.addressListPageNo*this.data.addressListPageSize&&(this.data.addressListPageNo++,this.getMoreAddress())},getMoreAddress:function(){var t=this;wx.request({url:t.data.apiUrl+"/w/epro/lottery/getPrizeRecord",data:{activityId:t.data.drawId,pageNo:t.data.addressListPageNo,pageSize:t.data.addressListPageSize},header:{wxToken:t.data.wxToken},success:function(e){var s;200==e.data.code?((s=t.data.addressList).push.apply(s,a(e.data.data.list)),t.data.addressListTotal=e.data.data.total,t.setData({addressList:t.data.addressList})):wx.showToast({title:e.data.msg,icon:"none",duration:2e3})}})},handlerGobackClick:function(a){getCurrentPages().length>=2?wx.navigateBack({delta:a}):wx.redirectTo({url:t.globalData.pageIndex})},handlerGohomeClick:function(){wx.redirectTo({url:t.globalData.pageIndex})},hideAddressList:function(){this.setData({addressListShow:!1,addressList:[],addressListPageNo:1,addressListPageSize:20})},copyCode:function(a){if(""==a.currentTarget.dataset.code)return!1;wx.setClipboardData({data:a.currentTarget.dataset.code,success:function(a){}})},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});