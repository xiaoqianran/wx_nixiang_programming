(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[560],{508:function(t,a,e){var n,r,s=e(6073),o=e(675),i=e(467),c=e(3029),u=e(2901),l=e(9874),p=e(5501),d=e(4467),g=e(118),h=e(758),v=e.n(h),A=e(4015),f=e(6540),m=e(8145),x=e(8299),w=e(4848),S=(n=(0,A.WQ)("store"),n(r=(0,A.PA)(r=function(t){function a(){var t;(0,c.A)(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=(0,l.A)(this,a,[].concat(n)),(0,d.A)(t,"state",{avatarUrl:"",isLoading:!1}),(0,d.A)(t,"componentDidMount",(0,i.A)((0,o.A)().mark((function a(){var e,n,r,s;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=v().getCurrentInstance().router.params.inviter,n=v().cloud.database(),r=n.collection("user"),a.next=5,r.where({_openId:e}).get();case 5:s=a.sent,t.setState({avatarUrl:s.data[0].avatarFileUrl});case 7:case"end":return a.stop()}}),a)})))),(0,d.A)(t,"handleSettingAvatar",(function(){var a=t.props.store.globalStore;a.setAddAvatarOpenStatus(!0)})),(0,d.A)(t,"joinGroupClick",(0,i.A)((0,o.A)().mark((function a(){var e;return(0,o.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:v().getStorageSync("avatarFileUrl")?(e=v().getCurrentInstance().router.params.groupId,t.setState({isLoading:!0}),v().cloud.callFunction({name:"groupFn",data:{type:"join",groupId:e}}).then((function(a){var e=a.result,n=e.code,r=e.hasGroup;n&&"200"===n&&(r?(v().showToast({title:"\u5df2\u7ecf\u52a0\u5165\u8fc7\u8fd9\u4e2a\u5c0f\u7ec4\u4e86\uff0c\u5feb\u53bb\u770b\u770b",icon:"none",duration:1e3}),setTimeout((function(){v().switchTab({url:"/pages/group/index"})}),1e3)):(v().showToast({title:"\u52a0\u5165\u6210\u529f",icon:"none",duration:1e3}),setTimeout((function(){v().switchTab({url:"/pages/group/index"})}),1e3))),t.setState({isLoading:!1})})).catch((function(t){}))):t.handleSettingAvatar();case 1:case"end":return a.stop()}}),a)})))),t}return(0,p.A)(a,t),(0,u.A)(a,[{key:"render",value:function(){var t=this.props.store.globalStore;return(0,w.jsxs)(g.Ss,{className:"groupWrapper",children:[(0,w.jsx)(g._V,{className:"groupLogo",src:e(3159)}),(0,w.jsx)(g.Ss,{className:"tipWrapper",children:(0,w.jsx)(g.EY,{className:"tip",children:"\u6765\u6bd4\u4e00\u6bd4\u8c01\u662f\u62c9\u5c4e\u5927\u738b"})}),(0,w.jsxs)(g.Ss,{className:"inviteWrapper",children:[(0,w.jsx)(g._V,{className:"avatar",src:this.state.avatarUrl}),(0,w.jsx)(g.EY,{className:"tip",children:"\u9080\u8bf7\u4f60"})]}),(0,w.jsx)(m.sl,{circle:!0,loading:this.state.isLoading,disabled:this.state.isLoading,onClick:this.joinGroupClick,className:"groupBtn",type:"primary",children:"\u52a0\u5165\u5c0f\u7ec4"}),t.addAvatarOpen&&(0,w.jsx)(x.A,{onSave:this.handleAddAvatarOnSave})]})}}])}(f.Component))||r)||r),j=S,k={navigationBarTitleText:"",navigationBarBackgroundColor:"#f3a373",usingComponents:{}};Page((0,s.createPageConfig)(j,"pages/joinGroup/index",{root:{cn:[]}},k||{}))}},function(t){var a=function(a){return t(t.s=a)};t.O(0,[907,96,76],(function(){return a(508)}));t.O()}]);