module.exports={getWritePhotosAlbum:function(o){wx.getSetting({success:function(t){console.log("res=",t),t.authSetting["scope.writePhotosAlbum"]?(console.log("true"),o&&o()):void 0===t.authSetting["scope.writePhotosAlbum"]?wx.showModal({title:"提示",content:"您未开启保存图片到相册的权限，请点击确定去开启权限！",success:function(t){t.confirm?wx.authorize({scope:"scope.writePhotosAlbum",success:function(t){o&&o(),console.log("授权下载成功",t)},fail:function(o){console.log("您没有授权 fail=",o),wx.showToast({title:"您没有授权，无法保存到相册",icon:"none"})}}):console.log("取消了")}}):wx.showModal({title:"提示",content:"您未开启保存图片到相册的权限，请点击确定去开启权限！",success:function(t){t.confirm?wx.openSetting({success:function(t){wx.showToast({icon:"none",title:"正在保存图片"}),t.authSetting["scope.writePhotosAlbum"]?(console.log("false success res=",t),o&&o()):wx.showToast({title:"您没有授权，无法保存到相册！",icon:"none"})},fail:function(o){console.log("false file res=",o)}}):wx.showToast({title:"您没有授权，无法保存到相册",icon:"none"})}})}})}};