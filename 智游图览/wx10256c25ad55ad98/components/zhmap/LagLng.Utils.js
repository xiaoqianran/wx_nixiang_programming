var t=require("../../@babel/runtime/helpers/classCallCheck"),n=require("../../@babel/runtime/helpers/createClass"),r=function(){return n((function n(r,e){t(this,n),this.latitude=r,this.longitude=e}),[{key:"toArray",value:function(){return[this.latitude,this.longitude]}},{key:"toGcj02",value:function(){if(null==this.latitude||null==this.longitude)throw new Error("latitude or longitude can not be null");if(2==wx.leaflet.map_layer);else if(3==wx.leaflet.map_layer){var t=o(this.longitude,this.latitude);this.longitude=t[0],this.latitude=t[1]}else if(4==wx.leaflet.map_layer){var n=u(this.longitude,this.latitude);this.longitude=n[0],this.latitude=n[1]}else wx.leaflet.map_layer;return this}}])}();var e=3.141592653589793,a=52.35987755982988,i=6378245,s=.006693421622965943;function l(t,n){return t<72.004||t>137.8347||n<.8293||n>55.8271||!1}function o(t,n){var r=Math.atan2(n,t)+3e-6*Math.cos(t*a),e=Math.sqrt(t*t+n*n)+2e-5*Math.sin(n*a);return[e*Math.cos(r)+.0065,e*Math.sin(r)+.006]}function u(t,n){if(l(t,n))return[t,n];var r=f(t-105,n-35),a=h(t-105,n-35),o=n/180*e,u=Math.sin(o);u=1-s*u*u;var c=Math.sqrt(u);r=180*r/(i*(1-s)/(u*c)*e),a=180*a/(i/c*Math.cos(o)*e);var g=parseFloat(n)+parseFloat(r);return[2*t-(parseFloat(t)+parseFloat(a)),2*n-g]}function h(t,n){var r=300+t+2*n+.1*t*t+.1*t*n+.1*Math.sqrt(Math.abs(t));return r+=2*(20*Math.sin(6*t*e)+20*Math.sin(2*t*e))/3,r+=2*(20*Math.sin(t*e)+40*Math.sin(t/3*e))/3,r+=2*(150*Math.sin(t/12*e)+300*Math.sin(t/30*e))/3}function f(t,n){var r=2*t-100+3*n+.2*n*n+.1*t*n+.2*Math.sqrt(Math.abs(t));return r+=2*(20*Math.sin(6*t*e)+20*Math.sin(2*t*e))/3,r+=2*(20*Math.sin(n*e)+40*Math.sin(n/3*e))/3,r+=2*(160*Math.sin(n/12*e)+320*Math.sin(n*e/30))/3}function c(t){return null==t||0===t.trim().length}module.exports={polygon2latlngs:function(t){if(null==t)return null;if("string"==typeof t){for(var n=t.substring(t.indexOf("((")+2,t.length-2).split(" "),e=[],a=0;a<n.length;a+=2)e.push(new r(parseFloat(n[a+1]),parseFloat(n[a])).toGcj02());return e}e=[];var i=t.coordinates[0];for(a=0;a<i.length;++a)e.push(new r(i[a][1],i[a][0]).toGcj02());return e},sridlocation2laglng:function(t){if(null==t)return null;if("string"==typeof t){var n=t.substring(t.indexOf("(")+1,t.length-1).split(" ");return new r(parseFloat(n[1]),parseFloat(n[0])).toGcj02()}return new r(t.coordinates[1],t.coordinates[0]).toGcj02()},lineString2laglngs:function(t){if(null==t)return null;if("string"==typeof t){for(var n=t.substring(t.indexOf("(")+1,t.length-1).split(" "),e=[],a=0;a<n.length;a+=2)e.push(new r(parseFloat(n[a+1]),parseFloat(n[a])).toGcj02());return e}e=[];var i=t.coordinates;for(a=0;a<i.length;++a)e.push(new r(i[a][1],i[a][0]).toGcj02());return e},LagLngPoint:r,bd09ToGcj02:function(t,n){var r=t-.0065,e=n-.006,i=Math.atan2(e,r)-3e-6*Math.cos(r*a),s=Math.sqrt(r*r+e*e)-2e-5*Math.sin(e*a);return[s*Math.cos(i),s*Math.sin(i)]},gcj02ToBd09:o,wgs84ToGcj02:function(t,n){if(l(t,n))return[t,n];var r=f(t-105,n-35),a=h(t-105,n-35),o=n/180*e,u=Math.sin(o);u=1-s*u*u;var c=Math.sqrt(u);r=180*r/(i*(1-s)/(u*c)*e),a=180*a/(i/c*Math.cos(o)*e);var g=parseFloat(n)+parseFloat(r);return[parseFloat(t)+parseFloat(a),g]},gcj02ToWgs84:u,formatStringPerspectiveMat:function(t){if(c(t))return null;var n=t.split(",");if(9!=n.length)throw new Error("透视变换的数组长度应该为9，当前长度为"+n.length);for(var r=[],e=0;e<n.length;++e)r.push(parseFloat(n[e]));return r},warpPerspective:function(t,n,r){return[(r[0]*t+r[1]*n+r[2])/(r[6]*t+r[7]*n+r[8]),(r[3]*t+r[4]*n+r[5])/(r[6]*t+r[7]*n+r[8])]},isEmptyString:c};