var e=require("../../index.js"),t=require("./view"),a=require("./LagLng.Utils");exports.getAllLegendList=function(a,n){wx.request({url:(0,e.getServeUrl)()+"/api/samap/alegends/"+a+"/",data:{},header:{"content-type":"application/json"},success:function(e){for(var a=[],r=0;r<e.data.icon_legends.length;++r){var o=new t.IconLegend(e.data.icon_legends[r]);a.push(o)}for(var i=[],s=0;s<e.data.footer_legends.length;++s){var c=new t.ScenicFooterLegend(e.data.footer_legends[s]);i.push(c)}null!=n&&n(a,i)}})},exports.getScenicArea=function(a,n,r){r&&wx.showLoading({title:"加载中"}),wx.request({url:(0,e.getServeUrl)()+"/api/samap/scenic_area/"+a+"/",data:{},header:{"content-type":"application/json"},success:function(e){var a=new t.ScenicArea(e.data,!0);null!=n&&n(a)},complete:function(e){r&&wx.hideLoading()}})},exports.getScenicAreaChildren=function(a,n,r){wx.request({url:(0,e.getServeUrl)()+"/api/samap/scenic_area_children/"+a+"/",data:{scenictype:n},header:{"content-type":"application/json"},success:function(e){for(var a=[],n=0;n<e.data.length;++n){var o=new t.ScenicArea(e.data[n]);a.push(o)}null!=r&&r(a)}})},exports.getScenicAreaDetail=function(t,a){wx.request({url:(0,e.getServeUrl)()+"/api/samap/scenic_area/"+t.id+"/",data:{},header:{"content-type":"application/json"},success:function(e){t.init(e.data),t.detailLoaded=!0,null!=a&&a(t)}})},exports.getRoadDetail=function(t,a,n){wx.request({url:(0,e.getServeUrl)()+"/api/samap/road/"+a.id+"/",data:{},header:{"content-type":"application/json"},success:function(e){a.init(e.data),a.detailLoaded=!0,null!=n&&n(a)}})},exports.postScenicList=function(t,a){for(var n="",r=0;r<t.length-1;++r)n+=t[r]+",";n+=t[t.length-1],wx.request({url:(0,e.getServeUrl)()+"/api/samap/scenic_list/",method:"POST",data:{scenicids:n},header:{"content-type":"application/json"},success:function(e){null!=a&&a(e.data),console.log(e)}})},exports.getCronTaskList=function(t,a){wx.request({url:(0,e.getServeUrl)()+"/api/samap/cron_task_list/"+t.id+"/",data:{},header:{"content-type":"application/json"},success:function(e){null!=a&&a(e.data)}})},exports.getModePointsDetail=function(t,n,r){wx.request({url:(0,e.getServeUrl)()+"/api/portal/scenic/related/",data:{oid:t,type:n},header:{"content-type":"application/json"},success:function(e){var t={show_route:e.data.show_route,route:(0,a.lineString2laglngs)(e.data.route),contour_color:e.data.contour_color,related_scenics:e.data.related_scenics,detailLoaded:!0};null!=r&&r(t)}})},global.wxRequest=exports;