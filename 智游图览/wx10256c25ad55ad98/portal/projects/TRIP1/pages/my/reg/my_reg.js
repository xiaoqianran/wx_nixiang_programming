var e,t,r,n,a,i=require("../../../../../../@babel/runtime/helpers/regeneratorRuntime"),o=require("../../../../../../@babel/runtime/helpers/asyncToGenerator"),s=require("../../../../../helper/page_helper.js"),u=require("../../../../../helper/helper.js"),c=require("../../../../../helper/cloud_helper.js"),l=require("../../../../../helper/validate.js"),p=require("../../../biz/project_biz.js"),h=require("../../../public/project_setting.js"),d=require("../../../../../setting/setting.js"),f=require("../../../../../comm/biz/passport_biz.js");Page({data:{isLoad:!1,isEdit:!1,mobileCheck:d.MOBILE_CHECK},onLoad:(a=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.initPage(this),t&&t.retUrl&&(this.data.retUrl=decodeURIComponent(t.retUrl)),e.next=4,this._loadDetail();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),_loadDetail:(n=o(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={title:"bar"},e.next=3,c.callCloudData("user/detail",{},r);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",wx.redirectTo({url:"../index/my_index"}));case 6:this.setData({isLoad:!0,formName:"",formMobile:"",formForms:[]});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:(r=o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)}),onReachBottom:function(){},bindGetPhoneNumber:(t=o(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.getPhone(t,this);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),bindSubmitTap:(e=o(i().mark((function e(t){var r,n,a,o=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=this.data,r=l.check(r,f.CHECK_FORM,this)){e.next=5;break}return e.abrupt("return");case 5:if(n=this.selectComponent("#cmpt-form").getForms(!0)){e.next=8;break}return e.abrupt("return");case 8:return r.forms=n,r.status=h.USER_REG_CHECK?0:1,a={title:"提交中",method:"POST"},e.next=13,c.callCloudSumbit("user/detail",r,a).then((function(e){if(e&&u.isDefined(e.data)){h.USER_REG_CHECK||f.setToken(e.data);var t=function(){"back"==o.data.retUrl?wx.navigateBack():o.data.retUrl?wx.redirectTo({url:o.data.retUrl}):wx.reLaunch({url:"../index/my_index"})};h.USER_REG_CHECK?s.showModal("注册完成，等待系统审核","温馨提示",t):s.showSuccToast("注册成功",1500,t)}}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(t){return e.apply(this,arguments)})});