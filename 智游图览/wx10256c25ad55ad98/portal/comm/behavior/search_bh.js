var e,t=require("../../../@babel/runtime/helpers/regeneratorRuntime"),a=require("../../../@babel/runtime/helpers/asyncToGenerator"),r=require("../../comm/biz/search_biz.js"),s=require("../../helper/page_helper.js");module.exports=Behavior({data:{type:"",returnUrl:"",cacheName:"",search:"",hisKeys:[]},methods:{onLoad:(e=a(t().mark((function e(a){var s,i,n,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.type,i=a.returnUrl,n="SERACH_HIS_"+s,(c=r.getHistory(n))&&this.setData({hisKeys:c}),this.setData({hisKeys:c,type:s,cacheName:n,returnUrl:i}),a&&a.source&&this.setData({source:a.source});case 7:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)}),onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},url:function(e){s.url(e,this)},bindSearchConfirm:function(e){if(this.data.type){var t=this.data.search.trim();if(t){var a=r.addHistory(this.data.cacheName,t);this.setData({search:t,hisKeys:a}),s.getPrevPage().setData({search:t}),wx.navigateBack()}}},bindDelHisTap:function(e){r.clearHistory(this.data.cacheName),this.setData({hisKeys:[]})},bindClearKeyTap:function(e){this.setData({search:""})},bindKeyTap:function(e){var t=e.currentTarget.dataset.key.trim();t&&(this.setData({search:t}),this.bindSearchConfirm(e))}}});