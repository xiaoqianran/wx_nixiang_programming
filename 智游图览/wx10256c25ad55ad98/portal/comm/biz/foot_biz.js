var e=require("../../../@babel/runtime/helpers/classCallCheck"),t=require("../../../@babel/runtime/helpers/createClass"),r=require("../../../@babel/runtime/helpers/possibleConstructorReturn"),n=require("../../../@babel/runtime/helpers/getPrototypeOf"),i=require("../../../@babel/runtime/helpers/inherits");function u(e,t,i){return t=n(t),r(e,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(t,i||[],n(e).constructor):t.apply(e,i))}var l=require("./base_biz.js"),s=require("../../helper/cache_helper.js"),o=require("../../helper/time_helper.js"),a=require("../../helper/page_helper.js"),c=require("../../helper/helper.js"),p=function(r){function n(){return e(this,n),u(this,n,arguments)}return i(n,l),t(n,null,[{key:"getFootList",value:function(){var e=s.get("CACHE_FOOT");if(e)for(var t=0;t<e.length;t++)e[t].time=o.timestamp2Time(e[t].time),c.isDefined(e[t].type_str)||(e[t].type_str=l.getFavTypeStr(e[t].type));return e}},{key:"addFoot",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:94608e3,i=a.getCurrentPageUrlWithArgs();if(!i||!t||!e)return[];for(var u=s.get("CACHE_FOOT",[]),c=0;c<u.length;c++)i==u[c].path&&u.splice(c,1);var p=l.getFavTypeStr(e),h={path:i,type:e,type_str:p,title:t,time:o.time()};return u.unshift(h),u.length>r&&u.splice(u.length-1,1),s.set("CACHE_FOOT",u,n),u}}])}();module.exports=p;