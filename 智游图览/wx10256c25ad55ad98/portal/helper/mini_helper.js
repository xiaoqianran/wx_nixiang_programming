module.exports={getAuth:function(o,t,s){o="scope."+o,wx.getSetting({success:function(n){console.log(n),n.authSetting[o]?(console.log("true"),s&&s()):void 0===n.authSetting[o]?wx.showModal({title:"提示",mask:!0,content:"您尚未开启"+t+"的权限，请点击确定去开启权限！",success:function(n){n.confirm?wx.authorize({scope:o,success:function(o){console.log("授权成功",o),s&&s()},fail:function(o){console.log("您没有授权 fail=",o),wx.showToast({mask:!0,title:"您没有授权，无法"+t,icon:"none"})}}):wx.showToast({mask:!0,title:"您没有授权，无法"+t,icon:"none"})}}):wx.showModal({title:"提示",content:"您未开启"+t+"的权限，请点击确定去开启权限！",success:function(n){n.confirm?wx.openSetting({success:function(n){wx.showToast({mask:!0,icon:"none",title:"正在"+t}),n.authSetting[o]?(console.log("false success res=",n),s&&s()):wx.showToast({mask:!0,title:"您没有授权，无法"+t+"！",icon:"none"})},fail:function(o){console.log("false file res=",o)}}):wx.showToast({mask:!0,title:"您没有授权，无法"+t,icon:"none"})}})}})}};