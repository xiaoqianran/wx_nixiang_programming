var e=require("../../@babel/runtime/helpers/regeneratorRuntime"),t=require("../../@babel/runtime/helpers/asyncToGenerator");require("../helper/cloud_helper.js"),require("../helper/page_helper.js"),require("../setting/setting.js");function r(){return(r=t(e().mark((function t(r,n){var s;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wx.cloud.callFunction({name:"cloud",data:{route:"check/img",token:"",params:{img:wx.cloud.CDN({type:"filePath",filePath:r})}},success:function(e){return console.log(e),console.log("succ"),!0},fail:function(e){return console.log(e),!1},complete:function(e){}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function n(){return(n=t(e().mark((function t(r){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wx.serviceMarket.invokeService({service:"wxee446d7507c68b11",api:"imgSecCheck",data:{Action:"ImageModeration",Scenes:["PORN","POLITICS","TERRORISM"],ImageUrl:new wx.serviceMarket.CDN({type:"filePath",filePath:r}),ImageBase64:"",Config:"",Extra:""}}).then((function(e){return!!(e&&e.data&&e.data.Response&&e.data.Response.PornResult&&"PASS"===e.data.Response.PornResult.Suggestion&&e.data.Response.PoliticsResult&&"PASS"===e.data.Response.PoliticsResult.Suggestion&&e.data.Response.TerrorismResult&&"PASS"===e.data.Response.TerrorismResult.Suggestion)})).catch((function(e){return console.log(e),!1}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}module.exports={imgCheck:function(e){return n.apply(this,arguments)},imgCheckCloud:function(e,t){return r.apply(this,arguments)},imgTypeCheck:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["jpg","jpeg","png","JPG","JPEG","PNG"],r=e.split(".")[e.split(".").length-1];return t.indexOf(r)>-1},imgSizeCheck:function(e,t){return e<t}};