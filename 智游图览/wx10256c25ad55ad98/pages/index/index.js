var e=require("../../components/zhmap/const"),t=getApp();Page({data:{rootScenicId:0,scenicName:"",mode:e.MAP_MODE_SCENIC,modeOid:null,modeType:null},onLoad:function(e){e.scene?(console.log("get scene value: "+e.scene),this.data.rootScenicId=parseInt(e.scene)):e.rootScenicId&&(console.log("get rootScenicId value: "+e.rootScenicId),this.data.rootScenicId=e.rootScenicId),e.mode&&(this.data.mode=e.mode,this.data.modeOid=e.modeOid,this.data.modeType=e.modeType),this.setData(this.data)},onReady:function(){},onUnload:function(){},changeScenic:function(e){this.pageRouter.navigateTo({url:"/pages/index/index?rootScenicId="+e.detail.scenicId})},redirectScenic:function(e){if(""+this.data.rootScenicId!=""+e.detail.scenicId)if(t.indexData&&""+t.indexData.sid==""+e.detail.scenicId){var a=getCurrentPages();wx.navigateBack({delta:a.length})}else{var i=this,n=getCurrentPages();1==n.length?i.pageRouter.redirectTo({url:pageHelper.getCurrentPageURL()+"?rootScenicId="+e.detail.scenicId+"&ntype=change"}):wx.navigateBack({delta:n.length-2,success:function(){i.pageRouter.redirectTo({url:pageHelper.getCurrentPageURL()+"?rootScenicId="+e.detail.scenicId+"&ntype=redirect"})}})}},updateBarTitle:function(e){wx.setNavigationBarTitle({title:e.detail.scenicName}),this.data.scenicName=e.detail.scenicName},onShareAppMessage:function(){return{title:this.data.scenicName,desc:"分享小程序",path:"/pages/index/index?rootScenicId="+this.data.rootScenicId}}});